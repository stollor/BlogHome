!function(){let e={destX:0,destY:0,sourceX:0,sourceY:0,width:"auto",height:"auto"};function t(t,a,r){let n={};for(let t in e)e.hasOwnProperty(t)&&(n[t]=r&&r[t]||e[t]);"auto"===n.width&&(n.width=this.canvas.width),"auto"===n.height&&(n.height=this.canvas.height),n.width=Math.min(n.width,this.canvas.width-n.sourceX,t.canvas.width-n.destX),n.height=Math.min(n.height,this.canvas.height-n.sourceY,t.canvas.height-n.destY);let s,i,o,h,c,l,d,g,u,b,k,f,m,v,M,p,w=this.getImageData(n.sourceX,n.sourceY,n.width,n.height),y=t.getImageData(n.destX,n.destY,n.width,n.height),X=w.data,Y=y.data,D=Y.length;function x(e,t){let a=t<<1;return t<128?e*(a+(e*(255-a)>>8))>>8:e*(511-a)+Math.sqrt(e<<8)*(a-255)>>8}function C(e,t){return e<128?e*t>>7:255-((255-t)*(255-e)>>7)}function I(e,t){return 255===t&&0===e?255:Math.min(255,(e<<8)/(255-t))}function O(e,t){return 255===t&&0===e?0:255-Math.min(255,(255-e<<8)/t)}function q(e,t,a){return{r:.299*e+.587*t+.114*a,g:-.1687*e-.3313*t+.5*a,b:.5*e-.4187*t-.0813*a}}function P(e,t,a){return{r:e+1.402*a,g:e-.3441*t-.7141*a,b:e+1.772*t}}function R(e,t,a){let r=q(e,t,a),n=Math.sqrt(r.g*r.g+r.b*r.b);return{h:Math.atan2(r.g,r.b),s:n,v:r.r}}function j(e,t,a){return P(a,t*Math.sin(e),t*Math.cos(e))}for(let e=0;e<D;e+=4){u=(s=X[e+3]/255)+(i=Y[e+3]/255)-s*i,Y[e+3]=255*u,b=Y[e],k=Y[e+1],f=Y[e+2],o=(m=X[e])/255*s,l=b/255*i,h=(v=X[e+1])/255*s,d=k/255*i,c=(M=X[e+2])/255*s,g=f/255*i,p=255/u;let t=i*s,r=i-t,n=s-t;switch(a){case"normal":case"src-over":Y[e]=(o+l-l*s)*p,Y[e+1]=(h+d-d*s)*p,Y[e+2]=(c+g-g*s)*p;break;case"screen":Y[e]=(o+l-o*l)*p,Y[e+1]=(h+d-h*d)*p,Y[e+2]=(c+g-c*g)*p;break;case"multiply":Y[e]=(o*l+o*(1-i)+l*(1-s))*p,Y[e+1]=(h*d+h*(1-i)+d*(1-s))*p,Y[e+2]=(c*g+c*(1-i)+g*(1-s))*p;break;case"difference":Y[e]=(o+l-2*Math.min(o*i,l*s))*p,Y[e+1]=(h+d-2*Math.min(h*i,d*s))*p,Y[e+2]=(c+g-2*Math.min(c*i,g*s))*p;break;case"src-in":p=255/(u=s*i),Y[e]=o*i*p,Y[e+1]=h*i*p,Y[e+2]=c*i*p,Y[e+3]=255*u;break;case"plus":case"add":Y[e]=Math.min(o+l,1)*p,Y[e+1]=Math.min(h+d,1)*p,Y[e+2]=Math.min(c+g,1)*p;break;case"overlay":Y[e]=t*C(b,m)+r*b+n*m,Y[e+1]=t*C(k,v)+r*k+n*v,Y[e+2]=t*C(f,M)+r*f+n*M;break;case"hardlight":Y[e]=t*C(m,b)+r*b+n*m,Y[e+1]=t*C(v,k)+r*k+n*v,Y[e+2]=t*C(M,f)+r*f+n*M;break;case"colordodge":case"dodge":Y[e]=t*I(b,m)+r*b+n*m,Y[e+1]=t*I(k,v)+r*k+n*v,Y[e+2]=t*I(f,M)+r*f+n*M;break;case"colorburn":case"burn":Y[e]=t*O(b,m)+r*b+n*m,Y[e+1]=t*O(k,v)+r*k+n*v,Y[e+2]=t*O(f,M)+r*f+n*M;break;case"darken":case"darker":Y[e]=t*(b<m?b:m)+r*b+n*m,Y[e+1]=t*(k<v?k:v)+r*k+n*v,Y[e+2]=t*(f<M?f:M)+r*f+n*M;break;case"lighten":case"lighter":Y[e]=(o<l?l:o)*p,Y[e+1]=(h<d?d:h)*p,Y[e+2]=(c<g?g:c)*p;break;case"exclusion":Y[e]=(l+o-2*l*o)*p,Y[e+1]=(d+h-2*d*h)*p,Y[e+2]=(g+c-2*g*c)*p;break;case"softlight":Y[e]=t*x(b,m)+r*b+n*m,Y[e+1]=t*x(k,v)+r*k+n*v,Y[e+2]=t*x(f,M)+r*f+n*M;break;case"luminosity":let w=q(b,k,f),y=P(q(m,v,M).r,w.g,w.b);Y[e]=t*y.r+r*b+n*m,Y[e+1]=t*y.g+r*k+n*v,Y[e+2]=t*y.b+r*f+n*M;break;case"color":{let a=q(b,k,f),s=q(m,v,M),i=P(a.r,s.g,s.b);Y[e]=t*i.r+r*b+n*m,Y[e+1]=t*i.g+r*k+n*v,Y[e+2]=t*i.b+r*f+n*M;break}case"hue":{let a=R(b,k,f),s=j(R(m,v,M).h,a.s,a.v);Y[e]=t*s.r+r*b+n*m,Y[e+1]=t*s.g+r*k+n*v,Y[e+2]=t*s.b+r*f+n*M;break}case"saturation":{let a=R(b,k,f),s=R(m,v,M),i=j(a.h,s.s,a.v);Y[e]=t*i.r+r*b+n*m,Y[e+1]=t*i.g+r*k+n*v,Y[e+2]=t*i.b+r*f+n*M;break}case"lightercolor":{let a=2.623*(b-m)+5.15*(k-v)+f-M>0?{r:b,g:k,b:f}:{r:m,g:v,b:M};Y[e]=t*a.r+r*b+n*m,Y[e+1]=t*a.g+r*k+n*v,Y[e+2]=t*a.b+r*f+n*M;break}case"darkercolor":{let a=2.623*(b-m)+5.15*(k-v)+f-M<0?{r:b,g:k,b:f}:{r:m,g:v,b:M};Y[e]=t*a.r+r*b+n*m,Y[e+1]=t*a.g+r*k+n*v,Y[e+2]=t*a.b+r*f+n*M;break}default:let X=e/4%this.canvas.width,D=Math.floor(e/4/this.canvas.width),B=X%8<4&&D%8<4||X%8>3&&D%8>3;Y[e]=Y[e+3]=255,Y[e+1]=B?255:0,Y[e+2]=B?0:255}}t.putImageData(y,n.destX,n.destY)}!function(e){if(!e||"function"!=typeof e.getImageData)return;Object.defineProperty(e,"blendOnto",{value:t});let a=t.supportedBlendModes="normal src-over screen multiply difference src-in plus add overlay hardlight colordodge dodge colorburn burn darken darker lighten lighter exclusion softlight luminosity color hue saturation lightercolor darkercolor".split(" "),r=t.supports={};for(let e=a.length;e--;)r[a[e]]=!0;t.aliases={"src-over":"normal",plus:"add",dodge:"colordodge",burn:"colorburn",darker:"darken",lighter:"lighten"}}(this.CanvasRenderingContext2D&&this.CanvasRenderingContext2D.prototype)}();