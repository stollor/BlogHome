System.register("chunks:///_virtual/AILib.ts",["cc"],(function(t){"use strict";var m,e,n;return{setters:[function(t){m=t.cclegacy,e=t.Vec3,n=t.Quat}],execute:function(){t({sphereAABBDistance:i,sphereOBBDistance:function(t,m,a,s,x){return e.subtract(u,t,a),n.conjugate(c,s),e.transformQuat(r,u,c),i(r,m,x)}}),m._RF.push({},"e200arLWgRK2aEVd3mb65un","AILib",void 0);t("obbIntersect",(function(t,m,e,n,r,a){var u,c=m.x,i=m.y,s=m.z,x=e.m00,y=e.m01,o=e.m02,z=e.m03,h=e.m04,b=e.m05,f=e.m06,M=e.m07,p=e.m08,v=r.x,g=r.y,A=r.z,B=a.m00,I=a.m01,L=a.m02,d=a.m03,R=a.m04,_=a.m05,l=a.m06,D=a.m07,E=a.m08,F=x*B+y*I+o*L,N=x*d+y*R+o*_,O=x*l+y*D+o*E,Q=z*B+h*I+b*L,S=z*d+h*R+b*_,V=z*l+h*D+b*E,j=f*B+M*I+p*L,k=f*d+M*R+p*_,w=f*l+M*D+p*E,K=n.x-t.x,P=n.y-t.y,W=n.z-t.z,q=K*x+P*y+W*o,C=K*z+P*h+W*b,G=K*f+P*M+W*p,H=Number.EPSILON,J=(F>=0?F:-F)+H,T=(N>=0?N:-N)+H,U=(O>=0?O:-O)+H,X=(Q>=0?Q:-Q)+H,Y=(S>=0?S:-S)+H,Z=(V>=0?V:-V)+H,$=(j>=0?j:-j)+H,tt=(k>=0?k:-k)+H,mt=(w>=0?w:-w)+H;return!((q>=0?q:-q)>c+(v*J+g*T+A*U))&&(!((C>=0?C:-C)>i+(v*X+g*Y+A*Z))&&(!((G>=0?G:-G)>s+(v*$+g*tt+A*mt))&&(!(((u=q*F+C*Q+G*j)>=0?u:-u)>c*J+i*X+s*$+v)&&(!(((u=q*N+C*S+G*k)>=0?u:-u)>c*T+i*Y+s*tt+g)&&(!(((u=q*O+C*V+G*w)>=0?u:-u)>c*U+i*Z+s*mt+A)&&(!(((u=G*Q-C*j)>=0?u:-u)>i*$+s*X+(g*U+A*T))&&(!(((u=G*S-C*k)>=0?u:-u)>i*tt+s*Y+(v*U+A*J))&&(!(((u=G*V-C*w)>=0?u:-u)>i*mt+s*Z+(v*T+g*J))&&(!(((u=q*j-G*F)>=0?u:-u)>c*$+s*J+(g*Z+A*Y))&&(!(((u=q*k-G*N)>=0?u:-u)>c*tt+s*T+(v*Z+A*X))&&(!(((u=q*w-G*O)>=0?u:-u)>c*mt+s*U+(v*Y+g*X))&&(!(((u=C*F-q*Q)>=0?u:-u)>c*X+i*J+(g*mt+A*tt))&&(!(((u=C*N-q*S)>=0?u:-u)>c*Y+i*T+(v*mt+A*$))&&!(((u=C*O-q*V)>=0?u:-u)>c*Z+i*U+(v*tt+g*$)))))))))))))))}));var r={x:0,y:0,z:0},a={x:0,y:0,z:0},u={x:0,y:0,z:0},c={x:0,y:0,z:0,w:1};function i(t,m,n){return a.x=Math.max(-n.x,Math.min(t.x,n.x)),a.y=Math.max(-n.y,Math.min(t.y,n.y)),a.z=Math.max(-n.z,Math.min(t.z,n.z)),e.subtract(a,a,t),e.dot(a,a)<=m*m}m._RF.pop()}}}));

System.register("chunks:///_virtual/arrary.ts",["cc"],(function(){"use strict";var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"662c6B38WRODKTzybm2HeBh","arrary",void 0),Array.prototype.each=function(t){for(var r=[],n=Array.prototype.slice.call(arguments,1),e=0;e<this.length;e++){var i=null==t?void 0:t.apply(this,[this[e],e].concat(n));null!=i&&r.push(i)}return r},Array.prototype.contains=function(t){for(var r=0;r<this.length;r++)if(this[r]==t)return!0;return!1},Array.prototype.uniquelize=function(){for(var t=new Array,r=0;r<this.length;r++)t.contains(this[r])||t.push(this[r]);return t},Array.prototype.intersect=function(t){var r=new Set(t);return this.filter((function(t){return r.has(t)}))},Array.prototype.minus=function(t){var r=new Set(t);return this.filter((function(t){return!r.has(t)}))},Array.prototype.complement=function(t){var r=new Set(this),n=new Set(t);return[].concat(this.filter((function(t){return!n.has(t)})),t.filter((function(t){return!r.has(t)})))},Array.prototype.union=function(t){return Array.from(new Set([].concat(this,t)))},Array.prototype.remove=function(t){var r=this.indexOf(t);r>=0&&this.splice(r,1)},t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseMove.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,o,n,s,a;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){o=e.cclegacy,n=e._decorator,s=e.Vec3,a=e.Component}],execute:function(){var r,c;o._RF.push({},"01a10AJMC1HEoOSNMUlEIaD","BaseMove",void 0);var l=n.ccclass,h=(n.property,new s(0,0,0));e("BaseMove",l("BaseMove")(((c=function(e){function o(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).speed=20,t.dir=0,t.mass=10,t.maxSpeed=100,t.maxAcceleration=100,t.timeHorizon=5,t.timeStep=.1,t.prefVelocity=new s(0,0,0),t.newVelocity=new s(0,0,0),t.nowVelocity=new s(0,0,0),t.radius=1,t.goal=new s(0,0,0),t}t(o,e);var n=o.prototype;return n.move=function(e){h.x=this.node.position.x+this.nowVelocity.x*e,h.y=this.node.position.y+this.nowVelocity.y*e,h.z=this.node.position.z+this.nowVelocity.z*e,this.node.setPosition(h)},n.rvo2=function(){for(var e=0;e<o.obstacles.length;e++){var t=o.obstacles[e];if(t.node.uuid!=this.node.uuid){var i=new s;s.subtract(i,t.node.position,this.node.position);var n=new s;s.subtract(n,this.nowVelocity,t.velocity);var a=i.lengthSqr(),r=t.radius+this.radius,c=new s;s.negate(c,t.velocity);var l=new s;s.normalize(l,i);var h=s.dot(c,l),y=Math.sqrt(a)-r;if(y<this.timeHorizon*this.maxSpeed&&h>0){var u=new s;s.cross(u,l,new s(0,1,0)),s.normalize(u,u);var w=new s;s.multiplyScalar(w,u,y/this.timeHorizon-h),s.subtract(this.newVelocity,this.newVelocity,s.multiplyScalar(new s,w,1/this.timeStep))}}}var p=this.newVelocity.length();p>this.maxSpeed&&s.multiplyScalar(this.newVelocity,this.newVelocity,this.maxSpeed/p);var v=new s;s.subtract(v,this.newVelocity,this.nowVelocity);var d=v.length();d>this.maxAcceleration&&s.multiplyScalar(v,v,this.maxAcceleration/d),s.add(this.newVelocity,this.nowVelocity,s.multiplyScalar(new s,v,this.timeStep)),this.nowVelocity=this.newVelocity},i(o,[{key:"velocity",get:function(){return this.nowVelocity}}]),o}(a)).obstacles=[],r=c))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/Body.ts",["cc","./Object.ts"],(function(t){"use strict";var i,s,e,r,n;return{setters:[function(t){i=t.cclegacy,s=t.Quat,e=t.Vec3,r=t.Mat3},function(t){n=t.cDirty}],execute:function(){var h;t("bDirty",void 0),i._RF.push({},"35d5eaYM9dJwrqPskERJ5FA","Body",void 0),function(t){t[t.C=1]="C",t[t.R=2]="R",t[t.H=4]="H",t[t.CRH=7]="CRH",t[t.NON=0]="NON"}(h||(h=t("bDirty",{})));t("cBody",function(){function t(t){this.id=0,this.mask=0,this.group=0,this.shape=null,this.object=null,this.isDirty=h.CRH,this.lower=0,this.upper=0,this.aabb=[0,0,0,0,0,0],this.isRemove=!1,this.isRetrieve=!0,this.isIdentity=!0,this.isInCollider=!1,this.raidus=0,this.center=new e,this.rotMat3=new r,this.halfSize=new e,this.object=t}var i=t.prototype;return i.updateBound=function(t){void 0===t&&(t=!1);var i=this.object,e=t?n.RTS:i.isDirty;if(e>0){var r=this.shape;if(e&n.R){this.isIdentity=!1;var o=this.getRotation();this.rotMat3.fromQuat(o),o.equals(s.IDENTITY,1e-4)&&(this.isIdentity=!0),r.updateAABB(this.rotMat3,this.isIdentity)}i.isDirty=n.NON;var a=this.aabb,u=r.aabb,c=this.getScale(),y=this.getPosition(),l=c.x>=0?c.x:-c.x,d=c.y>=0?c.y:-c.y,f=c.z>=0?c.z:-c.z;return a[0]=u[0]*l+y.x,a[1]=u[1]*d+y.y,a[2]=u[2]*f+y.z,a[3]=u[3]*l+y.x,a[4]=u[4]*d+y.y,a[5]=u[5]*f+y.z,this.isDirty=h.CRH,!0}return!1},i.clear=function(){this.shape=null,this.object.body=null,this.object=null,this.isInCollider=!1,this.isRemove=!1},i.getScale=function(){return this.object.node.worldScale},i.getPosition=function(){return this.object.node.worldPosition},i.getRotation=function(){return this.object.node.worldRotation},i.getRotMat3=function(){return this.rotMat3},i.getCenter=function(){var t=h.C;if(this.isDirty&t){this.isDirty&=~t;var i=this.aabb,s=this.center;s.x=.5*(i[0]+i[3]),s.y=.5*(i[1]+i[4]),s.z=.5*(i[2]+i[5])}return this.center},i.getRaidus=function(){var t=h.R;if(this.isDirty&t){this.isDirty&=~t;var i=this.getScale(),s=i.x>=0?i.x:-i.x,e=i.y>=0?i.y:-i.y,r=i.z>=0?i.z:-i.z,n=this.shape.radius,o=Math.max(s,e,r);this.raidus=o*n}return this.raidus},i.getHalfSize=function(){var t=h.H;if(this.isDirty&t){this.isDirty&=~t;var i=this.getScale(),s=i.x>=0?i.x:-i.x,e=i.y>=0?i.y:-i.y,r=i.z>=0?i.z:-i.z,n=this.halfSize,o=this.shape.halfSize;n.x=s*o.x,n.y=e*o.y,n.z=r*o.z}return this.halfSize},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,e,n,i,s,c,r,u,p;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.Vec3,s=t.instantiate,c=t.Collider2D,r=t.Contact2DType,u=t.PhysicsSystem,p=t.Component}],execute:function(){var l,a;e._RF.push({},"249049Im1VNdoBTpZ+ATUw+","bullet",void 0);var h=n.ccclass;n.property,t("Bullet",h("Bullet")(((a=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(o=t.call.apply(t,[this].concat(n))||this).lifeTime=0,o.tempPos=new i,o.velocity=new i,o}o(e,t),e.get=function(t){var o=this.pools.pop();o||(o=s(t).getComponent(e));return o},e.put=function(t){t.node.parent=null,this.pools.push(t)};var n=e.prototype;return n.update=function(t){if(this.lifeTime-=t,this.lifeTime<0)e.put(this);else{var o=this.node.getPosition(),n=this.velocity;this.tempPos.x=o.x+n.x*t,this.tempPos.y=o.y+n.y*t,this.tempPos.z=o.z+n.z*t,this.node.setPosition(this.tempPos)}},n.start=function(){var t=this.getComponent(c);t&&(t.on(r.BEGIN_CONTACT,this.onBeginContact,this),t.on(r.END_CONTACT,this.onEndContact,this))},n.onBeginContact=function(t,o,n){o.group==u.PhysicsGroup.enemy&&e.put(this)},n.onEndContact=function(t,o,e){},e}(p)).pools=[],l=a))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/CenterManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./ScrollManager.ts","./ViewManager.ts"],(function(e){"use strict";var t,i,a,r,n,o,s,l,c,p,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.createClass},function(e){o=e.cclegacy,s=e._decorator,l=e.v3},function(e){c=e.Manager},function(e){p=e.AlwaysScroll},function(e){h=e.ScrollManager},function(e){d=e.ViewManager}],execute:function(){var u,g,v,f,m,_,w,M,A,x,z;o._RF.push({},"49cfdCskIREZ6//by123w4v","CenterManager",void 0);var b=s.ccclass,y=s.property;e("CenterManager",(u=b("CenterManager"),g=y({displayName:"启用"}),v=y({displayName:"启用",visible:function(){return this.enabled}}),f=y({range:[0,1],slide:!0,displayName:"容器锚点",step:.1}),m=y({range:[0,1],slide:!0,displayName:"元素锚点",step:.1}),u((M=t((w=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"_enabled",M,r(t)),a(t,"duration",A,r(t)),a(t,"containerAnchorPoint",x,r(t)),a(t,"elementAnchorPoint",z,r(t)),t}i(t,e);var o=t.prototype;return o.getContainerOffset=function(e){void 0===e&&(e=this.containerAnchorPoint);var t=0;return t=this.adapter.isHorizontal?-1==this.adapter.multiplier?e:1-e:1==this.adapter.multiplier?e:1-e,this.adapter.mainAxisSize*t},o.getElementOffset=function(e){void 0===e&&(e=this.elementAnchorPoint);return this.adapter.isHorizontal?-1==this.adapter.multiplier?e:1-e:1==this.adapter.multiplier?e:1-e},o.onInit=function(){this.adapter.scrollManager.on(h.Event.ON_ABOUT_TO_STOP,this._onAboutToStop,this),this.adapter.viewManager.on(d.Event.ON_UPDATE_VIEWS,this.scrollToCenter,this,!0)},o._onAboutToStop=function(){this.scrollToCenter()},o.scrollToCenter=function(e){if(void 0===e&&(e=this.duration),this.enabled){var t=this.getCenterVisibleIndex();if(-1!=t){var i=this.adapter.viewManager.getVisibleView(t);this.adapter.scrollManager.scrollToGroupIndex(e,i.index)}}},o.getCenterVisibleIndex=function(e,t){void 0===e&&(e=this.containerAnchorPoint),void 0===t&&(t=this.elementAnchorPoint);for(var i=this.adapter.mainAxis,a=this.getContainerOffset(e),r=-1,n=Number.MAX_SAFE_INTEGER,o=0;o<this.adapter.viewManager.visibleLength;o++){var s=this.adapter.viewManager.getVisibleView(o);if(!s||!s.group)break;var c={x:s.group.position.x,y:s.group.position.y};c[i]-=this.adapter.multiplier*s.group.size[i]*t;var p=this.adapter.scrollManager.content.convertToWorldSpaceAR(l(c.x,c.y)),h=this.adapter.scrollManager.view.convertToNodeSpaceAR(p),d=Math.abs(h[i]+this.adapter.multiplier*a);d<n&&(n=d,r=o)}return r},o.getPositionByGroupIndex=function(e,t,i){void 0===t&&(t=p.Auto),void 0===i&&(i=!1);var a=this.adapter.viewManager.getGroup(e);if(!a)return null;var r=null;if(t==p.Header&&this.adapter.viewManager.loopHeader)i&&(r=this._checkExists(e)),null==r&&(r=this._alwaysHeader(e,a));else if(t==p.Footer&&this.adapter.viewManager.loopFooter)i&&(r=this._checkExists(e)),null==r&&(r=this._alwaysFooter(e,a));else if(null==(r=this._checkExists(e))){var n=this.adapter.viewManager.header,o=this.adapter.viewManager.footer;n?e>o.index?r=this._calcTargetFooter(o.group,o.index+1,e,a):e<n.index&&(r=this._calcTargetHeader(n.group,n.index-1,e,a)):r={position:a.position[this.adapter.mainAxis],size:a.size[this.adapter.mainAxis],anchor:a.anchorPoint[this.adapter.mainAxis]}}return this._convertTargetToPosition(r)},o._convertTargetToPosition=function(e){var t=null;if(e){var i=this.adapter.multiplier,a=-1==i?e.anchor:1-e.anchor;t=-e.position,t-=this.getContainerOffset()*i,t-=e.size*a*i,t+=e.size*this.getElementOffset()*i}return t},o._checkExists=function(e){var t=this.adapter.viewManager.getVisibleIndexByGroupIndex(e);if(-1!=t){var i=this.adapter.viewManager.getVisibleView(t);return{position:i.group.position[this.adapter.mainAxis],size:i.group.size[this.adapter.mainAxis],anchor:i.group.anchorPoint[this.adapter.mainAxis]}}return null},o._calcTargetFooter=function(e,t,i,a){for(var r=this.adapter.viewManager.internal_getInitFooterSize(e),n=t;n<=i;n++)r+=this.adapter.viewManager.internal_accumulationSize(n);return{position:this.adapter.viewManager.internal_convertSizeToFooterPosition(r,a),size:a.size[this.adapter.mainAxis],anchor:a.anchorPoint[this.adapter.mainAxis]}},o._calcTargetHeader=function(e,t,i,a){for(var r=this.adapter.viewManager.internal_getInitHeaderSize(e),n=t;n>=i;n--)r+=this.adapter.viewManager.internal_accumulationSize(n);return{position:this.adapter.viewManager.internal_convertSizeToHeaderPosition(r,a),size:a.size[this.adapter.mainAxis],anchor:a.anchorPoint[this.adapter.mainAxis]}},o._alwaysHeader=function(e,t){var i=0,a=e,r=this.adapter.viewManager.header;return r&&(i=this.adapter.viewManager.internal_getInitHeaderSize(r.group),a=r.index),e!=a&&(i=this._calcSizeToHeader(a,e,i)),{position:this.adapter.viewManager.internal_convertSizeToHeaderPosition(i,t),size:t.size[this.adapter.mainAxis],anchor:t.anchorPoint[this.adapter.mainAxis]}},o._alwaysFooter=function(e,t){var i=0,a=e,r=this.adapter.viewManager.footer;return r&&(i=this.adapter.viewManager.internal_getInitFooterSize(r.group),a=r.index),e!=a&&(i=this._calcSizeToFooter(a,e,i)),{position:this.adapter.viewManager.internal_convertSizeToFooterPosition(i,t),size:t.size[this.adapter.mainAxis],anchor:t.anchorPoint[this.adapter.mainAxis]}},o._calcSizeToHeader=function(e,t,i){for(;;){if(--e<0){if(!this.adapter.viewManager.loopHeader)return i;e=this.adapter.viewManager.groupLength-1}if(i+=this.adapter.viewManager.internal_accumulationSize(e),t==e)return i}},o._calcSizeToFooter=function(e,t,i){for(;;){if(++e>=this.adapter.viewManager.groupLength){if(!this.adapter.viewManager.loopFooter)return i;e=0}if(i+=this.adapter.viewManager.internal_accumulationSize(e),e==t)return i}},n(t,[{key:"enabled",get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e)}},{key:"max",get:function(){var e=this.getContainerOffset(this.containerAnchorPoint);return this.adapter.isArrangeAxisStart?e:this.adapter.mainAxisSize-e}},{key:"min",get:function(){var e=this.getContainerOffset(this.containerAnchorPoint);return this.adapter.isArrangeAxisStart?this.adapter.mainAxisSize-e:e}}]),t}(c)).prototype,"_enabled",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(w.prototype,"enabled",[g],Object.getOwnPropertyDescriptor(w.prototype,"enabled"),w.prototype),A=t(w.prototype,"duration",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),x=t(w.prototype,"containerAnchorPoint",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=t(w.prototype,"elementAnchorPoint",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=w))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/Collider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Body.ts","./Shape.ts"],(function(i){"use strict";var t,s,r,e;return{setters:[function(i){t=i.createClass},function(i){s=i.cclegacy},function(i){r=i.cBody},function(i){e=i.ShapeSupport}],execute:function(){s._RF.push({},"e9918lPZAlNEZGC1kb/9cqo","Collider",void 0),i("cCollider",function(){function i(){this.id=0,this.pools=[],this.axis=-1,this.bodys=[],this.isDirty=!1}var s=i.prototype;return s.create=function(i){var t=this.pools.pop();return t?(t.object=i,t):((t=new r(i)).id=this.id++,t)},s.insert=function(i){this.bodys.push(i),i.isInCollider=!0},s.remove=function(i){i.isRemove=!0},s.reset=function(){this.axis=-1,this.isDirty=!0;for(var i=this.bodys,t=i.length-1;t>=0;t--){var s=i[t];this.pools.push(s),s.clear()}i.length=0},s.clear=function(){this.id=0,this.axis=-1,this.isDirty=!0,this.pools.length=0;for(var i=this.bodys,t=i.length-1;t>=0;t--)i[t].clear();i.length=0},s.update=function(i){this.reBuild(),this.triggers()},s.triggers=function(){var i=this.axis,t=i>>2&3,s=i>>4&3,r=this.bodys,o=0,n=0,a=r.length;for(o=0;o<a;o++){var l=r[o];if(!l.isRemove){var h=l.aabb,u=h[t],c=h[s],f=l.mask,p=l.group,v=l.upper,d=l.object;for(n=o+1;n<a;n++){var g=r[n];if(!g.isRemove){if(v<=g.lower)break;var b=g.aabb,y=g.object,x=f&g.group,w=g.mask&p;if((x||w)&&!(u>b[t+3]||b[t]>h[t+3]||c>b[s+3]||b[s]>h[s+3])){var C=d.shape.type,m=y.shape.type;if(C>m){if(!e[m|C](g,l))continue}else if(!e[C|m](l,g))continue;x&&d.trigger&&(d.nowIsInCollider=!0,d.onTrigger(g)),w&&y.trigger&&(y.nowIsInCollider=!0,y.onTrigger(l))}}}}}},s.reBuild=function(){var i=!1,t=this.preBuildAxis();if(((3&t)!=(3&this.axis)||this.axis<0)&&(this.axis=t,i=!0),i||this.isDirty){this.isDirty=!1;var s=this.bodys;t=3&this.axis;for(var r=0,e=s.length;r!==e;r++){var o=s[r],n=o.aabb;o.lower=n[t],o.upper=n[t+3]}i?s.sort((function(i,t){return i.lower-t.lower})):this.sort(s)}},s.sort=function(i){var t,s=0,r=0;for(s=1,t=i.length;s<t;s++){var e=i[s],o=e.lower;for(r=s-1;r>=0;r--){var n=i[r];if(n.lower<=o)break;i[r+1]=n}r+1!=s&&(i[r+1]=e)}},s.preBuildAxis=function(){for(var i=0,t=0,s=0,r=0,e=0,o=0,n=0,a=0,l=0,h=0,u=this.bodys,c=u.length,f=0,p=!1,v=0;v<c;v++){var d=u[v];if(d.isRemove)d.isRetrieve&&(this.pools.push(d),d.clear()),d.isInCollider=!1;else{++f<=v&&(u[f-1]=d),d.updateBound()&&(p=!0);var g=d.aabb,b=g[3]-g[0],y=g[4]-g[1],x=g[5]-g[2];a+=b*b,l+=y*y,h+=x*x;var w=.5*(g[3]+g[0]);t+=w,s+=w*w;var C=.5*(g[4]+g[1]);r+=C,e+=C*C;var m=.5*(g[5]+g[2]);o+=m,n+=m*m}}this.bodys.length=f,this.isDirty=p;var B=1/f,k=(s-t*t*B)*(a=a>0?f/a:0),R=(e-r*r*B)*(l=l>0?f/l:0),_=(n-o*o*B)*(h=h>0?f/h:0);return 0==k&&(k=a),0==R&&(R=l),0==_&&(_=h),k>R?k>_?(i=0,i|=R>_?36:24):(i=2,i|=k>R?16:4):R>_?(i=1,i|=k>_?32:8):(i=2,i|=k>R?16:4),i},t(i,null,[{key:"inst",get:function(){return null==this._inst&&(this._inst=new i),this._inst}}]),i}())._inst=null,s._RF.pop()}}}));

System.register("chunks:///_virtual/cream.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,s,o,a,c,l,p,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.createClass},function(e){o=e.cclegacy,a=e._decorator,c=e.CCBoolean,l=e.Camera,p=e.RenderTexture,u=e.UITransform,h=e.Component}],execute:function(){var f,y,g,m,d,b,S,T,_;o._RF.push({},"cd5afJykE5HNaF4yYVIbCPP","cream",void 0);var R=a.ccclass,v=a.property;e("shaderObscureCream",(f=R("shaderObscureCream"),y=v(c),g=v(l),m=v(p),d=v({slide:!0,step:.05,min:.1,max:1}),f((t((S=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,i(t,"cam",T,n(t)),i(t,"rt",_,n(t)),t._isSetting=!1,t.rtScale=.5,t}r(t,e);var o=t.prototype;return o.start=function(){this.resetRT()},o.resetRT=function(){var e=this;this._isSetting=!0,this.scheduleOnce((function(){var t=e.node.getComponent(u).contentSize;e.rt.resize(t.width*e.rtScale,t.height*e.rtScale),e.cam.targetTexture=e.rt,e._isSetting=!1}))},s(t,[{key:"_refresh",get:function(){return this.resetRT(),!0}},{key:"setRTscale",get:function(){return this.rtScale},set:function(e){this._isSetting||(this.rtScale=e,this.resetRT())}}]),t}(h)).prototype,"_refresh",[y],Object.getOwnPropertyDescriptor(S.prototype,"_refresh"),S.prototype),T=t(S.prototype,"cam",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(S.prototype,"rt",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(S.prototype,"setRTscale",[d],Object.getOwnPropertyDescriptor(S.prototype,"setRTscale"),S.prototype),b=S))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/CSpineUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,i,o,a,r,s;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,o=n.sp,a=n.Node,r=n.log,s=n.Component}],execute:function(){var u;e._RF.push({},"99817aQKP5GcIovF9+E8iFt","CSpineUtil",void 0);var c=i.ccclass;i.property,n("CSpineUtil",c("CSpineUtil")(u=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e.getSpineComponent=function(n){if(n){var t=null;return n instanceof o.Skeleton?t=n:n instanceof a&&(t=n.getComponent(o.Skeleton)),t}},e.findSkin=function(n,t){var e=this.getSpineComponent(n);if(!e)return!1;e.node.active=!0;try{for(var i in e.skeletonData.getSkinsEnum())if(i==t)return!0;return!1}catch(n){r("设置皮肤"+t+"出错"),r(n)}},e.setData=function(n,t){var e=this.getSpineComponent(n);if(!e)return!1;e.node.active=!1,e.destroyRenderData(),e.skeletonData=t},e.setDataRes=function(n,t,e){var i=this;globalThis.gameManager.resMgr.loadSpineData(t,(function(t,o){i.setData(n,o),e&&e(n)}))},e.setSkine=function(n,t){var e=this.getSpineComponent(n);e.node.active=!0,this.findSkin(n,t)?(e.setSkin(t),e.node.active=!0):e.node.active=!1},e.playSpine=function(n,t,e,i,o,a){void 0===o&&(o=!1);var r=this.getSpineComponent(n);r.findAnimation(t)?(r.setToSetupPose(),r.timeScale=e,r.setAnimation(0,t,o),r.setEventListener((function(n,t){i&&i(1,t.data.name)})),r.setCompleteListener((function(n){i&&i(0,r)}))):i&&i(-1,null)},e.playSpineLimimt=function(n,t,e,i,o,a,r){void 0===r&&(r=!1);var s=this.getSpineComponent(n);s.findAnimation(t)&&(s.setToSetupPose(),s.timeScale=e,s.setAnimation(0,t,r),this.limitSpineFrame(s,0,i,o),s.setEventListener((function(n,t){a&&a(1,t.data.name)})),s.setCompleteListener((function(n){a&&a(0,s)})))},e.limitSpineFrame=function(n,t,e,i){var o=1/30,a=e*o,r=i*o;n.getCurrent(t).animationStart=a,n.getCurrent(t).animationEnd=r},e.addSocket=function(n,t,e){var i=n.findBone(t);if(i){for(var a=i.data.name;i.parent;)a=i.parent.data.name+"/"+a,i=i.parent;var r=new o.SpineSocket(a,e);n.sockets.push(r),n.sockets=n.sockets}},e.getAniTime=function(n,t){var e,i,o,a,r;return null==n||null==(e=n.skeletonData)||null==(i=e._skeletonCache)||null==(o=i.animations)||null==(a=o.filter((function(n){return n.name==t})))||null==(r=a[0])?void 0:r.duration},e}(s))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/data.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"ff39dHJ4BNA05l84PlEQZj7","data",void 0);t("Data",function(){function t(t){this._val=void 0,this._listener=[],t&&(this._val=t)}var i=t.prototype;return i.set=function(t){var i=this._val;this._val=t,this._listener.forEach((function(n){n(t,i)}))},i.get=function(){return this._val},i.addListener=function(t){this._listener.push(t)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/dataComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,o,i,a,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.CCString,p=e.Component}],execute:function(){var s,u,l,f,y;i._RF.push({},"83623KJMspI5aeweOpWQCoo","dataComponent",void 0);var d=a.ccclass,C=a.property;e("dataComponent",(s=d("dataComponent"),u=C(c),s((y=t((f=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"key",y,o(t)),t}return n(t,e),t}(p)).prototype,"key",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=f))||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/debug.ts",["cc"],(function(_){"use strict";var e,D;return{setters:[function(_){e=_.cclegacy,D=_.Color}],execute:function(){e._RF.push({},"b7bf3JPeg5Pz4Pj5H6FXtBa","debug",void 0);_("DEBUG_DRAW_LINE_COLOR",new D(238,124,55,255)),_("DEBUG_DRAW_FILL_COLOR",new D(88,175,64,50)),_("DEBUG_DRAW_BORDER_COLOR",new D(56,120,94,255)),_("DEBUG_DRAW_LIND_WIDTH",3),_("ADAPTER_DEBUG_VIEW",!1),_("ADAPTER_DEBUG_CONTENT",!1);e._RF.pop()}}}));

System.register("chunks:///_virtual/discard.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,s,n,a,o;return{setters:[function(t){e=t.inheritsLoose,r=t.createClass},function(t){i=t.cclegacy,s=t._decorator,n=t.Node,a=t.Sprite,o=t.Component}],execute:function(){var c;i._RF.push({},"e380bo8YOlE2IVoAAzNNWl+","discard",void 0);var l=s.ccclass;s.property,t("Discard",l("ShaderDiscard")(c=function(t){function i(){for(var e,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._material=void 0,e._val=void 0,e}e(i,t);var s=i.prototype;return s.onLoad=function(){this._material=this.sprite.getMaterialInstance(0),this.node.on(n.EventType.TOUCH_END,this.touchStartEvent,this)},s.touchStartEvent=function(t){var e=this;this._val>=1?(this._val=0,this._material.setProperty("burnThreshold",this._val)):(this._val=0,this.unscheduleAllCallbacks(),this.schedule((function(){e._material.setProperty("burnThreshold",e._val),e._val+=.01}),.02,100))},r(i,[{key:"sprite",get:function(){return this.node.getComponent(a)}}]),i}(o))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/enum.ts",["cc"],(function(e){"use strict";var t,o;return{setters:[function(e){t=e.cclegacy,o=e.Enum}],execute:function(){var i,r,n,c,d,a,l,u,p,f,s,L,h,A,v,g;e({AlwaysScroll:void 0,ArrangeAxis:void 0,ChildAlignment:void 0,IndicatorMode:void 0,Layer:void 0,MagneticDirection:void 0,MovementType:void 0,NestedDirection:void 0,Orientation:void 0,ReleaseState:void 0,ScrollDirection:void 0,ScrollbarDirection:void 0,StretchDirection:void 0,TouchMode:void 0,Transition:void 0,WrapMode:void 0}),t._RF.push({},"21168fhfp5Aw4tN3YlGEjVv","enum",void 0),function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(i||(i=e("Orientation",{}))),function(e){e[e.Unrestricted=0]="Unrestricted",e[e.Elastic=1]="Elastic",e[e.Clamped=2]="Clamped"}(r||(r=e("MovementType",{}))),function(e){e[e.Start=0]="Start",e[e.End=1]="End"}(n||(n=e("ArrangeAxis",{}))),function(e){e[e.Auto=0]="Auto",e[e.Header=1]="Header",e[e.Footer=2]="Footer",e[e.Center=3]="Center"}(c||(c=e("StretchDirection",{}))),function(e){e[e.Lowest=0]="Lowest",e[e.Medium=1]="Medium",e[e.Highest=2]="Highest"}(d||(d=e("Layer",{}))),function(e){e[e.Auto=0]="Auto",e[e.Wrap=1]="Wrap",e[e.Nowrap=2]="Nowrap"}(a||(a=e("WrapMode",{}))),function(e){e[e.Auto=0]="Auto",e[e.AlwaysAllow=1]="AlwaysAllow",e[e.Disabled=2]="Disabled"}(l||(l=e("TouchMode",{}))),function(e){e[e.Header=0]="Header",e[e.Footer=1]="Footer"}(u||(u=e("MagneticDirection",{}))),function(e){e[e.UpperLeft=0]="UpperLeft",e[e.UpperCenter=1]="UpperCenter",e[e.UpperRight=2]="UpperRight",e[e.MiddleLeft=3]="MiddleLeft",e[e.MiddleCenter=4]="MiddleCenter",e[e.MiddleRight=5]="MiddleRight",e[e.LowerLeft=6]="LowerLeft",e[e.LowerCenter=7]="LowerCenter",e[e.LowerRight=8]="LowerRight"}(p||(p=e("ChildAlignment",{}))),function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.None=4]="None"}(f||(f=e("ScrollDirection",{}))),function(e){e[e.Top_To_Bottom=0]="Top_To_Bottom",e[e.Bottom_To_Top=1]="Bottom_To_Top",e[e.Left_To_Right=2]="Left_To_Right",e[e.Right_To_Left=3]="Right_To_Left"}(s||(s=e("ScrollbarDirection",{}))),function(e){e[e.Both=0]="Both",e[e.Header=1]="Header",e[e.Footer=2]="Footer"}(L||(L=e("NestedDirection",{}))),function(e){e[e.Auto=0]="Auto",e[e.Header=1]="Header",e[e.Footer=2]="Footer"}(h||(h=e("AlwaysScroll",{}))),function(e){e[e.Normal=0]="Normal",e[e.Button=1]="Button"}(A||(A=e("IndicatorMode",{}))),function(e){e[e.None=0]="None",e[e.ColorTint=1]="ColorTint",e[e.SpriteSwap=2]="SpriteSwap",e[e.Scale=3]="Scale"}(v||(v=e("Transition",{}))),function(e){e.IDLE="IDLE",e.PULL="PULL",e.WAIT="WAIT",e.RELEASE="RELEASE"}(g||(g=e("ReleaseState",{}))),o(i),o(r),o(n),o(c),o(u),o(s),o(p),o(l),o(A),o(v),t._RF.pop()}}}));

System.register("chunks:///_virtual/fit.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,n,t,o,s,r,a,l,u,c,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,a=e.Node,l=e.view,u=e.screen,c=e.UITransform,h=e.Component}],execute:function(){var g,p,d,z,S,f,v,w,b,y,C;s._RF.push({},"73a2dXTWohMQ4tP/vs2TMQm","fit",void 0);var m=r.ccclass,D=r.property;e("UIFit",(g=m("UIFit"),p=D(a),d=D(a),z=D(a),S=D(a),g((w=i((v=function(e){function i(){for(var i,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return i=e.call.apply(e,[this].concat(s))||this,t(i,"nodeSize",w,o(i)),t(i,"desingSize",b,o(i)),t(i,"canvasSize",y,o(i)),t(i,"viewSize",C,o(i)),i}n(i,e);var s=i.prototype;return s.start=function(){this.node.on(a.EventType.SIZE_CHANGED,this.onSizeChange,this),l.on("design-resolution-changed",this.onDesignResolutionChanged,this),l.on("canvas-resize",this.onCanvasResize,this)},s.onCanvasResize=function(){this.canvasSize.setStr("Canvas:"+u.windowSize.width+","+u.windowSize.height)},s.onDesignResolutionChanged=function(){this.desingSize.setStr("Desing:"+l.getDesignResolutionSize().width+","+l.getDesignResolutionSize().height)},s.onSizeChange=function(){this.nodeSize.setStr("Node:"+this.node.getComponent(c).width+","+this.node.getComponent(c).height)},s.update=function(e){},i}(h)).prototype,"nodeSize",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=i(v.prototype,"desingSize",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=i(v.prototype,"canvasSize",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(v.prototype,"viewSize",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=v))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/ghost.ts",["./rollupPluginModLoBabelHelpers.js","cc","./player.ts"],(function(t){"use strict";var o,e,n,s,i,c,r,l,a,h,u;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,s=t.Vec3,i=t.instantiate,c=t.Collider2D,r=t.Contact2DType,l=t.macro,a=t.PhysicsSystem,h=t.Component},function(t){u=t.Player}],execute:function(){var p,y;e._RF.push({},"85fd3bku3xPQJ9Vrtva1mzT","ghost",void 0);var P=n.ccclass;n.property,t("Ghost",P("Ghost")(((y=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(o=t.call.apply(t,[this].concat(n))||this).speed=200,o.velocity=new s,o._tempPos=new s,o}o(e,t),e.get=function(t){var o=this.pools.pop();o||(o=i(t).getComponent(e));return o},e.put=function(t){t.node.parent=null,this.pools.push(t)};var n=e.prototype;return n.start=function(){var t=this.getComponent(c);t&&t.on(r.BEGIN_CONTACT,this.onBeginContact,this)},n.onEnable=function(){this.schedule(this.checkPlayerPos,.5,l.REPEAT_FOREVER,0)},n.onDisable=function(){this.unschedule(this.checkPlayerPos)},n.checkPlayerPos=function(){var t=this.node.worldPosition,o=u.instance.node.worldPosition;s.subtract(this.velocity,o,t),this.velocity.normalize().multiplyScalar(this.speed)},n.onBeginContact=function(t,o,n){o.group==a.PhysicsGroup.skill&&(console.log("受到攻击"),e.put(this))},n.update=function(t){var o=this.node.position,e=this.velocity;this._tempPos.x=o.x+e.x*t,this._tempPos.y=o.y+e.y*t,this._tempPos.z=o.z+e.z*t,this.node.setPosition(this._tempPos)},e}(h)).pools=[],p=y))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/Group.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enum.ts"],(function(i){"use strict";var t,e,n;return{setters:[function(i){t=i.createClass},function(i){e=i.cclegacy},function(i){n=i.StretchDirection}],execute:function(){e._RF.push({},"c701cxQvelFbLzv3DVRhj2t","Group",void 0);i("Group",function(){function i(i){this._adapter=void 0,this._index=-1,this._models=[],this._size={x:0,y:0},this._oldSize={x:0,y:0},this._anchorPoint={x:.5,y:.5},this._position={x:0,y:0},this._oldPosition={x:0,y:0},this._totalMinSize={x:0,y:0},this._totalPreferredSize={x:0,y:0},this._totalFlexibleSize={x:0,y:0},this._isFixed=!1,this._fixedIndex=-1,this._adapter=i,this.internal_reset()}var e=i.prototype;return e.findModelIndex=function(i){return this.models.findIndex((function(t){return t.index==i}))},e.internal_reset=function(){this._models=[],this._size={x:0,y:0},this._oldSize={x:0,y:0},this._anchorPoint={x:.5,y:.5},this._position={x:0,y:0},this._oldPosition={x:0,y:0},this._totalMinSize={x:0,y:0},this._totalPreferredSize={x:0,y:0},this._totalFlexibleSize={x:0,y:0},this._isFixed=!1,this._fixedIndex=-1,this._setAnchorPoint()},e.internal_setPosition=function(i){var t=this.adapter.mainAxis;this.oldPosition[t]=this.position[t],this.position[t]=i},e.internal_setIndex=function(i){this._index=i},e.internal_insert=function(i,t,e){t.internal_reset();var n=this.models;if(this.internal_reset(),this._fixedIndex=i.fixedIndex,!e)for(var s=0;s<n.length;s++){var r=n[s];if(!(r.index<i.modelIndex))break;if(!this._insertHandler(r,t))return i.modelIndex=r.index,i.fixedIndex=this.isFixed?this.index:i.fixedIndex,!0}for(var o=i.modelIndex;o<this.adapter.modelManager.length;o++){var a=this.adapter.modelManager.get(o);if(!this._insertHandler(a,t))return i.modelIndex=a.index,i.fixedIndex=this.isFixed?this.index:i.fixedIndex,a.index}return!1},e.internal_includes=function(i){for(var t=this,e=function(e){var n=i[e];if(-1!=t.models.findIndex((function(i){return i.data==n})))return{v:!0}},n=0;n<i.length;n++){var s=e(n);if("object"==typeof s)return s.v}return!1},e._insertHandler=function(i,t){if(t.internal_isWrap(i,this))return t.internal_reset(),!1;t.internal_push(i),i.element.fixed&&(this._isFixed=!0,this._fixedIndex=-1);var e=this.adapter.mainAxis,n=this.adapter.crossAxis;return(!i.element.ignoreLayout||i.element.ignoreLayout&&i.element.placeholder)&&(this.size[e]=Math.max(this.size[e],i.size[e]*i.scale[e])),this.size[n]=this.adapter.crossAxisSize,this.oldSize[e]=this.size[e],this.oldSize[n]=this.size[n],this.models.push(i),!0},e._setAnchorPoint=function(){switch(this.adapter.viewManager.stretchDirection){case n.Center:this.anchorPoint[this.adapter.mainAxis]=.5;break;case n.Header:this.anchorPoint[this.adapter.mainAxis]=1-this.adapter.mainAxisAnchorPoint;break;default:this.anchorPoint[this.adapter.mainAxis]=this.adapter.mainAxisAnchorPoint}},t(i,[{key:"adapter",get:function(){return this._adapter}},{key:"index",get:function(){return this._index}},{key:"models",get:function(){return this._models}},{key:"size",get:function(){return this._size}},{key:"oldSize",get:function(){return this._oldSize}},{key:"anchorPoint",get:function(){return this._anchorPoint}},{key:"position",get:function(){return this._position}},{key:"oldPosition",get:function(){return this._oldPosition}},{key:"totalMinSize",get:function(){return this._totalMinSize}},{key:"totalPreferredSize",get:function(){return this._totalPreferredSize}},{key:"totalFlexibleSize",get:function(){return this._totalFlexibleSize}},{key:"isFixed",get:function(){return this._isFixed}},{key:"fixedIndex",get:function(){return this._fixedIndex}}]),i}());e._RF.pop()}}}));

System.register("chunks:///_virtual/gun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./view2.ts","./bullet.ts"],(function(t){"use strict";var e,i,n,o,r,l,s,a,c,u,p,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,s=t.Vec3,a=t.Quat,c=t.Prefab,u=t.Node,p=t.Component},function(t){h=t.GameView},function(t){f=t.Bullet}],execute:function(){var d,b,y,m,w,g,v,D,T,z;r._RF.push({},"4d4d2mKixRDZZ5cGHsWD5A8","gun",void 0);var S=l.ccclass,x=l.property,P=new s,C=new a;t("Gun",(d=S("Gun"),b=x(c),y=x(u),d((g=e((w=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"bullet",g,o(e)),n(e,"point",v,o(e)),n(e,"speed",D,o(e)),n(e,"lifeTime",T,o(e)),n(e,"cycleTime",z,o(e)),e.minDist=0,e.nextCycle=0,e.isShoot=!1,e.direction=new s,e}i(e,t);var r=e.prototype;return r.attack=function(t){if(t&&!(this.nextCycle>0)){s.subtract(P,t,this.node.worldPosition);var e=P.lengthSqr();if(!this.isShoot)return this.isShoot=!0,this.minDist=e,void this.direction.set(P);e<this.minDist&&(this.minDist=e,this.direction.set(P))}},r.update=function(t){if(this.nextCycle-=t,this.isShoot){this.isShoot=!1,this.nextCycle=this.cycleTime;var e=h.instance.effect,i=f.get(this.bullet);i.node.parent=e,s.subtract(P,this.point.worldPosition,e.worldPosition),i.node.setPosition(P);var n=this.direction.normalize(),o=Math.atan2(n.y,n.x);a.rotateZ(C,a.IDENTITY,o),i.node.setRotation(C),i.velocity.set(n).multiplyScalar(this.speed),i.lifeTime=this.lifeTime,this.node.rotation=C}},e}(p)).prototype,"bullet",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(w.prototype,"point",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(w.prototype,"speed",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),T=e(w.prototype,"lifeTime",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),z=e(w.prototype,"cycleTime",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),m=w))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/Helper.ts",["cc"],(function(t){"use strict";var r,e,c,n;return{setters:[function(t){r=t.cclegacy,e=t._decorator,c=t.Mat4,n=t.Vec3}],execute:function(){r._RF.push({},"d2ae6COPdFC6ZT0cfUhS8vd","Helper",void 0);e.ccclass,e.property;var o=new c,a=new c;t("Helper",function(){function t(){}return t.localToWorld=function(t,r,e){t.getWorldMatrix(o),n.transformMat4(r,e,o)},t.worldToLocal=function(t,r,e){t.getWorldMatrix(o),c.invert(a,o),n.transformMat4(r,e,a)},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/helper2.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"d16dfIj/wBDe7lg2eRhY7du","helper",void 0);var r=t("Helper",function(){function t(){}return t.smoothStep=function(t,n,r){return n*(r=-2*(r=this.clamp01(r))*r*r+3*r*r)+t*(1-r)},t.smoothDamp=function(t,n,r,e,o,a){var i=2/(e=Math.max(1e-4,e)),u=i*a,c=1/(1+u+.48*u*u+.235*u*u*u),x=t-n,p=n,s=o*e,f=(r+i*(x=this.clamp(x,0-s,s)))*a;r=(r-i*f)*c;var h=(n=t-x)+(x+f)*c;return p-t>0==h>p&&(r=((h=p)-p)/a),{velocity:r,position:h}},t.clamp01=function(t){return this.clamp(t,0,1)},t.clamp=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=1),Math.min(Math.max(t,n),r)},t.sign=function(t){return t>=0?1:-1},t.lerp=function(t,n,r){return t+(n-t)*this.clamp01(r)},t.approximately=function(t,n){return Math.abs(n-t)<Math.max(1e-4*Math.max(Math.abs(t),Math.abs(n)),8*this.Epsilon)},t.round=function(t,n){return Math.round(t*Math.pow(10,n))/Math.pow(10,n)},t.pingpang=function(t){var n=t;n=Math.abs(t);var r=Math.trunc(n);return r%2==0?n-=r:n=1-(n-r),n},t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.progress=function(t,n,r,e){return t+(n-t)*e},t.getGuid=function(){var t=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==n?r:3&r|8).toString(16)}))},t}());r.Epsilon=1401298e-51,r.Infinity=1/0,n._RF.pop()}}}));

System.register("chunks:///_virtual/Holder.ts",["./rollupPluginModLoBabelHelpers.js","cc","./helper2.ts","./ModelManager.ts"],(function(e){"use strict";var t,i,s,n,o,a,r;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,s=e._decorator,n=e.Node,o=e.UITransform},function(e){a=e.Helper},function(e){r=e.ModelManager}],execute:function(){var h;i._RF.push({},"06194IgtVlOubt8kvkPRvBb","Holder",void 0);var d=s.ccclass;s.property,e("Holder",d("Holder")(h=function(){function e(e,t,i){this._node=void 0,this._transform=void 0,this._code=void 0,this._adapter=void 0,this._model=void 0,this._view=void 0,this._fixedIndex=-1,this._oldData=null,this._oldElement=null,this._isCallCreated=!1,this._isLayout=!1,this._node=e,this._code=t,this._adapter=i,this._transform=this.node.getComponent(o)}var i=e.prototype;return i.internal_visible=function(e,t,i){var s=this;this._view=e,this._model=t,this._oldElement=Object.assign({},t.element),this._model.element.update=this._updateElement.bind(this),this._oldData=this.data,i&&(this.node.active=!0,this._isCallCreated||(this._isCallCreated=!0,this.onCreated()),this.element.fixed&&(this._fixedIndex=this.view.group.models.findIndex((function(e){return e.index==s.model.index}))),this.transform.setContentSize(this.model.size.x,this.model.size.y),this.node.setScale(this.model.scale.x,this.model.scale.y),this._register(),this.onVisible(),this._model.update=this._updateHandler.bind(this))},i._updateElement=function(){this._oldElement.layer!=this.element.layer&&(this.node.parent=this.adapter.scrollManager.getLayerNode(this.element.layer),this._oldElement.layer=this.element.layer),(this._oldElement.wrapAfterMode!=this.element.wrapAfterMode||this._oldElement.wrapBeforeMode!=this.element.wrapBeforeMode||this._oldElement.ignoreLayout!=this.element.ignoreLayout||this.element.ignoreLayout&&this._oldElement.placeholder!=this.element.placeholder)&&(this.adapter.viewManager.internal_updateVisibleView(this.model.index),this._oldElement.wrapAfterMode=this.element.wrapAfterMode,this._oldElement.wrapBeforeMode=this.element.wrapBeforeMode,this._oldElement.ignoreLayout=this.element.ignoreLayout,this._oldElement.placeholder=this.element.placeholder)},i._updateHandler=function(){this._model.update=function(){},this.onVisible(),this._model.update=this._updateHandler.bind(this)},i.internal_disable=function(){this.adapter.scrollManager.internal_disableTouchTarget(this.node),this.onDisable(),this._unregister(),this._model.update=function(){},this._model.element.update=function(){},this._view=null,this._model=null,this._fixedIndex=-1,this._isLayout=!1,this._oldData=null,this.node.active=!1},i.internal_layout=function(){var e={x:this.model.size.x,y:this.model.size.y};this.adapter.layoutManager.isControlMainAxisSize&&(e[this.adapter.mainAxis]=this.model.layoutSize[this.adapter.mainAxis]),this.adapter.layoutManager.isControlCrossAxisSize&&(e[this.adapter.crossAxis]=this.model.layoutSize[this.adapter.crossAxis]),this._isLayout=!0,this.transform.setContentSize(e.x,e.y),this._isLayout=!1,this.node.setPosition(this.model.position.x,this.model.position.y)},i._register=function(){this.node.on(n.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.on(n.EventType.TRANSFORM_CHANGED,this._onScaleChanged,this),this.node.on(n.EventType.ANCHOR_CHANGED,this._onAnchorPointChanged,this),this._adapter.modelManager.on(r.Event.ON_UPDATE,this._updateHandler,this)},i._unregister=function(){this.node.off(n.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.off(n.EventType.TRANSFORM_CHANGED,this._onScaleChanged,this),this.node.off(n.EventType.ANCHOR_CHANGED,this._onAnchorPointChanged,this),this._adapter.modelManager.off(r.Event.ON_UPDATE,this._updateHandler,this)},i._onSizeChanged=function(){if(!this._isLayout){var e=a.approximately(this.model.size[this.adapter.mainAxis],this.transform.contentSize[this.adapter.mainAxis]),t=a.approximately(this.model.size[this.adapter.crossAxis],this.transform.contentSize[this.adapter.crossAxis]);this.model.size.x=this.transform.width,this.model.size.y=this.transform.height,e&&t||this.view.internal_holderChanged(e)}},i._onScaleChanged=function(e){if(e==n.TransformBit.SCALE&&(this.adapter.layoutManager.controlScaleWidth||this.adapter.layoutManager.controlScaleHeight)){var t=a.approximately(this.model.scale[this.adapter.mainAxis],this.node.scale[this.adapter.mainAxis]),i=a.approximately(this.model.scale[this.adapter.crossAxis],this.node.scale[this.adapter.crossAxis]);this.model.scale.x=this.node.scale.x,this.model.scale.y=this.node.scale.y,t&&i||this.view.internal_holderChanged(t)}},i._onAnchorPointChanged=function(){var e=a.approximately(this.model.anchorPoint[this.adapter.mainAxis],this.transform.anchorPoint[this.adapter.mainAxis]),t=a.approximately(this.model.anchorPoint[this.adapter.crossAxis],this.transform.anchorPoint[this.adapter.crossAxis]);this.model.anchorPoint.x=this.transform.anchorPoint.x,this.model.anchorPoint.y=this.transform.anchorPoint.y,e&&t||this.view.internal_holderChanged(e)},t(e,[{key:"node",get:function(){return this._node}},{key:"transform",get:function(){return this._transform}},{key:"code",get:function(){return this._code}},{key:"adapter",get:function(){return this._adapter}},{key:"model",get:function(){return this._model}},{key:"view",get:function(){return this._view}},{key:"data",get:function(){return this._model&&this._model.data}},{key:"fixedIndex",get:function(){return this._fixedIndex}},{key:"oldData",get:function(){return this._oldData}},{key:"element",get:function(){return this._model&&this._model.element}},{key:"index",get:function(){return this._model&&this._model.index}}]),e}())||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/Indicator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScrollAdapter.ts","./enum.ts","./PageViewManager.ts"],(function(e){"use strict";var t,i,n,a,r,o,l,s,c,p,u,h,d,g,f,_,y,m,v,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){o=e.cclegacy,l=e._decorator,s=e.SpriteFrame,c=e.Color,p=e.Node,u=e.Sprite,h=e.UITransform,d=e.Button,g=e.EventHandler,f=e.Layout,_=e.Component,y=e.Size},function(e){m=e.ScrollAdapter},function(e){v=e.IndicatorMode},function(e){C=e.PageViewManager}],execute:function(){var S,w,M,b,z,I,E,L,P,T,A;o._RF.push({},"39a65BHli1DW4GsARI0mFR5","Indicator",void 0);var N=l.ccclass,R=l.property;e("Indicator",(S=N("Indicator"),w=R(m),M=R({type:s}),b=R({type:v}),S((E=t((I=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,n(t,"adapter",E,a(t)),n(t,"spriteFrame",L,a(t)),n(t,"indicatorMode",P,a(t)),n(t,"cellSize",T,a(t)),n(t,"spacing",A,a(t)),t._indicators=[],t._layout=null,t._color=new c,t}i(t,e);var o=t.prototype;return o.__preload=function(){this.adapter&&(this.adapter.pageViewManager.on(C.Event.ON_PAGE_LENGTH_CHANGED,this._onPageLengthChanged,this),this.adapter.pageViewManager.on(C.Event.ON_SCROLL_PAGE_END,this._onScrollPageEnd,this))},o._onScrollPageEnd=function(){this.changedState()},o._onPageLengthChanged=function(){if(this.adapter){var e=this._indicators,t=this.adapter.viewManager.groupLength;if(t!==e.length){var i=0;if(t>e.length)for(i=0;i<t;++i)e[i]||(e[i]=this._createIndicator(i));else for(i=e.length-t;i>0;--i){var n=e[i-1];this.node.removeChild(n.node),e.splice(i-1,1)}this.layout&&this.layout.enabledInHierarchy&&this.layout.updateLayout(),this.changedState()}}},o._createIndicator=function(e){var t=new p;t.layer=this.node.layer;var i=t.addComponent(u);i.spriteFrame=this.spriteFrame,i.sizeMode=u.SizeMode.CUSTOM,t.parent=this.node;var n=t.getComponent(h);if(n.setContentSize(this.cellSize),this.indicatorMode==v.Button){var a=t.getComponent(d)||t.addComponent(d),r=new g;r.component="Indicator",r.handler="_click",r.target=this.node,r.customEventData=e,a.clickEvents.push(r)}return n},o._click=function(e,t){this.adapter.pageViewManager.scrollToPage(this.adapter.pageViewManager.pageTurningSpeed,t)},o.changedState=function(){var e=this._indicators;if(0!==e.length&&this.adapter){var t=this.adapter.pageViewManager.currentIndex;if(!(t>=e.length)){for(var i=0;i<e.length;++i){var n=e[i].getComponent(u);this._color.set(n.color),this._color.a=127.5,n.color=this._color}if(e[t]){var a=e[t].getComponent(u);this._color.set(a.color),this._color.a=255,a.color=this._color}}}},r(t,[{key:"layout",get:function(){return null==this._layout&&(this._layout=this.getComponent(f)||this.addComponent(f),this.adapter.isHorizontal?(this._layout.type=f.Type.HORIZONTAL,this._layout.spacingX=this.spacing):(this._layout.type=f.Type.VERTICAL,this._layout.spacingY=this.spacing),this._layout.resizeMode=f.ResizeMode.CONTAINER),this._layout}}]),t}(_)).prototype,"adapter",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(I.prototype,"spriteFrame",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(I.prototype,"indicatorMode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Normal}}),T=t(I.prototype,"cellSize",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(10,10)}}),A=t(I.prototype,"spacing",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),z=I))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/interface.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"3d52dVTlbBOz7Wijt15IBJI","interface",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseMove.ts"],(function(o){"use strict";var e,i,t,s,n,h,a,c,d,r;return{setters:[function(o){e=o.inheritsLoose,i=o.createClass},function(o){t=o.cclegacy,s=o._decorator,n=o.UITransform,h=o.Rect,a=o.Sprite,c=o.Color,d=o.Component},function(o){r=o.BaseMove}],execute:function(){var u;t._RF.push({},"98566RAMpVLRrpL8AvAC2yB","item",void 0);var l=s.ccclass;s.property,o("TestItem",l("TestItem")(u=function(o){function t(){for(var e,i=arguments.length,t=new Array(i),s=0;s<i;s++)t[s]=arguments[s];return(e=o.call.apply(o,[this].concat(t))||this).edges=new h(0,0,1e3,1e3),e.bounds=new h(0,0,1e3,1e3),e._ignoreList=[],e._ui=void 0,e._baseMove=void 0,e}e(t,o);var s=t.prototype;return s.start=function(){this._ui=this.node.getComponent(n),this.baseMove.speed=100+100*Math.random(),this.baseMove.dir=360*Math.random(),this.baseMove.nowVelocity.set(Math.sin(2*this.baseMove.dir*Math.PI/360),Math.cos(2*this.baseMove.dir*Math.PI/360),0),this.baseMove.nowVelocity.multiplyScalar(this.baseMove.speed),this.bounds=new h(this.node.position.x-this._ui.anchorX*this._ui.width,this.node.position.y-this._ui.anchorY*this._ui.height,this._ui.width,this._ui.height)},s.move=function(o){this.baseMove.move(o),this.checkEdges()},s.checkEdges=function(){(this.node.position.x<this.edges.xMin||this.node.position.x>this.edges.xMax)&&(this.baseMove.nowVelocity.x=-this.baseMove.nowVelocity.x),(this.node.position.y<this.edges.yMin||this.node.position.y>this.edges.yMax)&&(this.baseMove.nowVelocity.y=-this.baseMove.nowVelocity.y)},s.checkCollision=function(o){var e=this;this.bounds=new h(this.node.position.x-this.ui.anchorX*this.ui.width,this.node.position.y-this.ui.anchorY*this.ui.height,this.ui.width,this.ui.height),o.retrieveNode(this.node).forEach((function(o){if(o.node.uuid!=e.node.uuid)if(e.bounds.x>o.x||e.bounds.x+e.bounds.width<o.x||e.bounds.y>o.y||e.bounds.y+e.bounds.height<o.y)e.node.getComponent(a).color=c.WHITE,o.node.getComponent(a).color=c.WHITE;else{var i=o.node.getComponent(t);e.onCollisionEnter(i,e),i.onCollisionEnter(e,i),console.log("碰撞")}}))},s.onCollisionEnter=function(o,e){var i=(Math.abs(e.baseMove.nowVelocity.x)+Math.abs(o.baseMove.nowVelocity.x))/2,t=(Math.abs(e.baseMove.nowVelocity.y)+Math.abs(o.baseMove.nowVelocity.y))/2;(e.baseMove.nowVelocity.x<0&&e.node.position.x>o.node.position.x||e.baseMove.nowVelocity.x>0&&e.node.position.x<o.node.position.x)&&(i=-i),(e.baseMove.nowVelocity.y<0&&e.node.position.y>o.node.position.y||e.baseMove.nowVelocity.y>0&&e.node.position.y<o.node.position.y)&&(t=-t),e.baseMove.nowVelocity.set(i,t,0),e.node.getComponent(a).color=c.RED},i(t,[{key:"ui",get:function(){return this._ui||(this._ui=this.node.getComponent(n)),this._ui}},{key:"baseMove",get:function(){return this._baseMove||(this._baseMove=this.node.getComponent(r)),this._baseMove}}]),t}(d))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/item2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,o,i,r,s,a,h,d,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Node,h=e.RichText,d=e.UITransform,l=e.Component}],execute:function(){var c,u,g,p,m,f,y,C,M,b,_;r._RF.push({},"2dc93YaJpNOr5qIntjT3KB4","item",void 0);var v=s.ccclass,w=s.property;e("ChatItemView",(c=v("ChatItemView"),u=w(a),g=w(a),p=w(a),m=w(a),c((C=t((y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,o(t,"nodeName",C,i(t)),o(t,"nodeMsg",M,i(t)),o(t,"nodeIcon",b,i(t)),o(t,"nodeBg",_,i(t)),t._holder=null,t}n(t,e);var r=t.prototype;return r.onEnable=function(){this.nodeMsg.on(a.EventType.SIZE_CHANGED,this.onMessageSizeChanged,this)},r.onDisable=function(){this.nodeMsg.off(a.EventType.SIZE_CHANGED,this.onMessageSizeChanged,this)},r.show=function(e){this._holder=e,2==this._holder.data.type||(this.nodeMsg.getComponent(h).maxWidth=0,this.nodeName.setStr(this._holder.data.name)),this.nodeMsg.setStr(this._holder.data.msg)},r.hide=function(){this.nodeName.setStr(""),this.nodeMsg.setStr("")},r.onMessageSizeChanged=function(){var e=this;if(this._holder&&this.node.active&&2!=this._holder.data.type){var t=this._holder.adapter.crossAxisSize-200;this.nodeMsg.getComponent(d).width>t?this.nodeMsg.getComponent(h).maxWidth=t:this.scheduleOnce((function(){e.nodeBg.getComponent(d).width=e.nodeMsg.getComponent(d).width+20,e.nodeBg.getComponent(d).height=e.nodeMsg.getComponent(d).height+20,e._holder.transform.height=Math.max(e.nodeBg.getComponent(d).height,120)}))}},t}(l)).prototype,"nodeName",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(y.prototype,"nodeMsg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(y.prototype,"nodeIcon",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(y.prototype,"nodeBg",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,n,e,o,r,s,a,c,u,h,l,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.input,u=t.Input,h=t.UITransform,l=t.Vec3,p=t.Component}],execute:function(){var y,v,f,T,d,g,C,E,D,b,m;r._RF.push({},"69083fUaChAwY0BY0dL7eJL","Joystick",void 0);var w=s.ccclass,I=s.property;t("Joystick",(y=w("Joystick"),v=I(a),f=I(a),y((g=i((d=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,e(i,"round",g,o(i)),e(i,"inner",C,o(i)),e(i,"isStatic",E,o(i)),e(i,"isDiretion",D,o(i)),e(i,"maxRadius",b,o(i)),e(i,"activeRange",m,o(i)),i.joystickCB=null,i.touchID=-1,i}n(i,t);var r=i.prototype;return r.onLoad=function(){this.show(this.isStatic),this.isStatic?(this.round.on(a.EventType.TOUCH_START,this.touchStart,this),this.round.on(a.EventType.TOUCH_MOVE,this.touchMove,this),this.round.on(a.EventType.TOUCH_END,this.touchEnd,this),this.round.on(a.EventType.TOUCH_CANCEL,this.touchEnd,this)):(c.on(u.EventType.TOUCH_START,this.touchStart,this),c.on(u.EventType.TOUCH_MOVE,this.touchMove,this),c.on(u.EventType.TOUCH_CANCEL,this.touchEnd,this),c.on(u.EventType.TOUCH_END,this.touchEnd,this))},r.init=function(t){this.joystickCB=t},r.show=function(t){this.round.active=t},r.innerPosition=function(t){var i={type:null,active:!0,angle:0,ratio:0},n=this.round.getComponent(h).convertToNodeSpaceAR(new l(t.x,t.y));return n.z=0,n.length()<=this.maxRadius*this.activeRange?(this.inner.position=new l,i.active=!1,i):((n.length()>this.maxRadius||this.isDiretion)&&(n=(n=n.normalize()).multiplyScalar(this.maxRadius)),this.inner.position=new l(n),i.active=!0,i.angle=Math.atan2(n.y,n.x),i.ratio=n.length()/this.maxRadius,i)},r.touchStart=function(t){if(-1==this.touchID&&(this.touchID=t.getID(),!this.isStatic)){this.show(!0);var i=t.getUILocation();this.node.setWorldPosition(new l(i.x,i.y,0))}if(this.touchID!=t.getID())return!1;var n=this.innerPosition(t.getUILocation());return n.type=u.EventType.TOUCH_START,this.joystickCB&&this.joystickCB(n),!0},r.touchMove=function(t){if(this.touchID!=t.getID())return!1;var i=this.innerPosition(t.getUILocation());return i.type=u.EventType.TOUCH_MOVE,this.joystickCB&&this.joystickCB(i),!0},r.touchEnd=function(t){if(this.touchID!=t.getID())return!1;this.touchID=-1,this.show(this.isStatic),this.inner.position=new l;var i={type:u.EventType.TOUCH_END,active:!1,angle:0,ratio:0};return this.joystickCB&&this.joystickCB(i),!0},i}(p)).prototype,"round",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(d.prototype,"inner",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(d.prototype,"isStatic",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=i(d.prototype,"isDiretion",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=i(d.prototype,"maxRadius",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 128}}),m=i(d.prototype,"activeRange",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),T=d))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/Layered.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerLink.ts"],(function(e){"use strict";var t,n,i,r,o,a,s,l,c,d;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,r=e.Node,o=e.UIRenderer,a=e.js,s=e.Mask,l=e.CCObject,c=e.Component},function(e){d=e.LayerLink}],execute:function(){var h;e("LayerEvent",void 0),n._RF.push({},"11f3eyoE0ZA+aQ/7C07kA4t","Layered",void 0);var u,y=i.ccclass;i.property,e("LOCK","Layer:Lock"),e("ACTIVE","Layer:Active"),e("LOCAL_POSITION","Layer:Local_position"),e("CACHE_POSITION","Layer:Cache_position");!function(e){e.Position="Layer:Position",e.Scale="Layer:Scale",e.Active="Layer:Active",e.AddChild="Layer:AddChild",e.RemChild="Layer:RemChild",e.Destroy="Layer:Destroy"}(u||(u=e("LayerEvent",{})));e("Layered",y("Layered")(h=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._container=void 0,t._link=void 0,t._layerMap=new Map,t}t(n,e);var i=n.prototype;return i.__preload=function(){this.verifyLayer(this.node,!1)?(this._container=new r(this.node.name+"_layer"),this._container.parent=this.node.parent,this._container.setSiblingIndex(this.node.getSiblingIndex())):this._container=this.node,this._link=this.node.addComponent(d),this._link.create(this,null).initLayer()},i.start=function(){this._link&&(console.log("开始发送消息",this._link.node.name,this._link.node.worldPosition),this._link.node.emit(u.Position,this._link.node.worldPosition))},i.isSkip=function(e){return!!this.isFilterRender(e.getComponent(o))},i.verifyLayer=function(e,t){void 0===t&&(t=!0);var n=this._getRenders(e);if(!n)return null;var i=a.getClassName(n);if(t&&!this._layerMap.has(i)){var o=new r(i);o.parent=this._container,this._layerMap.set(i,o)}return i},i._getRenders=function(e){var t=e.getComponent(o);return this.isFilterRender(t)?null:t},i.getLayer=function(e){return this._layerMap.has(e)?this._layerMap.get(e):null},i.getDescriptor=function(e,t){var n,i=e;do{if(n=Object.getOwnPropertyDescriptor(i,t),i=Object.getPrototypeOf(i),n)return n.get||n.set?n:null}while(i);return null},i.isFilterRender=function(e){return e instanceof s},i.isFilterNode=function(e){return e.hideFlags==l.Flags.DontSave+l.Flags.HideInHierarchy},n}(c))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/LayeredLink.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerLayout.ts","./LayerWidget.ts","./Layered.ts"],(function(t){"use strict";var i,e,n,o,s,a,r,h,d,l,_,c,y,u,p;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy,n=t._decorator,o=t.Vec3,s=t.Widget,a=t.Layout,r=t.UIRenderer,h=t.js,d=t.Node},function(t){l=t.LayerLayout},function(t){_=t.LayerWidget},function(t){c=t.LayerEvent,y=t.LOCAL_POSITION,u=t.ACTIVE,p=t.LOCK}],execute:function(){var g;e._RF.push({},"484b7d/+VlJoJGEyDbayjtA","LayeredLink",void 0);var v=n.ccclass,f=(n.property,new o);t("LayeredLink",v("LayeredLink")(g=function(){function t(i,e,n,s){this._node=void 0,this._parent=void 0,this._parentLink=void 0,this._children=void 0,this._layerName=void 0,this._layerRoot=void 0,this._layered=void 0,this._layout=void 0,this._widget=void 0,this._localPosition=new o,this._cachePosition=new o,this._layered=i,this._parent=n,this._node=e,this._parentLink=s,this.node[p]=!1,this.node[u]=this.node.active,this._layerName=i.verifyLayer(e),this._children=[],this._defineProperty(),this._verifyWidget(),this._verifyLayout();for(var a=0;a<this.node.children.length;a++){var r=this.node.children[a],h=new t(this._layered,r,this.node,this);this._children.push(h)}}var e=t.prototype;return e.isSameLayerAsParent=function(){return this._parentLink&&this._parentLink.layerName==this.layerName},e.initLayer=function(){var t,i=this._layered.getLayer(this._layerName);i?this._parentLink&&this._parentLink._layerRoot==this._layerName?this._layerRoot=this._parentLink._layerRoot:(this._layerRoot=this._layerName,this.node.parent=i):this._layerRoot=null==(t=this._parentLink)?void 0:t._layerRoot;for(var e=0;e<this._children.length;e++){var n=this._children[e];n.initLayer(),this.node.emit(c.AddChild,n.node)}this.node.getPosition(this._localPosition),this._cachePosition.set(this._localPosition),this.node[y]=this._localPosition,this._registerEvent()},e._verifyWidget=function(){if(!this.isSameLayerAsParent()){var t=this.node.getComponent(s);if(t){t.destroy();var i=this.node.addComponent(_);i.left=t.left,i.right=t.right,i.top=t.top,i.bottom=t.bottom,i.isAbsoluteLeft=t.isAbsoluteLeft,i.isAbsoluteRight=t.isAbsoluteRight,i.isAbsoluteTop=t.isAbsoluteTop,i.isAbsoluteBottom=t.isAbsoluteBottom,i.isAbsoluteHorizontalCenter=t.isAbsoluteHorizontalCenter,i.isAbsoluteVerticalCenter=t.isAbsoluteVerticalCenter,i.alignFlags=t.alignFlags,i.alignMode=t.alignMode,t.target?i.target=t.target:i.target=this._parent?this._parent:this.node.parent,i.updateAlignment()}}},e._verifyLayout=function(){var t=this.node.getComponent(a);t&&(t.destroy(),this._layout=this.node.addComponent(l),this._layout.type=t.type,this._layout.alignHorizontal=t.alignHorizontal,this._layout.alignVertical=t.alignVertical,this._layout.resizeMode=t.resizeMode,this._layout.cellSize=t.cellSize,this._layout.startAxis=t.startAxis,this._layout.spacingX=t.spacingX,this._layout.spacingY=t.spacingY,this._layout.verticalDirection=t.verticalDirection,this._layout.horizontalDirection=t.horizontalDirection,this._layout.constraint=t.constraint,this._layout.constraintNum=t.constraintNum,this._layout.affectedByScale=t.affectedByScale,this._layout.padding=t.padding,this._layout.paddingTop=t.paddingTop,this._layout.paddingBottom=t.paddingBottom,this._layout.paddingLeft=t.paddingLeft,this._layout.paddingRight=t.paddingRight)},e._defineProperty=function(){var t=this,i=this._layered.getDescriptor(this.node,"active");Object.defineProperty(this.node,"active",{get:i.get&&i.get.bind(this.node),set:function(e){e&&t._parent&&!t._parent.active?t.node[u]=e:i.set&&i.set.call(t.node,e)}});var e=this.node.setParent.bind(this.node);this.node.setParent=function(i,n){if(void 0===n&&(n=!1),i){var o=i.getComponent(r);if(o){var s=h.getClassName(o);if(t._layerName!=h.getClassName(o))return void console.warn("["+t._layerName+"/"+t.node.name+"] 无法设置到 ["+s+"] 层级")}}e.call(t.node,i,n)}},e._registerEvent=function(){this.node.on(d.EventType.NODE_DESTROYED,this._onDestroy,this),this.node.on(d.EventType.TRANSFORM_CHANGED,this._onTransformChanged,this),this.node.on(d.EventType.CHILD_ADDED,this._onChildAdded,this),this.node.on(d.EventType.CHILD_REMOVED,this._onChildRemoved,this),this.node.on(d.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this._onActiveChanged,this),this._parent&&(this._parent.on(c.Position,this._onParentPosition,this),this._parent.on(c.Scale,this._onParentScale,this),this._parent.on(c.Active,this._onParentActiveChanged,this))},e._onActiveChanged=function(){this.node[p]||(this.node[u]=this.node.active),this.node.emit(c.Active)},e._onChildAdded=function(i){var e=new t(this._layered,i,this.node,this);this._children.push(e),e.initLayer(),this.node.emit(c.AddChild,e.node)},e._onChildRemoved=function(t){var i=this._children.findIndex((function(i){return i.node==t}));-1!=i&&(this._children.splice(i,1),this.node.emit(c.RemChild,t))},e._onDestroy=function(){console.log(this.node.name,"我删除了"),this.node.emit(c.Destroy)},e._onTransformChanged=function(t){t==d.TransformBit.POSITION&&(this.node[p]||(o.subtract(f,this.node.position,this._cachePosition),this._localPosition.add(f),this.node[y]=this._localPosition),this._cachePosition=this.node.position,this.node.emit(c.Position,this.node.worldPosition))},e._onParentPosition=function(t){this.node.parent!=this._parent?(this.node[p]=!0,this.node.inverseTransformPoint(f,t),f.add(this._localPosition),this.node.translate(f),this.node[p]=!1):this.node.emit(c.Position,this.node.worldPosition)},e._onParentScale=function(){},e._onParentActiveChanged=function(){this.node[u]&&(this.isSameLayerAsParent()?this.node.emit(c.Active):(this.node[p]=!0,this.node.active=this._parent.activeInHierarchy,this.node[p]=!1))},i(t,[{key:"node",get:function(){return this._node}},{key:"children",get:function(){return this._children}},{key:"layerName",get:function(){return this._layerName}}]),t}())||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/LayerLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Layered.ts"],(function(t){"use strict";var i,e,n,s,o,h,a,r;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,s=t.Vec3,o=t.Node,h=t.Layout,a=t.UITransform},function(t){r=t.LayerEvent}],execute:function(){var _;e._RF.push({},"037eeWDOa1C56SiqkkozzP0","LayerLayout",void 0);var d=n.ccclass,l=(n.property,new s,new s),c=new s;t("LayerLayout",d("LayerLayout")(_=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this)._children=[],i}i(e,t);var n=e.prototype;return n.__preload=function(){this.node.on(r.AddChild,this._onAddChild,this),this.node.on(r.RemChild,this._onRemChild,this)},n._onAddChild=function(t){t.on(o.EventType.SIZE_CHANGED,this._doLayoutDirty,this),t.on(o.EventType.TRANSFORM_CHANGED,this._transformDirty,this),t.on(o.EventType.ANCHOR_CHANGED,this._doLayoutDirty,this),t.on(o.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this._childrenChanged,this),this._children.push(t)},n._onRemChild=function(t){t.off(o.EventType.SIZE_CHANGED,this._doLayoutDirty,this),t.off(o.EventType.TRANSFORM_CHANGED,this._transformDirty,this),t.off(o.EventType.ANCHOR_CHANGED,this._doLayoutDirty,this),t.off(o.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this._childrenChanged,this);var i=this._children.findIndex((function(i){return i==t}));-1!=i&&this._children.splice(i,1)},n._addChildrenEventListeners=function(){},n._removeChildrenEventListeners=function(){},n._childAdded=function(t){},n._childRemoved=function(t){},n.updateLayout=function(t){void 0===t&&(t=!1),(this._layoutDirty||t)&&this._children.length>0&&(this._doLayout(),this._layoutDirty=!1)},n._transform=function(t){var i=this._getParentTr(t.parent);return i&&i.inverseTransformPoint(c,this.node.worldPosition),c},n._checkUsefulObj=function(){this._usefulLayoutObj.length=0;for(var t=this._children,i=0;i<t.length;++i){var e=t[i],n=e._uiProps.uiTransformComp;e.activeInHierarchy&&n&&this._usefulLayoutObj.push(n)}},n._doLayoutHorizontally=function(t,i,e,n){var s=this.node._uiProps.uiTransformComp.anchorPoint,o=this._getFixedBreakingNum(),a=1,r=this._paddingLeft;this._horizontalDirection===h.HorizontalDirection.RIGHT_TO_LEFT&&(a=-1,r=this._paddingRight);var _=(this._horizontalDirection-s.x)*t+a*r,d=_-a*this._spacingX,l=0,c=0,u=0,y=0,f=!1,p=this._usefulLayoutObj.length,g=this._cellSize.width,v=this._getPaddingH();this._layoutType!==h.Type.GRID&&this._resizeMode===h.ResizeMode.CHILDREN&&(g=(t-v-(p-1)*this._spacingX)/p);for(var T=this._usefulLayoutObj,L=0;L<T.length;++L){var D=T[L],C=D.node,R=C.scale,m=this._getUsedScaleValue(R.x),E=this._getUsedScaleValue(R.y);this._resizeMode===h.ResizeMode.CHILDREN&&(D.width=g/m,this._layoutType===h.Type.GRID&&(D.height=this._cellSize.height/E));var H=Math.abs(this._horizontalDirection-D.anchorX),M=D.width*m,z=D.height*E;z>u&&(y=Math.max(u,y),c=u||z,u=z),d+=a*(H*M+this._spacingX);var A=a*(1-H)*M;if(i){if(o>0)(f=L/o>0&&L%o==0)&&(c=u>z?u:c);else if(M>t-v)d>_+a*(H*M)&&(f=!0);else{var N=(1-this._horizontalDirection-s.x)*t,I=d+A+a*(a>0?this._paddingRight:this._paddingLeft);f=Math.abs(I)>Math.abs(N)}f&&(d=_+a*(H*M),z!==u&&(c=u),l+=c+this._spacingY,c=u=z)}var P=e(C,D,l);n&&C.setPosition(d+this._transform(C).x,P),d+=A}return c=Math.max(c,u),Math.max(y,l+c)+this._getPaddingV()},n._doLayoutVertically=function(t,i,e,n){var s=this.node._uiProps.uiTransformComp.anchorPoint,o=this._getFixedBreakingNum(),a=1,r=this._paddingBottom;this._verticalDirection===h.VerticalDirection.TOP_TO_BOTTOM&&(a=-1,r=this._paddingTop);var _=(this._verticalDirection-s.y)*t+a*r,d=_-a*this._spacingY,c=0,u=0,y=0,f=0,p=!1,g=this._usefulLayoutObj.length,v=this._cellSize.height,T=this._getPaddingV();this._layoutType!==h.Type.GRID&&this._resizeMode===h.ResizeMode.CHILDREN&&(v=(t-T-(g-1)*this._spacingY)/g);for(var L=this._usefulLayoutObj,D=0;D<L.length;++D){var C=L[D],R=C.node,m=R.scale,E=this._getUsedScaleValue(m.x),H=this._getUsedScaleValue(m.y);this._resizeMode===h.ResizeMode.CHILDREN&&(C.height=v/H,this._layoutType===h.Type.GRID&&(C.width=this._cellSize.width/E));var M=Math.abs(this._verticalDirection-C.anchorY),z=C.width*E,A=C.height*H;z>c&&(u=Math.max(c,u),y=c||z,c=z),d+=a*(M*A+this._spacingY);var N=a*(1-M)*A;if(i){if(o>0)(p=D/o>0&&D%o==0)&&(y=c>A?c:y);else if(A>t-T)d>_+a*(M*A)&&(p=!0);else{var I=(1-this._verticalDirection-s.y)*t,P=d+N+a*(a>0?this._paddingTop:this._paddingBottom);p=Math.abs(P)>Math.abs(I)}p&&(d=_+a*(M*A),z!==c&&(y=c),f+=y+this._spacingX,y=c=z)}var O=e(R,C,f);n&&(R.getPosition(l),R.setPosition(O,d+this._transform(R).y,l.z)),d+=N}return y=Math.max(y,c),Math.max(u,f+y)+this._getPaddingH()},n._getParentTr=function(t){return t?t.getComponent(a)?t:this._getParentTr(t.parent):null},e}(h))||_);e._RF.pop()}}}));

System.register("chunks:///_virtual/LayerLink.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerLayout.ts","./LayerWidget.ts","./Helper.ts","./Layered.ts"],(function(t){"use strict";var e,i,n,o,a,r,s,h,d,l,c,_,y,u,g,p,f,v,m;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,o=t._decorator,a=t.Vec3,r=t.isValid,s=t.Widget,h=t.Layout,d=t.UIRenderer,l=t.js,c=t.Node,_=t.Component},function(t){y=t.LayerLayout},function(t){u=t.LayerWidget},function(t){g=t.Helper},function(t){p=t.LOCK,f=t.ACTIVE,v=t.LOCAL_POSITION,m=t.LayerEvent}],execute:function(){var A;n._RF.push({},"981ferE+g1ABKUIg/FmAt4j","LayerLink",void 0);var L=o.ccclass,C=(o.property,new a),P=new a;t("LayerLink",L("LayerLink")(A=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._parent=void 0,e._parentLink=void 0,e._children=[],e._layerName=void 0,e._layerRoot=void 0,e._layered=void 0,e._layout=void 0,e}e(n,t);var o=n.prototype;return o.__preload=function(){this._parent=this.node.parent,this.node[p]=!1,this.node[f]=this.node.active,this.node[v]=new a(this.node.position),console.log(this.node.name,"本地坐标",this.node[v].x)},o.onDestroy=function(){for(var t=0;t<this._children.length;t++){var e=this._children[t];r(e.node,!0)&&e.node.destroy()}},o.create=function(t,e){this._layered=t,this._parentLink=e,this._layerName=t.verifyLayer(this.node),this._defineProperty(),this._verifyLayout();for(var i=0;i<this.node.children.length;i++){var o=this.node.children[i];if(!this._layered.isSkip(o)){var a=o.addComponent(n);a.create(this._layered,this),this._children.push(a)}}return this},o.isSameLayerAsParent=function(){return this._parentLink&&this._parentLink.layerName==this.layerName},o.initLayer=function(){var t,e=this._layered.getLayer(this._layerName);e?this._parentLink&&this._parentLink._layerRoot==this._layerName?this._layerRoot=this._parentLink._layerRoot:(this._layerRoot=this._layerName,this.node.parent=e):this._layerRoot=null==(t=this._parentLink)?void 0:t._layerRoot;for(var i=0;i<this._children.length;i++){var n=this._children[i];n.initLayer(),this.node.emit(m.AddChild,n.node)}this._verifyWidget(),this._registerEvent()},o._verifyWidget=function(){if(!this.isSameLayerAsParent())if(this.node.getComponent(u))this.node.getComponent(u).updateAlignment();else{var t=this.node.getComponent(s);if(t){t.destroy();var e=this.node.addComponent(u);e.isAlignTop=t.isAlignTop,e.isAlignBottom=t.isAlignBottom,e.isAlignLeft=t.isAlignLeft,e.isAlignRight=t.isAlignRight,e.isAlignVerticalCenter=t.isAlignVerticalCenter,e.isAlignHorizontalCenter=t.isAlignHorizontalCenter,e.horizontalCenter=t.horizontalCenter,e.verticalCenter=t.verticalCenter,e.left=t.left,e.right=t.right,e.top=t.top,e.bottom=t.bottom,e.isAbsoluteLeft=t.isAbsoluteLeft,e.isAbsoluteRight=t.isAbsoluteRight,e.isAbsoluteTop=t.isAbsoluteTop,e.isAbsoluteBottom=t.isAbsoluteBottom,e.isAbsoluteHorizontalCenter=t.isAbsoluteHorizontalCenter,e.isAbsoluteVerticalCenter=t.isAbsoluteVerticalCenter,e.alignFlags=t.alignFlags,e.alignMode=t.alignMode,t.target?e.target=t.target:e.target=this._parent?this._parent:this.node.parent}}},o._verifyLayout=function(){var t=this.node.getComponent(h);t&&(t.destroy(),this._layout=this.node.addComponent(y),this._layout.type=t.type,this._layout.alignHorizontal=t.alignHorizontal,this._layout.alignVertical=t.alignVertical,this._layout.resizeMode=t.resizeMode,this._layout.cellSize=t.cellSize,this._layout.startAxis=t.startAxis,this._layout.spacingX=t.spacingX,this._layout.spacingY=t.spacingY,this._layout.verticalDirection=t.verticalDirection,this._layout.horizontalDirection=t.horizontalDirection,this._layout.constraint=t.constraint,this._layout.constraintNum=t.constraintNum,this._layout.affectedByScale=t.affectedByScale,this._layout.padding=t.padding,this._layout.paddingTop=t.paddingTop,this._layout.paddingBottom=t.paddingBottom,this._layout.paddingLeft=t.paddingLeft,this._layout.paddingRight=t.paddingRight)},o._defineProperty=function(){var t=this;try{var e=this._layered.getDescriptor(this.node,"active");Object.defineProperty(this.node,"active",{get:e.get&&e.get.bind(this.node),set:function(i){i&&t._parent&&!t._parent.active?t.node[f]=i:e.set&&e.set.call(t.node,i)}})}catch(t){console.error(t)}var i=this.node.setParent.bind(this.node);this.node.setParent=function(e,n){if(void 0===n&&(n=!1),e){var o=e.getComponent(d);if(o){var a=l.getClassName(o);if(t._layerName!=l.getClassName(o))return void console.warn("["+t._layerName+"/"+t.node.name+"] 无法设置到 ["+a+"] 层级")}}i.call(t.node,e,n)}},o._registerEvent=function(){this.node.on(c.EventType.TRANSFORM_CHANGED,this._onTransformChanged,this),this.node.on(c.EventType.CHILD_ADDED,this._onChildAdded,this),this.node.on(c.EventType.CHILD_REMOVED,this._onChildRemoved,this),this.node.on(c.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this._onActiveChanged,this);var t=this._getParent();t&&(t.on(m.Position,this._onParentPosition,this),t.on(m.Scale,this._onParentScale,this),t.on(m.Active,this._onParentActiveChanged,this))},o._onActiveChanged=function(){this.node[p]||(this.node[f]=this.node.active),this.node.emit(m.Active)},o._onChildAdded=function(t){if(!this._layered.isFilterNode(t)){var e=t.getComponent(n);e||((e=t.addComponent(n)).create(this._layered,this).initLayer(),this._children.push(e),this.node.emit(m.AddChild,e.node))}},o._onChildRemoved=function(t){var e=this._children.findIndex((function(e){return e.node==t}));-1!=e&&(this._children.splice(e,1),this.node.emit(m.RemChild,t))},o._onTransformChanged=function(t){if(t==c.TransformBit.POSITION){if(!this.node[p]){var e=this._getParent();e&&(g.worldToLocal(e,C,this.node.worldPosition),this.node[v].set(C.multiplyScalar(-1)))}this.node.emit(m.Position,this.node.worldPosition)}},o._onParentPosition=function(t){var e=this._getParent();this.node.parent!=e?(this.node[p]=!0,g.localToWorld(this.node.parent,P,this.node[v]),g.worldToLocal(e,C,P),this.node.setPosition(C.multiplyScalar(-1)),this.node[p]=!1):this.node.emit(m.Position,this.node.getWorldPosition())},o._onParentScale=function(){},o._onParentActiveChanged=function(){this.node[f]&&(this.isSameLayerAsParent()?this.node.emit(m.Active):(this.node[p]=!0,this.node.active=this._parent.activeInHierarchy,this.node[p]=!1))},o._getParent=function(){return this._parentLink?this._parentLink.node:this._parent},i(n,[{key:"children",get:function(){return this._children}},{key:"layerName",get:function(){return this._layerName}}]),n}(_))||A);n._RF.pop()}}}));

System.register("chunks:///_virtual/LayerWidget.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerWidgetManager.ts"],(function(t){"use strict";var e,i,n,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,r=t.Widget},function(t){s=t.LayerWidgetManager}],execute:function(){var o;t("AlignFlags",void 0),i._RF.push({},"a7752lHIYRHg6Jj5TzmK7BK","LayerWidget",void 0);var a,c=n.ccclass,u=(n.property,n.executeInEditMode);cc;!function(t){t[t.TOP=1]="TOP",t[t.MID=2]="MID",t[t.BOT=4]="BOT",t[t.LEFT=8]="LEFT",t[t.CENTER=16]="CENTER",t[t.RIGHT=32]="RIGHT",t[t.HORIZONTAL=56]="HORIZONTAL",t[t.VERTICAL=7]="VERTICAL"}(a||(a=t("AlignFlags",{})));a.TOP,a.BOT,a.LEFT,a.RIGHT,t("LayerWidget",c("LayerWidget")(o=u(o=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.onEnable=function(){this.node.getPosition(this._lastPos),this._lastSize.set(this.node._uiProps.uiTransformComp.contentSize),s.add(this),this._hadAlignOnce=!1,this._registerEvent(),this._registerTargetEvents()},n.onDisable=function(){s.remove(this),this._unregisterEvent(),this._unregisterTargetEvents()},n._validateTargetInDEV=function(){},n.updateAlignment=function(){s.updateAlignment(this.node)},i}(r))||o)||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/LayerWidgetManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LayerWidget.ts"],(function(e){"use strict";var t,i,n,r,o,a,s,l,g,c,d,h,u,f,v;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,n=e._decorator,r=e.Vec3,o=e.Vec2,a=e.js,s=e.director,l=e.Director,g=e.View,c=e.Node,d=e.Scene,h=e.UITransform,u=e.isValid},function(e){f=e.LayerWidget,v=e.AlignFlags}],execute:function(){i._RF.push({},"f9eceI+lolBGojZ+0NOebBC","LayerWidgetManager",void 0);n.ccclass,n.property;var y=[],p=new r,A=new r,m=new o,b=new o,x=new o(1,1),_=new o,T=new o,C=cc;function R(e){var i=e.getComponent(f);if(i&&i.enabled){if(!u(e,!0))return;y.push(i)}for(var n,r=e.children,o=t(r);!(n=o()).done;){var a=n.value;a.active&&R(a)}}function w(e,t){if(!t._hadAlignOnce){t.alignMode===f.AlignMode.ONCE&&(t._hadAlignOnce=!0);var i,n=t.target,o=b,a=x;n?(i=n,C.internal.computeInverseTransForTarget(e,i,o,a)):i=e.parent;var s=C.internal.getReadonlyNodeSize(i),l=i instanceof d||!i.getComponent(h),g=l?m:i.getComponent(h).anchorPoint,c=l;e.getPosition(A);var u=e._uiProps.uiTransformComp,y=A.x,_=A.y,T=u.anchorPoint,R=e.getScale();if(t.alignFlags&v.HORIZONTAL){var w=0,z=0,P=s.width;c?(w=C.visibleRect.left.x,z=C.visibleRect.right.x):z=(w=-g.x*P)+P,w+=t.isAbsoluteLeft?t.left:t.left*P,z-=t.isAbsoluteRight?t.right:t.right*P,n&&(w+=o.x,w*=a.x,z+=o.x,z*=a.x);var S=0,E=T.x,I=R.x;if(I<0&&(E=1-E,I=-I),t.isStretchWidth)S=z-w,0!==I&&(u.width=S/I),y=w+E*S;else if(S=u.width*I,t.isAlignHorizontalCenter){var M=t.isAbsoluteHorizontalCenter?t.horizontalCenter:t.horizontalCenter*P,N=(.5-g.x)*s.width;n&&(M*=a.x,N+=o.x,N*=a.x),y=N+(E-.5)*S+M}else y=t.isAlignLeft?w+E*S:z+(E-1)*S;t._lastSize.width=S}if(t.alignFlags&v.VERTICAL){var L=0,W=0,F=s.height;c?(W=C.visibleRect.bottom.y,L=C.visibleRect.top.y):L=(W=-g.y*F)+F,W+=t.isAbsoluteBottom?t.bottom:t.bottom*F,L-=t.isAbsoluteTop?t.top:t.top*F,n&&(W+=o.y,W*=a.y,L+=o.y,L*=a.y);var V=0,D=T.y,H=R.y;if(H<0&&(D=1-D,H=-H),t.isStretchHeight)V=L-W,0!==H&&(u.height=V/H),_=W+D*V;else if(V=u.height*H,t.isAlignVerticalCenter){var B=t.isAbsoluteVerticalCenter?t.verticalCenter:t.verticalCenter*F,j=(.5-g.y)*s.height;n&&(B*=a.y,j+=o.y,j*=a.y),_=j+(D-.5)*V+B}else _=t.isAlignBottom?W+D*V:L+(D-1)*V;t._lastSize.height=V}var U=O(e.parent);U&&(U.inverseTransformPoint(p,i.worldPosition),y+=p.x,_+=p.y),e.setPosition(y,_,A.z),r.set(t._lastPos,y,_,A.z)}}function O(e){return e?e.getComponent(h)?e:O(e.parent):null}function z(){var e=s.getScene();if(e){P.isAligning=!0,P._nodesOrderDirty&&(y.length=0,R(e),P._nodesOrderDirty=!1);var t=null,i=P._activeWidgetsIterator;for(i.i=0;i.i<y.length;++i.i)(t=y[i.i])._dirty&&(w(t.node,t),t._dirty=!1);P.isAligning=!1}}var P=e("LayerWidgetManager",function(){function e(){}return e.init=function(){s.on(l.EVENT_AFTER_SCENE_LAUNCH,z),s.on(l.EVENT_AFTER_UPDATE,z),g.instance.on("design-resolution-changed",this.onResized,this);var e=this.onResized.bind(this);g.instance.on("canvas-resize",e),g.instance.setResizeCallback(e)},e.add=function(e){this._nodesOrderDirty=!0},e.remove=function(e){this._activeWidgetsIterator.remove(e)},e.onResized=function(){var e=s.getScene();e&&this.refreshWidgetOnResized(e)},e.updateAlignment=function(e){var t=e.parent;t&&c.isNode(t)&&this.updateAlignment(t);var i=e.getComponent(f);i&&t&&(console.log("开始刷新",e.name,e.parent.name,i.target),w(e,i))},e.refreshWidgetOnResized=function(e){var i=c.isNode(e)&&e.getComponent(f);i&&i.enabled&&(i.alignMode===f.AlignMode.ON_WINDOW_RESIZE||i.alignMode===f.AlignMode.ALWAYS)&&i.setDirty();for(var n,r=e.children,o=t(r);!(n=o()).done;){var a=n.value;this.refreshWidgetOnResized(a)}},e.updateOffsetsToStayPut=function(e,t){function i(e,t){return Math.abs(e-t)>1e-10?t:e}var n=e.node,r=n.parent;if(r){var o=_;o.set(0,0);var a=T;if(a.set(1,1),e.target&&(r=e.target,C.internal.computeInverseTransForTarget(n,r,o,a)),!t)return;var s=r._uiProps&&r._uiProps.uiTransformComp,l=s?s.anchorPoint:m,g=n._uiProps.uiTransformComp,c=C.internal.getReadonlyNodeSize(r),d=g.anchorPoint,h=n.getPosition(),u=v,f=n.getScale(),y=0;if(t&u.LEFT){var p=-l.x*c.width;p+=o.x,p*=a.x,y=h.x-d.x*g.width*Math.abs(f.x)-p,e.isAbsoluteLeft||(y/=c.width),y/=a.x,e.left=i(e.left,y)}if(t&u.RIGHT){var A=(1-l.x)*c.width;A+=o.x,y=(A*=a.x)-(h.x+(1-d.x)*g.width*Math.abs(f.x)),e.isAbsoluteRight||(y/=c.width),y/=a.x,e.right=i(e.right,y)}if(t&u.TOP){var b=(1-l.y)*c.height;b+=o.y,y=(b*=a.y)-(h.y+(1-d.y)*g.height*Math.abs(f.y)),e.isAbsoluteTop||(y/=c.height),y/=a.y,e.top=i(e.top,y)}if(t&u.BOT){var x=-l.y*c.height;x+=o.y,x*=a.y,y=h.y-d.y*g.height*Math.abs(f.y)-x,e.isAbsoluteBottom||(y/=c.height),y/=a.y,e.bottom=i(e.bottom,y)}}},e}());P.isAligning=!1,P._nodesOrderDirty=!1,P._activeWidgetsIterator=new a.array.MutableForwardIterator(y),P.animationState=null,s.on(l.EVENT_INIT,(function(){console.error("初始化了")})),P.init(),i._RF.pop()}}}));

System.register("chunks:///_virtual/LayoutManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./helper2.ts"],(function(t){"use strict";var e,i,r,n,o,a,l,s,h,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,l=t._decorator},function(t){s=t.Manager},function(t){h=t.ChildAlignment,c=t.Orientation},function(t){p=t.Helper}],execute:function(){var g,u,_,f,d,y,z,A,S,m,x,H,O,b,T,v,E,C,L,N,W,M,D,P;a._RF.push({},"d91f5nGeD5IbK7eVk2CJPJh","LayoutManager",void 0);var w,k=l.ccclass,U=l.property;!function(t){t[t.ON_LAYOUT_COMPLATED=0]="ON_LAYOUT_COMPLATED",t[t.ON_CHANGED_LAYOUT_STATE=1]="ON_CHANGED_LAYOUT_STATE"}(w||(w={}));t("LayoutManager",(g=k("LayoutManager"),u=U({type:h}),_=U({type:h,displayName:"字节点队列",tooltip:""}),f=U({displayName:"反转排序",tooltip:""}),d=U({displayName:"延迟布局",tooltip:""}),y=U({group:{id:"0",name:"forceExpand"},displayName:"强制扩展宽度",tooltip:""}),z=U({group:{id:"0",name:"forceExpand"},displayName:"强制扩展高度",tooltip:""}),A=U({group:{id:"0",name:"controlSize"},displayName:"控件宽度",tooltip:""}),S=U({group:{id:"0",name:"controlSize"},displayName:"控件高度",tooltip:""}),m=U({group:{id:"0",name:"controlScale"},displayName:"控件宽度比例",tooltip:""}),x=U({group:{id:"0",name:"controlScale"},displayName:"控件高度比例",tooltip:""}),g(((P=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"_childAlignment",b,n(e)),r(e,"_spacing",T,n(e)),r(e,"_reverseArrangement",v,n(e)),r(e,"delayLayout",E,n(e)),r(e,"_forceExpandWidth",C,n(e)),r(e,"_forceExpandHeight",L,n(e)),r(e,"_controlSizeWidth",N,n(e)),r(e,"_controlSizeHeight",W,n(e)),r(e,"_controlScaleWidth",M,n(e)),r(e,"_controlScaleHeight",D,n(e)),e._isDirty=!1,e._layoutQueue=[],e}i(e,t);var a=e.prototype;return a.onInit=function(){},a.layout=function(t){t&&(this.delayLayout?(this.unLayout(t.index),this._layoutQueue.push(t),this._isDirty=!0):(this._layoutHandler(t),this.emit(w.ON_LAYOUT_COMPLATED,[t.index])))},a.unLayout=function(t){-1!=(t=this._layoutQueue.findIndex((function(e){return e.index==t})))&&this._layoutQueue.splice(t,1)},a._layoutHandler=function(t){this._calcAlongAxis(t,c.Horizontal,this.adapter.isHorizontal),this._setChildrenAlongAxis(t,c.Horizontal,this.adapter.isHorizontal),this._calcAlongAxis(t,c.Vertical,this.adapter.isHorizontal),this._setChildrenAlongAxis(t,c.Vertical,this.adapter.isHorizontal)},a._calcAlongAxis=function(t,e,i){for(var r=e==c.Horizontal?this.horizontal:this.vertical,n=this._getControlSize(e),o=this._getControlScale(e),a=this._getForceExpandSize(e),l=r,s=r,h=0,p=i!=(e==c.Vertical),g=this._getLayoutList(t.models),u=0;u<g.length;u++){var _=g[u],f=this._getChildSizes(_,e,n,a),d=f.min,y=f.preferred,z=f.flexible;if(o){var A=_.scale[this._getAxis(e)];d*=A,y*=A,z*=A}p?(l=Math.max(d+r,l),s=Math.max(y+r,s),h=Math.max(z,h)):(l+=d+this.spacing,s+=y+this.spacing,h+=z)}!p&&g.length>0&&(l-=this.spacing,s-=this.spacing),s=Math.max(l,s),this._setLayoutInputForAxis(t,l,s,h,e)},a._getControlSize=function(t){return t==c.Horizontal?this.controlSizeWidth:this.controlSizeHeight},a._getControlScale=function(t){return t==c.Horizontal?this.controlScaleWidth:this.controlScaleHeight},a._getForceExpandSize=function(t){return t==c.Horizontal?this.forceExpandWidth:this.forceExpandHeight},a._setChildrenAlongAxis=function(t,e,i){var r=t.size[this._getAxis(e)],n=this._getControlSize(e),o=this._getControlScale(e),a=this._getForceExpandSize(e),l=this._getAlignmentOnAxis(e),s=this._getLayoutList(t.models),h=i!=(e==c.Vertical),g=this.reverseArrangement?s.length-1:0,u=this.reverseArrangement?0:s.length,_=this.reverseArrangement?-1:1,f=this._getAxis(e);if(h)for(var d=r-(e==c.Horizontal?this.horizontal:this.vertical),y=g;this.reverseArrangement?y>=u:y<u;y+=_){var z=s[y],A=this._getChildSizes(z,e,n,a),S=A.min,m=A.preferred,x=A.flexible,H=o?z.scale[f]:1,O=p.clamp(d,S,x>0?r:m),b=this._getStartOffset(t,e,O*H);if(n)this._setChildAlongAxisWithScale(t,z,e,b,H,O);else{var T=(O-z.size[f])*l;T*=H,this._setChildAlongAxisWithScale(t,z,e,b+T,H)}}else{var v=e==c.Horizontal?this.left:this.top,E=0,C=r-this._getTotalPreferredSize(t,e);C>0&&(0==this._getTotalFlexibleSize(t,e)?v=this._getStartOffset(t,e,this._getTotalPreferredSize(t,e)-(e==c.Horizontal?this.horizontal:this.vertical)):this._getTotalFlexibleSize(t,e)>0&&(E=C/this._getTotalFlexibleSize(t,e)));var L=0;this._getTotalMinSize(t,e)!=this._getTotalPreferredSize(t,e)&&(L=p.clamp01((r-this._getTotalMinSize(t,e))/(this._getTotalPreferredSize(t,e)-this._getTotalMinSize(t,e))));for(y=g;this.reverseArrangement?y>=u:y<u;y+=_){var N=s[y],W=this._getChildSizes(N,e,n,a),M=(S=W.min,m=W.preferred,x=W.flexible,o?N.scale[f]:1),D=p.lerp(S,m,L);if(D+=x*E,n)this._setChildAlongAxisWithScale(t,N,e,v,M,D);else{T=(D-N.size[f])*l;this._setChildAlongAxisWithScale(t,N,e,v+T,M)}v+=D*M+this.spacing}}},a._setChildAlongAxisWithScale=function(t,e,i,r,n,o){if(null!=e){var a=this._getAxis(i),l=0;isNaN(o)?l=e.size[a]:(e.layoutSize[a]=o,l=o);var s={x:e.position.x,y:e.position.y},h=0;i==c.Horizontal?(h=r+l*e.anchorPoint[a]*n,h-=t.size[a]*t.anchorPoint[a],h+=t.position[a]):(h=-r-l*(1-e.anchorPoint[a])*n,h+=t.size[a]*(1-t.anchorPoint[a]),h+=t.position[a]),s[a]=h,e.position=s}},a._getStartOffset=function(t,e,i){var r=i+(e==c.Horizontal?this.horizontal:this.vertical),n=t.size[this._getAxis(e)]-r,o=this._getAlignmentOnAxis(e);return(e==c.Horizontal?this.left:this.top)+n*o},a._setLayoutInputForAxis=function(t,e,i,r,n){var o=this._getAxis(n);t.totalMinSize[o]=e,t.totalPreferredSize[o]=i,t.totalFlexibleSize[o]=r},a._getAxis=function(t){return t==c.Horizontal?"x":"y"},a._getMinSize=function(t,e){return t.minSize[this._getAxis(e)]},a._getPreferredSize=function(t,e){var i=this._getAxis(e);return Math.max(t.minSize[i],t.preferredSize[i])},a._getFlexibleSize=function(t,e){return t.flexibleSize[this._getAxis(e)]},a._getTotalMinSize=function(t,e){return t.totalMinSize[this._getAxis(e)]},a._getTotalPreferredSize=function(t,e){return t.totalPreferredSize[this._getAxis(e)]},a._getTotalFlexibleSize=function(t,e){return t.totalFlexibleSize[this._getAxis(e)]},a._getChildSizes=function(t,e,i,r){var n,o,a;return i?(n=this._getMinSize(t.element,e),o=this._getPreferredSize(t.element,e),a=this._getFlexibleSize(t.element,e)):(o=n=t.size[this._getAxis(e)],a=0),r&&(a=Math.max(a,1)),{min:n,preferred:o,flexible:a}},a._getAlignmentOnAxis=function(t){return t==c.Horizontal?this.adapter.layoutManager.childAlignment%3*.5:.5*Math.floor(this.adapter.layoutManager.childAlignment/3)},a._getLayoutList=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];r.element.ignoreLayout||e.push(r)}return e},a.internal_lateUpdate=function(t){if(this._isDirty){this._isDirty=!1;for(var e=[];this._layoutQueue.length>0;){var i=this._layoutQueue.shift();this._layoutHandler(i),e.push(i.index)}e.length>0&&this.emit(w.ON_LAYOUT_COMPLATED,e)}},o(e,[{key:"childAlignment",get:function(){return this._childAlignment},set:function(t){t!=this._childAlignment&&(this._childAlignment=t,this.emit(w.ON_CHANGED_LAYOUT_STATE))}},{key:"spacing",get:function(){return this._spacing},set:function(t){t!=this._spacing&&(this._spacing=t,this.emit(w.ON_CHANGED_LAYOUT_STATE))}},{key:"reverseArrangement",get:function(){return this._reverseArrangement},set:function(t){t!=this._reverseArrangement&&(this._reverseArrangement=t,this.emit(w.ON_CHANGED_LAYOUT_STATE))}},{key:"forceExpandWidth",get:function(){return this._forceExpandWidth},set:function(t){t!=this._forceExpandWidth&&(this._forceExpandWidth=t,this.emit(w.ON_CHANGED_LAYOUT_STATE))}},{key:"forceExpandHeight",get:function(){return this._forceExpandHeight},set:function(t){t!=this._forceExpandHeight&&(this._forceExpandHeight=t,this.emit(w.ON_CHANGED_LAYOUT_STATE))}},{key:"controlSizeWidth",get:function(){return this._controlSizeWidth},set:function(t){t!=this._controlSizeWidth&&(this._controlSizeWidth=t,this.emit(w.ON_CHANGED_LAYOUT_STATE))}},{key:"controlSizeHeight",get:function(){return this._controlSizeHeight},set:function(t){t!=this._controlSizeHeight&&(this._controlSizeHeight=t,this.emit(w.ON_CHANGED_LAYOUT_STATE))}},{key:"controlScaleWidth",get:function(){return this._controlScaleWidth},set:function(t){t!=this._controlScaleWidth&&(this._controlScaleWidth=t,this.emit(w.ON_CHANGED_LAYOUT_STATE))}},{key:"controlScaleHeight",get:function(){return this._controlScaleHeight},set:function(t){t!=this._controlScaleHeight&&(this._controlScaleHeight=t,this.emit(w.ON_CHANGED_LAYOUT_STATE))}},{key:"top",get:function(){return this.adapter.isVertical?0:this.adapter.viewManager.top}},{key:"bottom",get:function(){return this.adapter.isVertical?0:this.adapter.viewManager.bottom}},{key:"left",get:function(){return this.adapter.isHorizontal?0:this.adapter.viewManager.left}},{key:"right",get:function(){return this.adapter.isHorizontal?0:this.adapter.viewManager.right}},{key:"horizontal",get:function(){return this.left+this.right}},{key:"vertical",get:function(){return this.top+this.bottom}},{key:"isControlMainAxisSize",get:function(){return this.adapter.isHorizontal&&this.controlSizeWidth||this.adapter.isVertical&&this.controlSizeHeight}},{key:"isControlCrossAxisSize",get:function(){return this.adapter.isHorizontal&&this.controlSizeHeight||this.adapter.isVertical&&this.controlSizeWidth}},{key:"isControlCrossAxisScale",get:function(){return this.adapter.isHorizontal&&this.controlScaleHeight||this.adapter.isVertical&&this.controlScaleWidth}}]),e}(s)).Event=w,b=e((O=P).prototype,"_childAlignment",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.UpperLeft}}),e(O.prototype,"childAlignment",[_],Object.getOwnPropertyDescriptor(O.prototype,"childAlignment"),O.prototype),T=e(O.prototype,"_spacing",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(O.prototype,"spacing",[U],Object.getOwnPropertyDescriptor(O.prototype,"spacing"),O.prototype),v=e(O.prototype,"_reverseArrangement",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(O.prototype,"reverseArrangement",[f],Object.getOwnPropertyDescriptor(O.prototype,"reverseArrangement"),O.prototype),E=e(O.prototype,"delayLayout",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C=e(O.prototype,"_forceExpandWidth",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(O.prototype,"forceExpandWidth",[y],Object.getOwnPropertyDescriptor(O.prototype,"forceExpandWidth"),O.prototype),L=e(O.prototype,"_forceExpandHeight",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),e(O.prototype,"forceExpandHeight",[z],Object.getOwnPropertyDescriptor(O.prototype,"forceExpandHeight"),O.prototype),N=e(O.prototype,"_controlSizeWidth",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(O.prototype,"controlSizeWidth",[A],Object.getOwnPropertyDescriptor(O.prototype,"controlSizeWidth"),O.prototype),W=e(O.prototype,"_controlSizeHeight",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(O.prototype,"controlSizeHeight",[S],Object.getOwnPropertyDescriptor(O.prototype,"controlSizeHeight"),O.prototype),M=e(O.prototype,"_controlScaleWidth",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(O.prototype,"controlScaleWidth",[m],Object.getOwnPropertyDescriptor(O.prototype,"controlScaleWidth"),O.prototype),D=e(O.prototype,"_controlScaleHeight",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(O.prototype,"controlScaleHeight",[x],Object.getOwnPropertyDescriptor(O.prototype,"controlScaleHeight"),O.prototype),H=O))||H));a._RF.pop()}}}));

System.register("chunks:///_virtual/list.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Holder.ts","./ScrollAdapter.ts","./View3.ts","./enum.ts","./item2.ts"],(function(t){"use strict";var e,n,i,r,o,a,u,c,l,s,f,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,u=t.Prefab},function(t){c=t.Holder},function(t){l=t.ScrollAdapter},function(t){s=t.View},function(t){f=t.WrapMode},function(t){p=t.ChatItemView}],execute:function(){var h,b,y,d,w,m,g,v,V;o._RF.push({},"ea65di2Kb1NfbKNPpMsSrje","list",void 0);var _=a.ccclass,z=a.property,A=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var i=e.prototype;return i.onVisible=function(){},i.onDisable=function(){},e}(s),C=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this)._item=null,e}n(e,t);var i=e.prototype;return i.onCreated=function(){this._item=this.node.getComponent(p)},i.onVisible=function(){this._item.show(this)},i.onDisable=function(){this._item.hide()},e}(c);t("ChatListView",(h=_("ChatListView"),b=z(u),y=z(u),d=z(u),h((g=e((m=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"prefab1",g,r(e)),i(e,"prefab2",v,r(e)),i(e,"prefab3",V,r(e)),e}n(e,t);var o=e.prototype;return o.getPrefab=function(t){return 0==t.type?this.prefab1:1==t.type?this.prefab2:2==t.type?this.prefab3:void 0},o.getView=function(){return new A(this)},o.getHolder=function(t,e){return new C(t,e,this)},o.initElement=function(t,e){t.wrapBeforeMode=f.Auto},o.show=function(t){},o.hide=function(){},e}(l)).prototype,"prefab1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(m.prototype,"prefab2",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(m.prototype,"prefab3",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=m))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Joystick.ts","./Group.ts","./Holder.ts","./Manager.ts","./ScrollAdapter.ts","./View3.ts","./Indicator.ts","./Scrollbar.ts","./debug.ts","./enum.ts","./interface.ts","./helper2.ts","./CenterManager.ts","./LayoutManager.ts","./ModelManager.ts","./PageViewManager.ts","./ReleaseManager.ts","./ScrollManager.ts","./ViewManager.ts","./AILib.ts","./Body.ts","./Collider.ts","./Object.ts","./Shape.ts","./data.ts","./dataComponent.ts","./test.ts","./shader_area_display.ts","./cream.ts","./shaderUtil.ts","./discard.ts","./shader_filter.ts","./shader_obscure.ts","./water_wave.ts","./BaseMove.ts","./arrary.ts","./node.ts","./test3.ts","./Helper.ts","./LayerLink.ts","./Layered.ts","./LayeredLink.ts","./NewComponent.ts","./LayerLayout.ts","./LayerWidget.ts","./LayerWidgetManager.ts","./readJson.ts","./test2.ts","./CSpineUtil.ts","./memory.ts","./utils.ts","./item2.ts","./list.ts","./view.ts","./item.ts","./mgr.ts","./quadTest.ts","./quadTree.ts","./tiled.ts","./move.ts","./ghost.ts","./player.ts","./sensor.ts","./bullet.ts","./gun.ts","./view2.ts","./fit.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Manager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,a;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy,a=t._decorator}],execute:function(){var i;n._RF.push({},"9e556t6rHxO6ZbZa4CSsrXu","Manager",void 0);var r=a.ccclass;a.property,t("Manager",r("Manager")(i=function(){function t(){this._inited=!1,this._eventMap=new Map,this._adapter=null}var n=t.prototype;return n.internal_create=function(t){this._adapter=t},n.internal_init=function(){this._inited||(this._inited=!0,this.onInit())},n.on=function(t,e,n,a){void 0===a&&(a=!1),this._eventMap.has(t)||this._eventMap.set(t,[]);var i=this._eventMap.get(t);null!=i&&i.find((function(t){return t.target==n&&t.callback==e}))||i.push({callback:e,target:n,once:a})},n.off=function(t,e,n){if(this._eventMap.has(t)){var a=this._eventMap.get(t),i=null==a?void 0:a.findIndex((function(t){return t.callback==e&&t.target==n}));-1!=i&&a.splice(i,1)}},n.emit=function(t){if(this._eventMap.has(t)){for(var e=this._eventMap.get(t),n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];for(var r=0;r<e.length;r++){var c,s=e[r];(c=s.callback).call.apply(c,[s.target].concat(a)),s.once&&(e.splice(r,1),r--)}}},e(t,[{key:"adapter",get:function(){return this._adapter}}]),t}())||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/memory.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,r,n,o,a,s,u,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Node,u=t.Button,l=t.Component}],execute:function(){var p,c,h,m,d,y,f,_,b;o._RF.push({},"9a8d5v66SFJvZD7/zKErxPi","memory",void 0);var w=a.ccclass,v=a.property;t("memory",(p=w("memory"),c=v(s),h=v(s),m=v(s),p((f=i((y=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,r(i,"limit",f,n(i)),r(i,"total",_,n(i)),r(i,"used",b,n(i)),i._unit=2,i._unit2=["B","KB","MB","GB"],i}e(i,t);var o=i.prototype;return o.start=function(){var t=this;this.node.on(u.EventType.CLICK,(function(){t._unit=(t._unit+1)%4}),this)},o.update=function(t){this.limit.setStr((globalThis.window.performance.memory.jsHeapSizeLimit/Math.pow(1024,this._unit)).toFixed(2)+this._unit2[this._unit]),this.total.setStr((globalThis.window.performance.memory.totalJSHeapSize/Math.pow(1024,this._unit)).toFixed(2)+this._unit2[this._unit]),this.used.setStr((globalThis.window.performance.memory.usedJSHeapSize/Math.pow(1024,this._unit)).toFixed(2)+this._unit2[this._unit])},i}(l)).prototype,"limit",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=i(y.prototype,"total",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=i(y.prototype,"used",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=y))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/mgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tiled.ts"],(function(t){"use strict";var e,i,o,n,s,r,a,h,p,c,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Prefab,h=t.instantiate,p=t.v2,c=t.v3,l=t.Component},function(t){u=t.MapTiled}],execute:function(){var f,d,y,g,v;s._RF.push({},"aa4d3KvBKBGqZO72iuQmzly","mgr",void 0);var w=r.ccclass,K=r.property;t("MapTiledMgr",(f=w("MapTiledMgr"),d=K(a),f((v=e((g=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,o(e,"prefab",v,n(e)),e.pool=[],e.width=512,e.height=512,e.movedKyes=[],e.nextKeys=[],e.showKeys=[],e.nowNodeMap=new Map,e.length=4,e._lastPos=void 0,e}i(e,t);var s=e.prototype;return s.get=function(){if(this.pool.length>0)return this.pool.pop();var t=h(this.prefab);return t.getComponent(u).refreshCB=this.check.bind(this),t.getComponent(u)},s.put=function(t){this.pool.push(t)},s.start=function(){this.check(p(0,0))},s.check=function(t){var e=this;if(this._lastPos!=t){this._lastPos=t;var i=t.x,o=t.y;this.movedKyes.push(p(i,o));var n=~~(this.length/2);this.nextKeys=[];for(var s=-1*n;s<=n;s++)for(var r=-1*n;r<=n;r++)this.nextKeys.push(p(i+s,o+r));this.showKeys.minus(this.nextKeys).forEach((function(t){e.put(e.nowNodeMap.get(t)),e.nowNodeMap.delete(t)})),this.showKeys=this.nextKeys,this.nextKeys.forEach((function(t){var i=e.nowNodeMap.get(t)||e.get();i.setInit(e.node,c(t.x*e.width,t.y*e.height,0),0),e.nowNodeMap.set(t,i)}))}},e}(l)).prototype,"prefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=g))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/ModelManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./helper2.ts"],(function(e){"use strict";var t,i,n,o,r,a,s,l,c,h,d,u;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,l=e.UITransform},function(e){c=e.Manager},function(e){h=e.WrapMode,d=e.Layer},function(e){u=e.Helper}],execute:function(){var f,_;r._RF.push({},"18c36plR9VHHbXIt40bKQ+w","ModelManager",void 0);var p,y=a.ccclass;a.property;!function(e){e[e.ON_CLEAR=0]="ON_CLEAR",e[e.ON_INSERT=1]="ON_INSERT",e[e.ON_REMOVE=2]="ON_REMOVE",e[e.ON_MOVE=3]="ON_MOVE",e[e.ON_UPDATE=4]="ON_UPDATE",e[e.ON_CHANGE_BEFORE=5]="ON_CHANGE_BEFORE"}(p||(p={}));e("ModelManager",y("ModelManager")(((_=function(e){function r(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this)._modelList=[],t._length=0,t}t(r,e);var a=r.prototype;return a.onInit=function(){},a.insert=function(){var e=n(o().mark((function e(t,i){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===i&&(i=this.length),n=this._toArray(t),i=u.clamp(i,0,this.length),this.emit(p.ON_CHANGE_BEFORE),this._insertHandler(n,i),this._length=this._modelList.length,n.length>0&&this.emit(p.ON_INSERT,i);case 7:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),a._insertHandler=function(e,t){var i=this,n=t;this._length=this._modelList.length;for(var o=[],r=function(e,t){return(u=i._getNewModel(e)).index=t,i._modelList.push(u),u},a=function(e){var t=i.get(n);if(t)o.push(i._copyModel(t,{})),t.data=e,t.index=n,i._initModel(t);else{var a=r(e,n);i._initModel(a)}n++},s=0,l=e.length;s<l;s++)a(e[s]);for(var c=0;c<o.length;c++){var h=o[c],d=n+c;if(this.get(d)){var u=this.get(d);o.push(this._copyModel(u,{})),this._copyModel(h,u)}else{var f=r(h.data,d);this._copyModel(h,f)}}},a.remove=function(e,t){if(void 0===t&&(t=1),0!=t&&!(e<0||e>=this.length)){var i=this.length;this.emit(p.ON_CHANGE_BEFORE);for(var n=e;n<this.length;n++){var o=this.get(n),r=this.get(n+t);if(!r){i=n;break}this._copyModel(r,o),o.index=n}this._modelList.splice(i,this.length),this._length=this._modelList.length,this.emit(p.ON_REMOVE,e)}},a.move=function(e,t,i){var n=this;if(!(e<0||t<=0)){this.emit(p.ON_CHANGE_BEFORE);var o=this._modelList.map((function(e){return n._copyModel(e,{})})),r=o.splice(e,t);o.splice.apply(o,[i,0].concat(r));for(var a=0;a<o.length;a++)this._copyModel(o[a],this._modelList[a]);var s=Math.min(e,i);this.emit(p.ON_MOVE,s)}},a.update=function(){this.emit(p.ON_UPDATE)},a.clear=function(){this._modelList.length=0,this._length=0,this.emit(p.ON_CLEAR)},a.has=function(e){return!!this._modelList[e]},a.get=function(e){return isNaN(e)?null:this._modelList[e]},a.slice=function(e,t){return 0==this.length?[]:this._modelList.slice(e,t)},a._toArray=function(e){return e?e instanceof Array?e:[e]:[]},a._getNewModel=function(e){return{data:e,index:-1,code:null,size:{x:0,y:0},layoutSize:{x:0,y:0},scale:{x:0,y:0},position:{x:0,y:0},anchorPoint:{x:0,y:0},element:{wrapBeforeMode:h.Wrap,wrapAfterMode:h.Nowrap,ignoreLayout:!1,placeholder:!1,minSize:{x:0,y:0},preferredSize:{x:0,y:0},flexibleSize:{x:0,y:0},layer:d.Lowest,fixed:!1,fixedOffset:0,fixedSpacing:null,update:function(){}},isValid:!0,update:function(){}}},a._initModel=function(e){var t=this.adapter.getPrefab(e.data);if(!t)throw Error("预制体不能为空");if(t instanceof s){var i=t.getComponent(l);e.code=t.uuid,e.size={x:i.width,y:i.height},e.scale={x:i.node.scale.x,y:i.node.scale.y},e.anchorPoint={x:i.anchorPoint.x,y:i.anchorPoint.y}}else{var n=t.data.getComponent(l);e.code=t.data._prefab.fileId,e.size={x:n.width,y:n.height},e.scale={x:n.node.scale.x,y:n.node.scale.y},e.anchorPoint={x:n.anchorPoint.x,y:n.anchorPoint.y}}e.layoutSize={x:0,y:0},e.position={x:0,y:0},e.element={wrapBeforeMode:h.Wrap,wrapAfterMode:h.Nowrap,ignoreLayout:!1,placeholder:!1,minSize:{x:0,y:0},preferredSize:{x:0,y:0},flexibleSize:{x:0,y:0},layer:d.Lowest,fixed:!1,fixedOffset:0,fixedSpacing:null,update:function(){}},this.adapter.initElement(e.element,e.data)},a._copyModel=function(e,t){e.element.update=function(){};return function e(t,i){for(var n in t){var o=t[n];"data"!=n?"index"!=n&&(null!=o&&"object"==typeof o?(i[n]={},e(o,i[n])):i[n]=o):i[n]=o}}(e,t),t},i(r,[{key:"length",get:function(){return this._length}},{key:"modelList",get:function(){return this._modelList}}]),r}(c)).Event=p,f=_))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Joystick.ts"],(function(e){"use strict";var t,i,o,n,s,r,c,a,u,y,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,c=e.CCFloat,a=e.Vec3,u=e.input,y=e.Input,l=e.Component},function(e){p=e.Joystick}],execute:function(){var h,v,f,b,k,_,d,m,E,T,w;s._RF.push({},"a9998eDKpRN2bNVO93cWb7I","move",void 0);var K=r.ccclass,O=r.property;e("ObjectMove",(h=K("ObjectMove"),v=O(Boolean),f=O(Boolean),b=O({type:p,visible:function(){return this.useJoystick}}),k=O(c),h((m=t((d=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,o(t,"useKeyBoard",m,n(t)),o(t,"useJoystick",E,n(t)),o(t,"joystick",T,n(t)),t.velocity=new a,o(t,"speed",w,n(t)),t._tempPos=new a,t._key={},t}i(t,e);var s=t.prototype;return s.start=function(){var e,t=this;(this.useKeyBoard&&(u.on(y.EventType.KEY_DOWN,this.onKeyDown,this),u.on(y.EventType.KEY_UP,this.onKeyUp,this)),this.useJoystick)&&(null==(e=this.joystick)||e.init((function(e){var i=e.angle,o=e.ratio;switch(e.type){case y.EventType.TOUCH_START:t.velocity.set(a.ZERO);break;case y.EventType.TOUCH_MOVE:t.velocity.set(Math.cos(i),Math.sin(i),0),t.velocity.multiplyScalar(t.speed*o);break;case y.EventType.TOUCH_END:t.velocity.set(a.ZERO)}})))},s.onKeyDown=function(e){this._key[e.keyCode]=!0},s.onKeyUp=function(e){this._key[e.keyCode]=!1},s.update=function(e){var t=this.node.position,i=this.velocity;this._tempPos.x=t.x+i.x*e,this._tempPos.y=t.y+i.y*e,this._tempPos.z=t.z+i.z*e,this.node.setPosition(this._tempPos)},t}(l)).prototype,"useKeyBoard",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=t(d.prototype,"useJoystick",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=t(d.prototype,"joystick",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(d.prototype,"speed",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),_=d))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/NewComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,i,o,a,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node,l=e.instantiate,u=e.Component}],execute:function(){var p,s,f,b,y,h,m,g,v;o._RF.push({},"a56bbbyFVtAc4zeCN80CccV","NewComponent",void 0);var w=a.ccclass,d=a.property;e("NewComponent",(p=w("NewComponent"),s=d(c),f=d(c),b=d(c),p((m=t((h=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"label",m,i(t)),r(t,"sprite",g,i(t)),r(t,"content",v,i(t)),t}n(t,e);var o=t.prototype;return o.start=function(){},o.createLabel=function(){l(this.label).parent=this.content},o.createSprite=function(){l(this.sprite).parent=this.content},o.remove=function(e){e.target.destroy()},t}(u)).prototype,"label",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(h.prototype,"sprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(h.prototype,"content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=h))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/node.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,n,r,i,s,p,c,a;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.Node,i=t.Label,s=t.RichText,p=t.Sprite,c=t.UIOpacity,a=t.Component}],execute:function(){var u;o._RF.push({},"0273bScL/5BlYYpahuSAWAA","node",void 0);var d=n.ccclass;n.property,t("CNodeCustom",d("CNodeCustom")(u=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o}(a))||u);r.prototype.setStr=function(t){var e=this.getComponent(i);e||(e=this.getComponent(s)),e&&(e.string=t)},r.prototype.setImg=function(t){var e=this.getComponent(p);e&&t&&(e.spriteFrame=t,this.addAutoReleaseAsset(t))},r.prototype.bindData=function(t){var e=this;t.addListener((function(t){e.setStr(t)}))},Object.defineProperty(r.prototype,"oparity",{configurable:!0,enumerable:!1,set:function(t){var e=this.getComponent(c);e||(e=this.addComponent(c)),e.opacity=t},get:function(){var t=this.getComponent(c);return t||(t=this.addComponent(c)),t.opacity}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/Object.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Collider.ts","./Shape.ts"],(function(i){"use strict";var t,e,n,o,r,s,u,l,a,c,h,p,d,y,f,b,g;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized,r=i.createClass},function(i){s=i.cclegacy,u=i._decorator,l=i.ccenum,a=i.PhysicsSystem,c=i.Vec3,h=i.view,p=i.Component},function(i){d=i.cCollider},function(i){y=i.ShapeType,f=i.cCapsule,b=i.cSphere,g=i.cBox}],execute:function(){var I,S,w,v,C,T,m,R,z,D,x,E,_,B,P,O,k;i({TriggerType:void 0,cDirty:void 0}),s._RF.push({},"f834eM8pElOqJ717Yz/Xt9+","Object",void 0);var j,A,F=u.ccclass,L=u.property;!function(i){i[i.R=1]="R",i[i.T=2]="T",i[i.S=4]="S",i[i.RTS=7]="RTS",i[i.RS=5]="RS",i[i.NON=0]="NON"}(j||(j=i("cDirty",{}))),function(i){i.Enter="onTriggerEnter",i.Stay="onTriggerStay",i.Exit="onTriggerExit"}(A||(A=i("TriggerType",{}))),l(y);i("cObject",(I=F("cObject"),S=L({group:"Body"}),w=L({type:a.PhysicsGroup,group:"Body"}),v=L({type:y,group:"Shape"}),C=L({group:"Shape"}),T=L({group:"Shape",visible:function(){return this.type==y.Box}}),m=L({group:"Shape",visible:function(){return this.type!=y.Box}}),R=L({group:"Shape",visible:function(){return this.type==y.Capsule}}),I((x=t((D=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=i.call.apply(i,[this].concat(r))||this,n(t,"trigger",x,o(t)),n(t,"group",E,o(t)),n(t,"type",_,o(t)),n(t,"center",B,o(t)),n(t,"size",P,o(t)),n(t,"radius",O,o(t)),n(t,"height",k,o(t)),t.isDirty=j.RTS,t.shape=null,t.body=null,t.velocity=new c,t.speed=0,t.angle=0,t.lastIsInCollider=!1,t._nowIsInCollider=!1,t}e(t,i);var s=t.prototype;return s.onLoad=function(){switch(this.type){case y.Box:this.shape=new g(this.center,this.size);break;case y.Sphere:this.shape=new b(this.center,this.radius);break;case y.Capsule:this.shape=new f(this.center,this.radius,this.height)}this.body=d.inst.create(this),this.body.shape=this.shape,this.body.group=this.group,this.body.mask=a.instance.collisionMatrix[this.group],this.isDirty=j.RTS,h.on("design-resolution-changed",this.onResize,this),h.on("canvas-resize",this.onResize,this)},s.onResize=function(){this.body.shape.isDirty=!0,this.isDirty=j.RTS},s.setPosition=function(i){this.node.position=i,this.isDirty|=j.T},s.setRotation=function(i){this.node.rotation=i,this.isDirty|=j.R},s.setScale=function(i){this.node.scale=i,this.isDirty|=j.S},s.getRotation=function(){return this.node.rotation},s.getPosition=function(){return this.node.position},s.getScale=function(){return this.node.scale},s.remove=function(i){return void 0===i&&(i=!0),null!=this.body&&(this.body.isRetrieve=i,d.inst.remove(this.body)),this.node.removeFromParent(),this.node},s.onEnable=function(){d.inst.insert(this.body)},s.onDisable=function(){d.inst.remove(this.body)},s.insert=function(i){this.body&&(this.body.isRemove=!1,this.body.isRetrieve=!1,this.body.isInCollider||d.inst.insert(this.body)),i&&i.addChild(this.node)},s.setAnimation=function(i){},s.setColor=function(i){},s.emitTrigger=function(i){this.nowIsInCollider,this.onTrigger(i)},s.onTrigger=function(i){},s.onEnter=function(i){},s.onStay=function(i){},s.onExit=function(i){},s.init=function(){},s.onDestroy=function(){this.unscheduleAllCallbacks(),this.shape=null,this.body=null},s.update=function(i){},r(t,[{key:"nowIsInCollider",get:function(){return this._nowIsInCollider},set:function(i){this.lastIsInCollider=this._nowIsInCollider,this._nowIsInCollider=i,this._nowIsInCollider&&!this.lastIsInCollider?this.onEnter(this.body):!this._nowIsInCollider&&this.lastIsInCollider&&this.onExit(this.body)}}]),t}(p)).prototype,"trigger",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=t(D.prototype,"group",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.PhysicsGroup.DEFAULT}}),_=t(D.prototype,"type",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.Box}}),B=t(D.prototype,"center",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),P=t(D.prototype,"size",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),O=t(D.prototype,"radius",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=t(D.prototype,"height",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=D))||z));s._RF.pop()}}}));

System.register("chunks:///_virtual/PageViewManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./ScrollManager.ts","./ViewManager.ts"],(function(e){"use strict";var t,i,n,r,a,s,o,l,h,c,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){s=e.cclegacy,o=e._decorator},function(e){l=e.Manager},function(e){h=e.AlwaysScroll},function(e){c=e.ScrollManager},function(e){g=e.ViewManager}],execute:function(){var u,d,p,_,f,b,E,T,O,N,v,L,S,P,M;s._RF.push({},"9a9b8/q4JFHHb650TtGE+gS","PageViewManager",void 0);var y,x=o.ccclass,I=o.property;!function(e){e[e.ON_PAGE_LENGTH_CHANGED=0]="ON_PAGE_LENGTH_CHANGED",e[e.ON_SCROLL_PAGE_BEFOR=1]="ON_SCROLL_PAGE_BEFOR",e[e.ON_SCROLL_PAGE_END=2]="ON_SCROLL_PAGE_END"}(y||(y={}));e("PageViewManager",(u=x("PageViewManager"),d=I({displayName:"启用"}),p=I("boolean"),_=I({range:[0,1],slide:!0,step:.01,displayName:"滚动阈值",tooltip:"",visible:function(){return this.enabled}}),f=I({range:[0,1],slide:!0,step:.01,displayName:"翻页时间",tooltip:"",visible:function(){return this.enabled}}),b=I({displayName:"自动翻页阈值",tooltip:"",visible:function(){return this.enabled}}),E=I({displayName:"翻页速度",tooltip:"",visible:function(){return this.enabled}}),u(((M=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n(t,"_enabled",N,r(t)),n(t,"scrollThreshold",v,r(t)),n(t,"pageTurningEventTiming",L,r(t)),n(t,"autoPageTurningThreshold",S,r(t)),n(t,"pageTurningSpeed",P,r(t)),t._currentIndex=0,t}i(t,e);var s=t.prototype;return s.onInit=function(){this._register()},s._register=function(){this.adapter&&this.enabled&&(this.adapter.scrollManager.on(c.Event.ON_SCROLL_END,this._handleReleaseLogic,this),this.adapter.scrollManager.on(c.Event.ON_SCROLL_CANCEL,this._handleReleaseLogic,this),this.adapter.scrollManager.on(c.Event.ON_SCROLL_TO_GROUPINDEX_BEFOR,this._onScrollToIndex,this),this.adapter.viewManager.on(g.Event.ON_UPDATE_VIEWS,this._onUpdateViews,this,!0))},s._unregister=function(){this.adapter&&!this.enabled&&(this.adapter.scrollManager.off(c.Event.ON_SCROLL_END,this._handleReleaseLogic,this),this.adapter.scrollManager.off(c.Event.ON_SCROLL_CANCEL,this._handleReleaseLogic,this),this.adapter.scrollManager.off(c.Event.ON_SCROLL_TO_GROUPINDEX_BEFOR,this._onScrollToIndex,this),this.adapter.viewManager.off(g.Event.ON_UPDATE_VIEWS,this._onUpdateViews,this))},s.scrollToPage=function(e,t,i){t<0||t>=this.length||t==this.currentIndex&&0!=this.adapter.scrollManager.calcOffset()||(this.adapter.scrollManager.scrollToGroupIndex(e,t,i),this.emit(y.ON_SCROLL_PAGE_BEFOR,t))},s.scrollToPrevPage=function(e,t){void 0===e&&(e=this.pageTurningSpeed),void 0===t&&(t=h.Header),0!=this._currentIndex?this.scrollToPage(e,this._currentIndex-1,t):this.adapter.viewManager.loopHeader&&this.scrollToPage(e,this.length-1,t)},s.scrollToNextPage=function(e,t){void 0===e&&(e=this.pageTurningSpeed),void 0===t&&(t=h.Footer),this._currentIndex>=this.length-1?this.adapter.viewManager.loopFooter&&this.scrollToPage(e,0,t):this.scrollToPage(e,this._currentIndex+1,t)},s._onUpdateViews=function(){this.emit(y.ON_PAGE_LENGTH_CHANGED),this._currentIndex=0,this.scrollToPage(this.pageTurningSpeed,this._currentIndex)},s._onScrollToIndex=function(e){this._currentIndex=e,this.emit(y.ON_SCROLL_PAGE_END,e)},s._handleReleaseLogic=function(e){if(this._enabled&&this.adapter.scrollManager.isMyEventAndMoved){var t=e.getUIStartLocation()[this.adapter.mainAxis]-e.getUILocation()[this.adapter.mainAxis],i=this._getNextIndex(t);this._isScrollable(t)||this._isQuicklyScrollable(this.adapter.scrollManager.velocity)?this.scrollToPage(this.pageTurningSpeed,i):this.scrollToPage(this.pageTurningSpeed,this._currentIndex)}},s._getNextIndex=function(e){var t=this._currentIndex;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?e>0?t++:e<0&&t--:(e<0&&t++,e>0&&t--):this.adapter.isArrangeAxisStart?e<0?t++:e>0&&t--:e>0?t++:e<0&&t--,t>=this.length&&this.adapter.viewManager.loopFooter?t=0:t<0&&this.adapter.viewManager.loopHeader&&(t=this.length-1),(t<0||t>=this.length)&&(t=this._currentIndex),t},s._isScrollable=function(e){return Math.abs(e)>=this.adapter.mainAxisSize*this.scrollThreshold},s._isQuicklyScrollable=function(e){return Math.abs(e)>this.autoPageTurningThreshold},a(t,[{key:"enabled",get:function(){return this._enabled},set:function(e){e!=this._enabled&&(this._enabled=e,this._enabled?this._register():this._unregister())}},{key:"currentIndex",get:function(){return this._currentIndex}},{key:"length",get:function(){return this.adapter.viewManager.groupLength}}]),t}(l)).Event=y,N=t((O=M).prototype,"_enabled",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(O.prototype,"enabled",[p],Object.getOwnPropertyDescriptor(O.prototype,"enabled"),O.prototype),v=t(O.prototype,"scrollThreshold",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),L=t(O.prototype,"pageTurningEventTiming",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),S=t(O.prototype,"autoPageTurningThreshold",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),P=t(O.prototype,"pageTurningSpeed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),T=O))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gun.ts","./view2.ts"],(function(t){"use strict";var n,e,i,o,r,s,a,c;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){i=t.cclegacy,o=t._decorator,r=t.instantiate,s=t.Component},function(t){a=t.Gun},function(t){c=t.GameView}],execute:function(){var l,u;i._RF.push({},"46fcfXY2o1OO6eyeg9dAyai","player",void 0);var f=o.ccclass;o.property,t("Player",f("Player")(((u=function(t){function i(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).skills=[],n}n(i,t);var o=i.prototype;return o.onLoad=function(){i._instance=this},o.start=function(){for(var t=0;t<4;t++){var n=r(c.instance.getSkill("gun"));this.node.addChild(n),this.skills.push(n.getComponent(a))}},o.attack=function(t){!t||t.length<=0||this.skills.forEach((function(n,e){var i;n.attack(null==(i=t[e])?void 0:i.getWorldPosition())}))},e(i,null,[{key:"instance",get:function(){return this._instance}}]),i}(s))._instance=null,l=u))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/quadTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseMove.ts","./item.ts","./quadTree.ts"],(function(t){"use strict";var i,e,o,n,s,h,r,a,u,c,d,_,f,l,p,m,v,g,T,w,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,h=t._decorator,r=t.Node,a=t.UITransform,u=t.Rect,c=t.v3,d=t.Sprite,_=t.Color,f=t.input,l=t.Input,p=t.instantiate,m=t.Graphics,v=t.Component},function(t){g=t.BaseMove},function(t){T=t.TestItem},function(t){w=t.QuadTree,y=t.TRect}],execute:function(){var E,b,C,I,M,q,L,N,x;s._RF.push({},"b12eeT3uRxF/IDIKk5FEBsZ","quadTest",void 0);var R,S=h.ccclass,B=h.property;!function(t){t.static="static",t.dynamic="dynamic"}(R||(R={}));t("quadTest",(E=S("quadTest"),b=B(r),C=B(r),I=B(r),E((L=i((q=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),h=0;h<e;h++)s[h]=arguments[h];return i=t.call.apply(t,[this].concat(s))||this,o(i,"item",L,n(i)),o(i,"item2",N,n(i)),o(i,"showNum",x,n(i)),i._quadTree=void 0,i._ui=void 0,i._itemUI=void 0,i._nodeList=[],i._static=R.static,i._dtCount=0,i}e(i,t);var s=i.prototype;return s.start=function(){this._ui=this.node.getComponent(a),this._itemUI=this.item.getComponent(a),this.refreshQuadTree(),this.drawLine()},s.refreshQuadTree=function(){var t=this;this._quadTree=new w(new u(this.node.position.x-this._ui.anchorX*this._ui.width,this.node.position.y-this._ui.anchorY*this._ui.height,this._ui.width,this._ui.height),10,3),this.node.children.forEach((function(i){t._quadTree.insertNode(i)}))},s.onMouseMove=function(t){if(this.item){this.item.active=!0;var i=t.getUILocation();this.item.setPosition(c(i.x-this._ui.anchorX*this._ui.width,i.y-this._ui.anchorY*this._ui.height,0)),this._nodeList.forEach((function(t){t.getComponent(d).color=_.WHITE}));var e=this._quadTree.retrieveNode(this.item);e.forEach((function(t){t.node.getComponent(d).color=_.RED})),this._nodeList=e.map((function(t){return t.node}))}},s.onAddItem=function(t,i){this.createItem(i)},s.onSwitchState=function(t,i){switch(f.off(l.EventType.MOUSE_MOVE,this.onMouseMove,this),this._static=i,this._static){case R.static:f.on(l.EventType.MOUSE_MOVE,this.onMouseMove,this);break;case R.dynamic:this.item.active=!1,this._nodeList.forEach((function(t){t.getComponent(d).color=_.WHITE}))}},s.createItem=function(t){for(var i=0;i<t;i++){var e=p(this.item2);e.parent=this.node,e.active=!0,e.setPosition(this.node.position.x-this._ui.anchorX*this._ui.width+Math.random()*this._ui.width,this.node.position.y-this._ui.anchorY*this._ui.height+Math.random()*this._ui.height),e.getComponent(T).edges=new u(this.node.position.x-this._ui.anchorX*this._ui.width,this.node.position.y-this._ui.anchorY*this._ui.height,this._ui.width,this._ui.height),g.obstacles.push(e.getComponent(g)),this._quadTree.insertNode(e)}this.drawLine(),this.showNum.setStr(this.node.children.length-2)},s.drawLine=function(){var t=this.node.getComponent(m);t.clear(),this._static!=R.dynamic&&(t.strokeColor=_.GREEN,this._drawNode(t,this._quadTree,6))},s._drawNode=function(t,i,e){var o=this;t.lineWidth=e,t.rect(i.bounds.x,i.bounds.y,i.bounds.width,i.bounds.height),t.stroke(),i.nodes.forEach((function(i){o._drawNode(t,i,e-1)}))},s.update=function(t){this._static==R.dynamic&&(this._dtCount+=t,this.refreshQuadTree(),this._dtCount>.05&&(this.refreshQuadTree(),this._dtCount-=.05),this.node.children.forEach((function(i){i.getComponent(T).move(t)})),this._quadTree.getObjectList().forEach((function(t){t.forEach((function(t){t.node.getComponent(d).color=_.WHITE})),y.simpleAABBCollisionDetection(t)})))},i}(v)).prototype,"item",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(q.prototype,"item2",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=i(q.prototype,"showNum",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=q))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/quadTree.ts",["cc","./item.ts"],(function(t){"use strict";var i,e,s;return{setters:[function(t){i=t.cclegacy,e=t.UITransform},function(t){s=t.TestItem}],execute:function(){i._RF.push({},"f17eeMK3sFDYZxFFkDBpTuJ","quadTree",void 0);var h=t("TRect",function(){function t(t,i,e,s){this.x=void 0,this.y=void 0,this.width=void 0,this.height=void 0,this.node=void 0,this._nodeUI=void 0,this.x=t||0,this.y=i||0,this.width=e||0,this.height=s||0}var i=t.prototype;return i.init=function(t){this.node=t,this._nodeUI=t.getComponent(e),this.x=t.position.x-this._nodeUI.anchorX*this._nodeUI.width,this.y=t.position.y-this._nodeUI.anchorY*this._nodeUI.height,this.width=t.getComponent(e).width,this.height=t.getComponent(e).height},i.intersects=function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},t.simpleAABBCollisionDetection=function(t){for(var i=0;i<t.length;i++)for(var e=t[i],s=i+1;s<t.length;s++){var h=t[s];e.intersects(h)&&(e.onTrigger(h),h.onTrigger(e))}},i.onTrigger=function(t){this.node.getComponent(s).onCollisionEnter(t.node.getComponent(s),this.node.getComponent(s))},t}());t("QuadTree",function(){function t(t,i,e,s){this.x=void 0,this.y=void 0,this.width=void 0,this.height=void 0,this.max_objects=void 0,this.max_levels=void 0,this.level=void 0,this.bounds=void 0,this.objects=void 0,this.nodes=void 0,this.max_objects=i||10,this.max_levels=e||4,this.level=s||0,this.bounds=t,this.objects=[],this.nodes=[]}var i=t.prototype;return i.split=function(){var i=this.level+1,e=this.bounds.width/2,s=this.bounds.height/2,h=this.bounds.x,n=this.bounds.y;this.nodes[0]=new t({x:h+e,y:n,width:e,height:s},this.max_objects,this.max_levels,i),this.nodes[1]=new t({x:h,y:n,width:e,height:s},this.max_objects,this.max_levels,i),this.nodes[2]=new t({x:h,y:n+s,width:e,height:s},this.max_objects,this.max_levels,i),this.nodes[3]=new t({x:h+e,y:n+s,width:e,height:s},this.max_objects,this.max_levels,i)},i.getIndex=function(t){var i=[],e=this.bounds.x+this.bounds.width/2,s=this.bounds.y+this.bounds.height/2,h=t.y<s,n=t.x<e,o=t.x+t.width>e,d=t.y+t.height>s;return h&&o&&i.push(0),n&&h&&i.push(1),n&&d&&i.push(2),o&&d&&i.push(3),i},i.insert=function(t){var i,e=0;if(this.nodes.length)for(i=this.getIndex(t),e=0;e<i.length;e++)this.nodes[i[e]].insert(t);else if(this.objects.push(t),this.objects.length>this.max_objects&&this.level<this.max_levels){for(this.nodes.length||this.split(),e=0;e<this.objects.length;e++){i=this.getIndex(this.objects[e]);for(var s=0;s<i.length;s++)this.nodes[i[s]].insert(this.objects[e])}this.objects=[]}},i.retrieve=function(t){var i=this.getIndex(t),e=this.objects;if(this.nodes.length)for(var s=0;s<i.length;s++)e=e.concat(this.nodes[i[s]].retrieve(t));return e=e.filter((function(t,i){return e.indexOf(t)>=i}))},i.clear=function(){this.objects=[];for(var t=0;t<this.nodes.length;t++)this.nodes.length&&this.nodes[t].clear();this.nodes=[]},i.insertNode=function(t){var i=new h;i.init(t),this.insert(i)},i.retrieveNode=function(t,i){void 0===i&&(i=0);var e=new h;return e.init(t),e.x-=i,e.y-=i,e.width+=i,e.height+=i,this.retrieve(e)},i.getObjectList=function(){var t=[];return this.nodes.forEach((function(i){i.nodes.length?t.push.apply(t,i.getObjectList()):t.push(i.objects)})),t},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/readJson.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var o,n,t,r;return{setters:[function(e){o=e.inheritsLoose},function(e){n=e.cclegacy,t=e._decorator,r=e.Component}],execute:function(){var s;n._RF.push({},"f9b66XiVlREeqjTHsio4FzY","readJson",void 0);var a=t.ccclass;t.property,e("readJson",a("readJson")(s=function(e){function n(){for(var o,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return(o=e.call.apply(e,[this].concat(t))||this)._result=void 0,o}o(n,e);var t=n.prototype;return t.start=function(){},t.aaa=function(){var e=new File([],"out"),o=new FileReader;o.readAsText(e),o.onload=function(){console.log("读取结果：",this.result),console.log("读取结果转为JSON：");var e=JSON.parse(this.result);console.log(e.name),console.log(e.age)}},t.update=function(e){},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/ReleaseManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./enum.ts","./ScrollManager.ts"],(function(t){"use strict";var e,i,s,a,n,r,o,l,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,s=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator},function(t){l=t.Manager},function(t){h=t.ReleaseState},function(t){p=t.ScrollManager}],execute:function(){var _,u,c,d,f,g,L,b,v,S,m,E,R,w,y;r._RF.push({},"584779mBRhND6eHOQ3xrp/1","ReleaseManager",void 0);var M,O=o.ccclass,U=o.property;!function(t){t[t.ON_PULL_UP=0]="ON_PULL_UP",t[t.ON_PULL_DOWN=1]="ON_PULL_DOWN",t[t.ON_PULL_LEFT=2]="ON_PULL_LEFT",t[t.ON_PULL_RIGHT=3]="ON_PULL_RIGHT"}(M||(M={}));t("ReleaseManager",(_=O("ReleaseManager"),u=U({displayName:"启用"}),c=U("boolean"),d=U({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled}}),f=U({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled}}),g=U({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled}}),L=U({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled}}),_(((y=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,a(e,"_enabled",S,n(e)),a(e,"left",m,n(e)),a(e,"right",E,n(e)),a(e,"top",R,n(e)),a(e,"bottom",w,n(e)),e._pullUp=void 0,e._pullDown=void 0,e._pullLeft=void 0,e._pullRight=void 0,e}s(e,t);var r=e.prototype;return r.onInit=function(){this.enabled&&(this._pullUp=new P(this,M.ON_PULL_UP,this.bottom),this._pullDown=new P(this,M.ON_PULL_DOWN,this.top),this._pullLeft=new P(this,M.ON_PULL_LEFT,this.right),this._pullRight=new P(this,M.ON_PULL_RIGHT,this.left),this.adapter.scrollManager.on(p.Event.ON_SCROLL_START,this.onScrollStart,this),this.adapter.scrollManager.on(p.Event.ON_SCROLL_END,this.onScrollEnd,this),this.adapter.scrollManager.on(p.Event.ON_SCROLL_CANCEL,this.onScrollEnd,this),this.checkLoop(),console.log("release创建完成"))},r.checkLoop=function(){this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?(this.left>0&&(this.adapter.viewManager.loopHeader=!1),this.right>0&&(this.adapter.viewManager.loopFooter=!1)):(this.left>0&&(this.adapter.viewManager.loopFooter=!1),this.right>0&&(this.adapter.viewManager.loopHeader=!1)):this.adapter.isArrangeAxisStart?(this.top>0&&(this.adapter.viewManager.loopHeader=!1),this.bottom>0&&(this.adapter.viewManager.loopFooter=!1)):(this.top>0&&(this.adapter.viewManager.loopFooter=!1),this.bottom>0&&(this.adapter.viewManager.loopHeader=!1))},r.onScrollStart=function(){this.adapter.isHorizontal?(this.left>0&&this._pullRight._setState(h.IDLE),this.right>0&&this._pullLeft._setState(h.IDLE)):(this.top>0&&this._pullDown._setState(h.IDLE),this.bottom>0&&this._pullUp._setState(h.IDLE))},r.onScrollEnd=function(){this.adapter.isHorizontal?(this.left>0&&this._pullRight._setState(h.RELEASE),this.right>0&&this._pullLeft._setState(h.RELEASE)):(this.top>0&&this._pullDown._setState(h.RELEASE),this.bottom>0&&this._pullUp._setState(h.RELEASE))},r.internal_lateUpdate=function(t){if(this.enabled){var e=this.adapter.scrollManager.boundaryOffset;this.adapter.scrollManager.dragging||(e=0),this.adapter.isHorizontal?(this.left>0&&this._pullRight._set(Math.max(-e,0),e<0),this.right>0&&this._pullLeft._set(Math.max(e,0),e>0)):(this.top>0&&this._pullDown._set(Math.max(e,0),e>0),this.bottom>0&&this._pullUp._set(Math.max(-e,0),e<0))}},i(e,[{key:"enabled",get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t)}},{key:"max",get:function(){return this.enabled?this.adapter.isHorizontal?this._pullLeft?this._pullLeft.expand:0:this._pullDown?this._pullDown.expand:0:0}},{key:"min",get:function(){return this.enabled?this.adapter.isHorizontal?this._pullRight?this._pullRight.expand:0:this._pullUp?this._pullUp.expand:0:0}}]),e}(l)).Event=M,S=e((v=y).prototype,"_enabled",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(v.prototype,"enabled",[c],Object.getOwnPropertyDescriptor(v.prototype,"enabled"),v.prototype),m=e(v.prototype,"left",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=e(v.prototype,"right",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),R=e(v.prototype,"top",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=e(v.prototype,"bottom",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=v))||b));var P=t("ReleaseEvent",function(){function t(t,e,i){this._expand=0,this._progress=0,this._offset=0,this._state=void 0,this._defaultPercentage=void 0,this._manager=void 0,this._event=void 0,this._stop=void 0,this._defaultPercentage=i,this._manager=t,this._event=e}var e=t.prototype;return e._set=function(t,e){e&&(this._stop=!1),this._stop||(this._offset=t,this._progress=t/(this._defaultPercentage*this._manager.adapter.mainAxisSize),this._stop=this._offset<=.1,this._setState(h.PULL),this._manager.emit(this._event,this))},e._setState=function(t){this._state!=h.WAIT&&(t==h.PULL&&this._state==h.RELEASE||(this._state=t))},e.wait=function(t){void 0===t&&(t=this._defaultPercentage*this._manager.adapter.mainAxisSize),this._expand=t,this._state=h.WAIT},e.release=function(){this._expand=0,this._state=h.IDLE,this.offset<=.1&&(this._offset=0,this._progress=0,this._manager.emit(this._event,this))},i(t,[{key:"expand",get:function(){return this._expand}},{key:"progress",get:function(){return this._progress}},{key:"offset",get:function(){return this._offset}},{key:"state",get:function(){return this._state}}]),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enum.ts","./CenterManager.ts","./LayoutManager.ts","./ModelManager.ts","./PageViewManager.ts","./ReleaseManager.ts","./ScrollManager.ts","./ViewManager.ts"],(function(e){"use strict";var t,a,i,r,n,s,o,l,g,c,u,p,h,M,f,y,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,n=e.createClass},function(e){s=e.cclegacy,o=e._decorator,l=e.Component},function(e){g=e.Orientation,c=e.ArrangeAxis},function(e){u=e.CenterManager},function(e){p=e.LayoutManager},function(e){h=e.ModelManager},function(e){M=e.PageViewManager},function(e){f=e.ReleaseManager},function(e){y=e.ScrollManager},function(e){w=e.ViewManager}],execute:function(){var d,A,m,v,_,b,x,S,z,V,k,P,H,N,C;s._RF.push({},"d5d1crBDMFIA4umJNt7GKmz","ScrollAdapter",void 0);var U=o.ccclass,D=o.property;e("ScrollAdapter",(d=U("ScrollAdapter"),A=D({type:y,displayName:"滚动管理器",tooltip:""}),m=D({type:w,displayName:"可视区域管理器",tooltip:""}),v=D({type:p,displayName:"布局管理",tooltip:""}),_=D({type:M,displayName:"页面管理器",tooltip:""}),b=D({type:f,displayName:"释放管理器",tooltip:""}),x=D({type:u,displayName:"居中管理器",tooltip:""}),d((V=t((z=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(t,"scrollManager",V,r(t)),i(t,"viewManager",k,r(t)),i(t,"layoutManager",P,r(t)),i(t,"pageViewManager",H,r(t)),i(t,"releaseManager",N,r(t)),i(t,"centerManager",C,r(t)),t.modelManager=new h,t}a(t,e);var s=t.prototype;return s.getParentAdapter=function(e){if(null!=e){var t=e.getComponent("ScrollAdapter");return t||this.getParentAdapter(e.parent)}},s.__preload=function(){this.scrollManager.internal_create(this),this.viewManager.internal_create(this),this.modelManager.internal_create(this),this.releaseManager.internal_create(this),this.layoutManager.internal_create(this),this.pageViewManager.internal_create(this),this.centerManager.internal_create(this),this.viewManager.internal_init(),this.releaseManager.internal_init(),this.layoutManager.internal_init(),this.pageViewManager.internal_init(),this.centerManager.internal_init(),this.scrollManager.internal_init(),this.modelManager.internal_init()},s.lateUpdate=function(e){this.scrollManager.internal_lateUpdate(e),this.viewManager.internal_lateUpdate(e),this.layoutManager.internal_lateUpdate(e),this.releaseManager.internal_lateUpdate(e)},n(t,[{key:"isVertical",get:function(){return this.scrollManager.orientation==g.Vertical}},{key:"isHorizontal",get:function(){return this.scrollManager.orientation==g.Horizontal}},{key:"isArrangeAxisStart",get:function(){return this.viewManager.arrangeAxis==c.Start}},{key:"mainAxis",get:function(){return this.isVertical?"y":"x"}},{key:"crossAxis",get:function(){return this.isVertical?"x":"y"}},{key:"mainAxisAnchorPoint",get:function(){var e=this.isVertical?1:0;return this.isArrangeAxisStart?e:1-e}},{key:"mainAxisSize",get:function(){return this.scrollManager.view.contentSize[this.mainAxis]}},{key:"crossAxisSize",get:function(){return this.scrollManager.view.contentSize[this.crossAxis]}},{key:"multiplier",get:function(){var e=this.isVertical?-1:1;return this.isArrangeAxisStart?-e:e}},{key:"paddingHeader",get:function(){return this.isHorizontal?this.isArrangeAxisStart?this.viewManager.left:this.viewManager.right:this.isArrangeAxisStart?this.viewManager.top:this.viewManager.bottom}},{key:"paddingFooter",get:function(){return this.isHorizontal?this.isArrangeAxisStart?this.viewManager.right:this.viewManager.left:this.isArrangeAxisStart?this.viewManager.bottom:this.viewManager.top}},{key:"mainAxisPadding",get:function(){return this.isHorizontal?this.viewManager.left+this.viewManager.right:this.viewManager.top+this.viewManager.bottom}}]),t}(l)).prototype,"scrollManager",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),k=t(z.prototype,"viewManager",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new w}}),P=t(z.prototype,"layoutManager",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),H=t(z.prototype,"pageViewManager",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new M}}),N=t(z.prototype,"releaseManager",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f}}),C=t(z.prototype,"centerManager",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),S=z))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/Scrollbar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScrollAdapter.ts","./enum.ts","./helper2.ts","./ScrollManager.ts"],(function(t){"use strict";var i,e,n,r,o,a,s,h,l,c,u,p,_,f,d,g,m,b,S,T,v,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,s=t._decorator,h=t.Color,l=t.Sprite,c=t.SpriteFrame,u=t.Node,p=t.v3,_=t.UITransform,f=t.Component,d=t.Vec2},function(t){g=t.ScrollAdapter},function(t){m=t.ScrollbarDirection,b=t.Transition,S=t.Orientation},function(t){T=t.Helper},function(t){v=t.ScrollManager,y=t.ADAPTER}],execute:function(){var E,w,H,z,C,M,O,A,L,x,R,U,G,D,I,N,k,P,V,F,B,j,K,W,q,J,Q,X,Y,Z,$,tt,it,et,nt,rt,ot,at,st,ht;a._RF.push({},"e7832mHcjNK2r9z66HM2mwU","Scrollbar",void 0);var lt=s.ccclass,ct=s.property,ut=new h;t("Scrollbar",(E=lt("Scrollbar"),w=ct(g),H=ct(l),z=ct({type:m,tooltip:"滚动方向"}),C=ct({tooltip:"开启后会允许用户滑动进度条"}),M=ct({range:[0,1],slide:!0,step:.001,visible:function(){return this.interactable},tooltip:"可拖拽的最小限制，默认=0不限制,仅当你开启了循环,并且你的item会实时修改主轴尺寸时,那么你应该适当限制拖拽区域"}),O=ct({range:[0,1],slide:!0,step:.001,visible:function(){return this.interactable},tooltip:"可拖拽的最大限制，默认=1不限制,仅当你开启了循环,并且你的item会实时修改主轴尺寸时,那么你应该适当限制拖拽区域"}),A=ct({type:b}),L=ct({type:b,visible:function(){return this.interactable}}),x=ct({type:l,visible:function(){return this.transition!=b.None&&this.interactable}}),R=ct({type:c,visible:function(){return this.transition==b.SpriteSwap&&this.interactable}}),U=ct({type:c,visible:function(){return this.transition==b.SpriteSwap&&this.interactable}}),G=ct({visible:function(){return this.transition==b.ColorTint&&this.interactable}}),D=ct({visible:function(){return this.transition==b.ColorTint&&this.interactable}}),I=ct({visible:function(){return this.transition==b.Scale&&this.interactable}}),N=ct({visible:function(){return this.transition==b.Scale&&this.interactable}}),k=ct({visible:function(){return this.transition==b.Scale||this.transition==b.ColorTint&&this.interactable}}),P=ct({range:[0,11],slide:!0,step:1,tooltip:"用于进度的步数。值为 < 2 将禁用"}),V=ct({tooltip:"开启后会在滚动条无更新时自动隐藏"}),F=ct({visible:function(){return this.enableAutoHide},tooltip:"自动隐藏滚动条的时间"}),E((K=i((j=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,n(i,"adapter",K,r(i)),n(i,"handle",W,r(i)),n(i,"direction",q,r(i)),n(i,"interactable",J,r(i)),n(i,"dragMinLimit",Q,r(i)),n(i,"dragMaxLimit",X,r(i)),n(i,"_transition",Y,r(i)),n(i,"targetGraphic",Z,r(i)),n(i,"hoverSprite",$,r(i)),n(i,"pressedSprite",tt,r(i)),n(i,"hoverColor",it,r(i)),n(i,"pressedColor",et,r(i)),n(i,"hoverScale",nt,r(i)),n(i,"pressedScale",rt,r(i)),n(i,"transitionDuration",ot,r(i)),n(i,"numberOfSteps",at,r(i)),n(i,"enableAutoHide",st,r(i)),n(i,"autoHideTime",ht,r(i)),i._transitionInfo=void 0,i._targetEnter=void 0,i._targetStart=void 0,i._isDirty=!1,i._transform=void 0,i._handleTransform=void 0,i._size=0,i._value=-1,i._pointerEvent=void 0,i._offset=void 0,i._isHide=void 0,i._opacity=255,i._autoHideRemainingTime=void 0,i._rawTargetScale=void 0,i._rawTargetFrame=void 0,i._rawTargetColor=void 0,i}e(i,t);var a=i.prototype;return a.__preload=function(){this.transform.setAnchorPoint(.5,.5),this.handleTransform.setAnchorPoint(.5,.5),this.handle.node.setPosition(0,0),this.adapter&&(this.adapter.scrollManager.on(v.Event.ON_UPDATE_PERCENTAGE,this._onUpdateScrollbar,this),this._updateVisuals()),this.targetGraphic&&(this._rawTargetScale=this.targetGraphic.node.getScale().clone(),this._rawTargetFrame=this.targetGraphic.spriteFrame,this._rawTargetColor=this.targetGraphic.color.clone()),this._openAutoHide(!0)},a.onEnable=function(){var t=this.node.getComponent(l);t&&(this._opacity=t.color.a),this.adapter&&(this.node[y]=!0,this.node.on(u.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(u.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(u.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(u.EventType.TOUCH_CANCEL,this._onTouchEnd,this),this.node.on(u.EventType.MOUSE_ENTER,this._mouseEnter,this),this.node.on(u.EventType.MOUSE_LEAVE,this._mouseLeave,this),this.targetGraphic&&(this.targetGraphic.node.on(u.EventType.MOUSE_ENTER,this._targetMouseEnter,this),this.targetGraphic.node.on(u.EventType.MOUSE_LEAVE,this._targetMouseLeave,this)))},a.onDisable=function(){this.node.off(u.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(u.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(u.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(u.EventType.TOUCH_CANCEL,this._onTouchEnd,this),this.node.off(u.EventType.MOUSE_ENTER,this._mouseEnter,this),this.node.off(u.EventType.MOUSE_LEAVE,this._mouseLeave,this),this.targetGraphic&&(this.targetGraphic.node.off(u.EventType.MOUSE_ENTER,this._targetMouseEnter,this),this.targetGraphic.node.off(u.EventType.MOUSE_LEAVE,this._targetMouseLeave,this))},a._targetMouseEnter=function(){switch(this._targetEnter=!0,this._openAutoHide(!1),this.transition){case b.Scale:this._transitionScale(this._targetStart?this.pressedScale:this.hoverScale);break;case b.SpriteSwap:this._transitionSprite(this._targetStart?this.pressedSprite:this.hoverSprite);break;case b.ColorTint:this._transitionColor(this._targetStart?this.pressedColor:this.hoverColor)}},a._targetMouseLeave=function(){switch(this._targetEnter=!1,this._openAutoHide(!0),this.transition){case b.Scale:this._transitionScale(this._targetStart?this.pressedScale:this._rawTargetScale);break;case b.SpriteSwap:this._transitionSprite(this._targetStart?this.pressedSprite:this._rawTargetFrame);break;case b.ColorTint:this._transitionColor(this._targetStart?this.pressedColor:this._rawTargetColor)}},a._transitionScale=function(t){t&&this.targetGraphic&&(this._transitionInfo={time:0,from:this.targetGraphic.node.getScale().clone(),to:t})},a._transitionColor=function(t){t&&this.targetGraphic&&(this._transitionInfo={time:0,from:this.targetGraphic.color,to:t})},a._transitionSprite=function(t){t&&this.targetGraphic&&(this.targetGraphic.spriteFrame=t)},a._mouseEnter=function(t){this.interactable&&this._openAutoHide(!1)},a._mouseLeave=function(t){this.interactable&&this._openAutoHide(!0)},a._openAutoHide=function(t){this.enableAutoHide&&(this._autoHideRemainingTime=this.autoHideTime,this._isHide=t,t||this._setOpacity(this._opacity))},a._onTouchStart=function(t){if(this.interactable&&1!=this.size&&0!=this.size){this._openAutoHide(!1),this._pointerEvent=null,this._targetStart=!0;var i=t.getUIStartLocation();if(this._offset=this.handleTransform.convertToNodeSpaceAR(p(i.x,i.y)),Math.abs(this._offset[this.xy])>.5*this.handleTransform[this.wh]){this._offset=null,this._pointerEvent=t;var e=this._calcPercentage(t);this._setPercentage(e)}this.transition==b.Scale?this._transitionScale(this.pressedScale):this.transition==b.SpriteSwap?this._transitionSprite(this.pressedSprite):this.transition==b.ColorTint&&this._transitionColor(this.pressedColor)}},a._onTouchMove=function(t){if(this.interactable&&1!=this.size&&0!=this.size&&this._offset){var i=this._calcPercentage(t,this._offset[this.xy]);this._setPercentage(i)}},a._onTouchEnd=function(t){if(this.interactable&&1!=this.size&&0!=this.size){switch(this._offset=null,this._pointerEvent=null,this._targetStart=!1,this.transition){case b.Scale:this._transitionScale(this._targetEnter?this.hoverScale:this._rawTargetScale);break;case b.SpriteSwap:this._transitionSprite(this._targetEnter?this.hoverSprite:this._rawTargetFrame);break;case b.ColorTint:this._transitionColor(this._targetEnter?this.hoverColor:this._rawTargetColor)}this.adapter.centerManager.scrollToCenter()}},a._setPercentage=function(t){this.adapter.scrollManager.stopScroll(),this.adapter.scrollManager.setPercentage(t)},a._calcPercentage=function(t,i){void 0===i&&(i=0);var e=(this.axis==S.Horizontal?this.transform.width:this.transform.height)*(1-this.size),n=t.getUILocation(),r=this.transform.convertToNodeSpaceAR(p(n.x,n.y))[this.xy]-i-.5*-this.transform[this.wh];r-=.5*this.handleTransform[this.wh];var o=this.adapter.scrollManager.percentage;switch(this.direction){case m.Right_To_Left:case m.Top_To_Bottom:o=T.clamp(1-r/e,this.dragMinLimit,this.dragMaxLimit);break;case m.Left_To_Right:case m.Bottom_To_Top:o=T.clamp(r/e,this.dragMinLimit,this.dragMaxLimit)}return this.getSteps(o)},a._onUpdateScrollbar=function(t,i){var e=0,n=0;this.adapter.viewManager.virtualSize>0&&(e=this.adapter.viewManager.virtualSize>=this.adapter.mainAxisSize?T.clamp01((this.adapter.mainAxisSize-Math.abs(i))/this.adapter.viewManager.virtualSize):1),n=t,this.size=e,this.numberOfSteps>1&&(n=Math.round(n*(this.numberOfSteps-1))/(this.numberOfSteps-1),n=T.clamp01(n)),this.value=n,this._autoHideRemainingTime=this.autoHideTime,this._setOpacity(this._opacity)},a._updateVisuals=function(){if(this.handleTransform&&this.adapter){var t={x:0,y:0},i={x:0,y:0},e=this.adapter.mainAxis,n=T.clamp01(this.value)*(1-this.size);t[e]=n,i[e]=n+this.size;var r=this.transform.contentSize[this.wh]-i[e]*this.transform.contentSize[this.wh],o=t[e]*this.transform.contentSize[this.wh],a=this.handle.node.getPosition();switch(this.direction){case m.Bottom_To_Top:case m.Left_To_Right:a[this.xy]=.5*(o-r);break;case m.Top_To_Bottom:case m.Right_To_Left:a[this.xy]=.5*(r-o)}this.handleTransform[this.wh]=this.transform.contentSize[this.wh]-r-o,this.handle.node.setPosition(a)}},a.update=function(t){this._clearDirty(),this._autoHide(t),this._tranitionHandler(t)},a._clearDirty=function(){if(this._isDirty&&(this._isDirty=!1,this._updateVisuals(),this._pointerEvent)){var t=this._pointerEvent.getUILocation();this._offset=this.handleTransform.convertToNodeSpaceAR(p(t.x,t.y)),this._pointerEvent=null}},a._autoHide=function(t){if(this.enableAutoHide&&this._isHide&&!(this._autoHideRemainingTime<=0)&&(this._autoHideRemainingTime-=t,this._autoHideRemainingTime<=this.autoHideTime)){this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime);var i=this._opacity*(this._autoHideRemainingTime/this.autoHideTime);this._setOpacity(i)}},a._tranitionHandler=function(t){var i=this.targetGraphic;if(this.transition!=b.None&&i&&this._transitionInfo){this._transitionInfo.time+=t;var e=1;if(this.transitionDuration>0&&(e=this._transitionInfo.time/this.transitionDuration),e>=1&&(e=1),this.transition==b.Scale){this._transitionInfo.current=i.node.getScale();var n=this._transitionInfo.from,r=this._transitionInfo.to;this._transitionInfo.current.x=T.lerp(n.x,r.x,e),this._transitionInfo.current.y=T.lerp(n.y,r.y,e),i.node.setScale(this._transitionInfo.current)}else if(this.transition==b.ColorTint){var o=this._transitionInfo.from,a=this._transitionInfo.to;h.lerp(ut,o,a,e),i.color=ut}1===e&&(this._transitionInfo=null)}},a._setOpacity=function(t){if(this.handle){var i=function(i){i&&(ut.set(i.color),ut.a=t,i.color=ut)};i(this.node.getComponent(l)),i(this.handle.getComponent(l))}},a.getSteps=function(t){return this.numberOfSteps>1&&(t=Math.round(t*(this.numberOfSteps-1))/(this.numberOfSteps-1),t=T.clamp(t,this.dragMinLimit,this.dragMaxLimit)),t},o(i,[{key:"transition",get:function(){return this._transition},set:function(t){t!=this._transition&&(this._transition=t,t!=b.None&&(this.targetGraphic||(this.targetGraphic=this.handle)))}},{key:"size",get:function(){return this._size},set:function(t){t!=this._size&&(this._size=T.clamp(t,.01,1),this._isDirty=!0)}},{key:"value",get:function(){return this._value},set:function(t){t!=this._value&&(this._value=this.getSteps(t),this._isDirty=!0)}},{key:"stepSize",get:function(){return this.numberOfSteps>1?1/(this.numberOfSteps-1):.1}},{key:"transform",get:function(){return this._transform||(this._transform=this.node.getComponent(_)),this._transform}},{key:"handleTransform",get:function(){return this.handle?(this._handleTransform||(this._handleTransform=this.handle.node.getComponent(_)),this._handleTransform):null}},{key:"xy",get:function(){return this.axis==S.Horizontal?"x":"y"}},{key:"wh",get:function(){return this.axis==S.Horizontal?"width":"height"}},{key:"axis",get:function(){return this.direction==m.Left_To_Right||this.direction==m.Right_To_Left?S.Horizontal:S.Vertical}}]),i}(f)).prototype,"adapter",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(j.prototype,"handle",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(j.prototype,"direction",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.Top_To_Bottom}}),J=i(j.prototype,"interactable",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Q=i(j.prototype,"dragMinLimit",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=i(j.prototype,"dragMaxLimit",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Y=i(j.prototype,"_transition",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.None}}),i(j.prototype,"transition",[L],Object.getOwnPropertyDescriptor(j.prototype,"transition"),j.prototype),Z=i(j.prototype,"targetGraphic",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(j.prototype,"hoverSprite",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=i(j.prototype,"pressedSprite",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=i(j.prototype,"hoverColor",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.WHITE.clone()}}),et=i(j.prototype,"pressedColor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(211,211,211,255)}}),nt=i(j.prototype,"hoverScale",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(1,1)}}),rt=i(j.prototype,"pressedScale",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(1.2,1.2)}}),ot=i(j.prototype,"transitionDuration",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),at=i(j.prototype,"numberOfSteps",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),st=i(j.prototype,"enableAutoHide",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ht=i(j.prototype,"autoHideTime",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B=j))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./debug.ts","./enum.ts","./helper2.ts","./ViewManager.ts"],(function(t){"use strict";var e,i,n,a,r,o,s,h,l,c,_,d,u,p,g,v,f,y,E,O,M,T,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,h=t.Vec3,l=t.UITransform,c=t.Node,_=t.Widget,d=t.EventTouch,u=t.macro,p=t.easing},function(t){g=t.Manager},null,function(t){v=t.Orientation,f=t.TouchMode,y=t.MovementType,E=t.NestedDirection,O=t.ScrollDirection,M=t.Layer},function(t){T=t.Helper},function(t){m=t.ViewManager}],execute:function(){var A,S,w,b,P,N,C,L,D,x,H,R,z,I,U,k,V,F,B,G,X,W,Z,j,q,Y,K,J,Q,$,tt;o._RF.push({},"6000cNyEYlC4aj/Efw70/yK","ScrollManager",void 0);var et,it=s.ccclass,nt=s.property,at=new h,rt=t("ADAPTER","__ADAPTER__");!function(t){t[t.ON_SCROLL=0]="ON_SCROLL",t[t.ON_UPDATE_PERCENTAGE=1]="ON_UPDATE_PERCENTAGE",t[t.ON_VIEW_SIZE_CHANGED=2]="ON_VIEW_SIZE_CHANGED",t[t.ON_ABOUT_TO_STOP=3]="ON_ABOUT_TO_STOP",t[t.ON_SCROLL_START=4]="ON_SCROLL_START",t[t.ON_SCROLL_END=5]="ON_SCROLL_END",t[t.ON_SCROLL_CANCEL=6]="ON_SCROLL_CANCEL",t[t.ON_CHANGED_ORIENTATION=7]="ON_CHANGED_ORIENTATION",t[t.ON_SCROLL_TO_GROUPINDEX_BEFOR=8]="ON_SCROLL_TO_GROUPINDEX_BEFOR",t[t.ON_SCROLL_TO_GROUPINDEX_AFTER=9]="ON_SCROLL_TO_GROUPINDEX_AFTER",t[t.ON_SCROLL_TO_MODELINDEX_BEFOR=10]="ON_SCROLL_TO_MODELINDEX_BEFOR",t[t.ON_SCROLL_TO_MODELINDEX_AFTER=11]="ON_SCROLL_TO_MODELINDEX_AFTER"}(et||(et={}));t("ScrollManager",(A=it("ScrollManager"),S=nt(l),w=nt(l),b=nt(l),P=nt(l),N=nt({type:v}),C=nt({type:v,displayName:"滚动方向",tooltip:""}),L=nt({type:f,displayName:"触摸类型",tooltip:""}),D=nt({type:y,displayName:"移动类型",tooltip:""}),x=nt({range:[0,1],slide:!0,step:.001,displayName:"弹性系数",tooltip:"",visible:function(){return this.movementType==y.Elastic}}),H=nt({displayName:"惯性",tooltip:""}),R=nt({range:[0,1],slide:!0,step:.001,displayName:"减速率",tooltip:"",visible:function(){return this.inertia}}),z=nt({displayName:"停止速度阈值",tooltip:"当滚动速度小于这个值时，会发送ON_ABOUT_TO_STOP广播"}),I=nt({displayName:"取消子节点事件",tooltip:"取消子节点的Button点击事件"}),U=nt({range:[0,.5],slide:!0,step:.001,displayName:"最小嵌套阈值",visible:function(){return this.inertia}}),k=nt({range:[.5,1],slide:!0,step:.001,displayName:"最大嵌套阈值",visible:function(){return this.inertia}}),A(((tt=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"_view",B,a(e)),n(e,"_content",G,a(e)),n(e,"_orientation",X,a(e)),n(e,"touchMode",W,a(e)),n(e,"movementType",Z,a(e)),n(e,"elasticity",j,a(e)),n(e,"inertia",q,a(e)),n(e,"decelerationRate",Y,a(e)),n(e,"aboutToStopVelocity",K,a(e)),n(e,"cancelInnerEvents",J,a(e)),n(e,"nestedMinThreshold",Q,a(e)),n(e,"nestedMaxThreshold",$,a(e)),e.__debug_graphics=void 0,e._boundaryOffset=0,e._viewWidget=null,e._parentAdapter=void 0,e._layerLowest=void 0,e._layerMedium=void 0,e._layerHighest=void 0,e._percentage=0,e._velocity=0,e._dragging=!1,e._scrolling=!1,e._isCanceledEvent=!1,e._contentStartPosition=new h,e._prevContentPosition=new h,e._nestedDirection=E.Both,e._parentTouch=!1,e._stopCheckNested=!1,e._scrollHandlePercentage=null,e._scrollHandlePosition=null,e._isEmitAboutToStop=!1,e._isMyEventAndMoved=!1,e._scrollDirection=O.None,e._laseScrollDirection=O.None,e._touchEvent=null,e.test=!1,e}i(e,t);var o=e.prototype;return o.onInit=function(){var t=this;this._initView(),this._initContent(),this._parentAdapter=this.adapter.getParentAdapter(this.adapter.node.parent),this.view.node[rt]=!0,this.adapter.viewManager.on(m.Event.ON_UPDATE_VIEWS,this._onUpdateViews,this),this.adapter.viewManager.on(m.Event.ON_CHANGED_VIRTUALSIZE,this._onChangedVirtualSize,this),this.adapter.viewManager.on(m.Event.ON_CHANGED_OVERFLOWHEADER,this._onChangedOverflowHeader,this),this.adapter.viewManager.on(m.Event.ON_RESET_ALL_STATE,this._onResetAllState,this),this.adapter.viewManager.on(m.Event.ON_CLEARVIEWS,this._onResetAllState,this),this.adapter.node.on(c.EventType.SIZE_CHANGED,this._onAdapterSizeChanged,this),this.view.node.on(c.EventType.SIZE_CHANGED,this._onViewSizeChanged,this),this._registerTouchEvent(),this.__createDebug(),this.view.scheduleOnce((function(){t._updatePercentage()}))},o._initView=function(){if(!this.view)throw Error("ScrollManager view 参数为空！");var t={x:.5,y:.5};t[this.adapter.mainAxis]=this.adapter.mainAxisAnchorPoint,this.view.setAnchorPoint(t.x,t.y);var e=this.view.getComponent(_);e||((e=this.view.addComponent(_)).isAlignLeft=e.isAlignRight=e.isAlignTop=e.isAlignBottom=!0,e.left=e.right=e.top=e.bottom=0),e.updateAlignment(),this._viewWidget=e},o.__createDebug=function(){},o.__drawDebug=function(){if(this.__debug_graphics){this.__debug_graphics.clear();var t=this.adapter.mainAxis,e=this.adapter.crossAxis,i=this.adapter.multiplier,n={x:0,y:0},a={x:0,y:0};a[t]=this.adapter.viewManager.virtualSize,a[e]=this.adapter.crossAxisSize,n[t]=this.contentPosition-a[t]*this.content.anchorPoint[t]*i,n[t]+=this.adapter.viewManager.overflowHeader,n[e]-=a[e]*this.view.anchorPoint[e],this.__debug_graphics.fillRect(n.x,n.y,a.x,a.y),this.__debug_graphics.stroke()}},o._initContent=function(){if(!this.content)throw Error("ScrollManager content 参数为空！");this.content.setAnchorPoint(this.view.anchorPoint);var t={x:0,y:0};t[this.adapter.crossAxis]=this.view.contentSize[this.adapter.crossAxis],this.content.setContentSize(t.x,t.y),this._layerLowest||(this._layerLowest=new c("_layerLowest"),this._layerMedium=new c("_layerMedium"),this._layerHighest=new c("_layerHighest"),this.content.node.addChild(this._layerLowest),this.content.node.addChild(this._layerMedium),this.content.node.addChild(this._layerHighest)),this._updateContentPosition({x:0,y:0})},o._registerTouchEvent=function(){this.view.node.on(c.EventType.TOUCH_START,this._onTouchStart,this,!0),this.view.node.on(c.EventType.TOUCH_END,this._onTouchEnd,this,!0),this.view.node.on(c.EventType.TOUCH_CANCEL,this._onTouchCancel,this,!0),this.view.node.on(c.EventType.TOUCH_MOVE,this._onTouchMove,this,!0)},o._bubbleToParent=function(t){this._parentAdapter&&this._parentAdapter.scrollManager.view.node.dispatchEvent(t)},o._emitCancelEvent=function(t){if(!this._isCanceledEvent){var e=t.getUILocation();e.subtract(t.getUIStartLocation()),this.cancelInnerEvents&&e.length()>7&&t.target!==this.view.node&&(this._simulateEvent(t,c.EventType.MOUSE_LEAVE),this._simulateEvent(t,c.EventType.TOUCH_CANCEL),this._isCanceledEvent=!0)}},o._simulateEvent=function(t,e,i){if(void 0===i&&(i=!0),t){var n=new d(t.getTouches(),t.bubbles,e),a=t.target;n.type=e,n.touch=t.touch,n.simulate=i,a.dispatchEvent(n)}},o._onUpdateViews=function(){this._velocity=0,this._updatePercentage()},o._onChangedVirtualSize=function(){this._updatePercentage(),null!=this._scrollHandlePosition&&null!=this._scrollHandlePosition.change&&this._scrollHandlePosition.change()},o._onChangedOverflowHeader=function(t){this.__drawDebug()},o._onResetAllState=function(){this._velocity=0,this._scrolling=!1,this._dragging=!1,this._isMyEventAndMoved=!1,this._scrollDirection=O.None,this._percentage=0,this._isEmitAboutToStop=!1,this._boundaryOffset=0,this._isCanceledEvent=!1,this._parentTouch=!1,this._stopCheckNested=!1,this._scrollDirection=O.None,this._touchEvent=null,this.stopScroll(),this._initView(),this._initContent()},o._onAdapterSizeChanged=function(){this._viewWidget.updateAlignment()},o._onViewSizeChanged=function(){this.emit(et.ON_VIEW_SIZE_CHANGED)},o._isMyEvent=function(t,e){return t.eventPhase==d.AT_TARGET||!e||e[0]==this.view.node&&!t.target[rt]},o._onTouchStart=function(t){this._velocity=0,this._dragging=!0,this._isMyEventAndMoved=!1,this._isCanceledEvent=!1,this._parentTouch=!1,this._stopCheckNested=!1,this._isEmitAboutToStop=!1,this._scrollDirection=O.None,this._contentStartPosition.set(this.content.node.position),this._touchEvent=t,this.stopScroll(),this._calcNestedDirection(),this.emit(et.ON_SCROLL_START)},o._onTouchEnd=function(t,e){this._dragging=!1,this._touchEvent=null,this.emit(et.ON_SCROLL_END,t)},o._onTouchCancel=function(t,e){t.simulate||(this._dragging=!1,this._touchEvent=null,this.emit(et.ON_SCROLL_CANCEL,t))},o._onTouchMove=function(t,e){if(this._isMyEvent(t,e)){if(this._emitCancelEvent(t),this._parentTouch||!this.canTouch)return this._bubbleToParent(t);if(this._touchEvent){var i=this.adapter.mainAxis,n=t.getUILocation(),a=t.getUIStartLocation(),r=n.subtract(a);if(!r.equals2f(0,0)){var o={x:0,y:0};o[i]=this._contentStartPosition[i]+r[i];var s=o[i]-this.contentPosition,h=this.calcOffset(s),l=this.adapter.isHorizontal?-1:1;o[i]+=l*h,this.movementType==y.Elastic&&0!=h&&(o[i]-=l*this._rubberDelta(h,this.adapter.mainAxisSize)),this._checkNested(t,o,this._parentAdapter),this._parentTouch?this._bubbleToParent(t):(this._isMyEventAndMoved=!0,this._updateContentPosition(o))}}}},o._calcNestedDirection=function(){this._parentAdapter&&(this.percentage<=this.nestedMinThreshold&&!this.adapter.viewManager.loopHeader?this._nestedDirection=1==this.adapter.multiplier?E.Footer:E.Header:this.percentage>=this.nestedMaxThreshold&&!this.adapter.viewManager.loopFooter?this._nestedDirection=1==this.adapter.multiplier?E.Header:E.Footer:this._nestedDirection=E.Both)},o._checkNested=function(t,e,i){if(i&&!this._stopCheckNested){if(this.orientation==i.scrollManager.orientation){var n=e[this.adapter.mainAxis]-this._contentStartPosition[this.adapter.mainAxis];if(Math.abs(n)<=.1)return;this._nestedDirection==E.Footer?n<0&&(this._parentTouch=!0):this._nestedDirection==E.Header&&n>0&&(this._parentTouch=!0)}else{var a=0,r=0;if(t instanceof d){var o=t.getUIStartLocation(),s=t.getUILocation();a=Math.abs(o.x-s.x),r=Math.abs(o.y-s.y)}else a=Math.abs(t.getScrollX()),r=Math.abs(t.getScrollY());if(a==r)return;a>r?this.adapter.isVertical&&(this._parentTouch=!0):r>a&&this.adapter.isHorizontal&&(this._parentTouch=!0)}if(!this._parentTouch&&i.scrollManager.parentAdapter)return this._checkNested(t,e,i.scrollManager.parentAdapter);this._stopCheckNested=!0}},o._updateContentPosition=function(t,e){void 0===e&&(e=!0),this._updateScrollDirection(t),this.content.node.setPosition(t.x,t.y),this.emit(et.ON_SCROLL,this._scrollDirection),e?this._updatePercentage():this.__drawDebug()},o._updatePrevContentPosition=function(){this._prevContentPosition.set(this.content.node.position)},o._calcPercentage=function(t,e){var i=this.internal_getHiddenSize(),n=this.adapter.viewManager.loopHeader,a=this.adapter.viewManager.loopFooter,r=this.adapter.multiplier,o=this.adapter.viewManager.overflowHeader,s=t*r;if(this.adapter.isHorizontal?s-=e*r:s+=e*r,a)s+=(o+(i+=this.adapter.viewManager.spacing)*r)*r,this.adapter.centerManager.enabled?s+=this.adapter.centerManager.getContainerOffset():s+=this.adapter.paddingHeader,s+=1,s%=i;else if(n){s+=this.adapter.mainAxisSize-1,this.adapter.centerManager.enabled?s-=this.adapter.centerManager.getContainerOffset():s-=this.adapter.paddingFooter,s+=(o+i*r)*r,t*-r>o*r&&(s+=this.adapter.viewManager.spacing),s%=i}else s+=o*r,this.adapter.centerManager.enabled?s+=this.adapter.centerManager.getContainerOffset():s+=this.adapter.paddingHeader,s>i&&(s=i);return s/i},o._updatePercentage=function(){var t=this.calcOffset();this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this._percentage=0:this._percentage=this._calcPercentage(this.contentPosition,t),this.emit(et.ON_UPDATE_PERCENTAGE,this._percentage,t),this.__drawDebug()},o.internal_disableTouchTarget=function(t){if(this._touchEvent&&this._touchEvent.target==t){var e=this._touchEvent;this._simulateEvent(e,c.EventType.TOUCH_CANCEL,!1),this._simulateEvent(e,c.EventType.MOUSE_LEAVE,!1),this._touchEvent=null}},o.internal_getHiddenSize=function(){var t=this.adapter.viewManager.loopHeader,e=this.adapter.viewManager.loopFooter,i=this.adapter.viewManager.virtualSize;return t||e||this.adapter.centerManager.enabled||(i-=this.adapter.mainAxisSize,i+=this.adapter.mainAxisPadding),i},o._getContentMinBoundaryOffset=function(t,e){return!this.adapter.viewManager.header||!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this.adapter.isHorizontal?e+this._defaultMax+t:e+this._defaultMin+t:this.adapter.viewManager.min+t},o._getContentMaxBoundaryOffset=function(t,e){return!this.adapter.viewManager.header||!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this.adapter.isHorizontal?e+this._defaultMin+t:e+this._defaultMax+t:this.adapter.viewManager.max+t},o._getMaxBoundaryOffset=function(t){var e=this._viewMax;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?t:e+t:this.adapter.isArrangeAxisStart?-t:e-t},o._getMinBoundaryOffset=function(t){var e=this._viewMin;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?e+t:t:this.adapter.isArrangeAxisStart?e-t:-t},o._rubberDelta=function(t,e){return(1-1/(.55*Math.abs(t)/e+1))*e*Math.sign(t)},o._calcElastic=function(t,e,i){var n=this.adapter.mainAxis,a=this.elasticity;this._scrolling&&(a*=3);var r=this.adapter.isHorizontal?-1:1,o=T.smoothDamp(this.contentPosition,this.contentPosition+r*e,this._velocity,a,T.Infinity,t),s=o.velocity,h=o.position;Math.abs(s)<1&&(s=0),this._velocity=s,i[n]=h},o._calcInertia=function(t,e){this._velocity*=Math.pow(this.decelerationRate,t),Math.abs(this._velocity)<1&&(this._velocity=0),e[this.adapter.mainAxis]+=this._velocity*t},o._calcClamped=function(t){var e=this.adapter.mainAxis,i=t[e]-this.contentPosition,n=this.calcOffset(i);this.adapter.isHorizontal?t[e]-=n:t[e]+=n},o._updateScrollDirection=function(t){var e=t[this.adapter.mainAxis]-this.contentPosition;0!=e?(this.adapter.isHorizontal?this._scrollDirection=e>0?O.Right:O.Left:this._scrollDirection=e>0?O.Up:O.Down,this._laseScrollDirection=this._scrollDirection):this._scrollDirection=O.None},o.internal_setContentPosition=function(t,e){void 0===e&&(e=!0);var i={x:0,y:0};i[this.adapter.mainAxis]=t,this._updateContentPosition(i,e)},o.internal_lateUpdate=function(t){this.test||(this._autoScrolling(t),this._scrollHandler(t,this._scrollHandlePosition,this._scrollPositionHandler.bind(this)),this._scrollHandler(t,this._scrollHandlePercentage,this._scrollPercentageHandler.bind(this)))},o._autoScrolling=function(t){var e=this.calcOffset();if(this._boundaryOffset=e,this._dragging||0==e&&0==this._velocity||(this.content.node.getPosition(at),this.movementType==y.Elastic&&0!=e?this._calcElastic(t,e,at):this.inertia?this._calcInertia(t,at):this._velocity=0,this.movementType==y.Clamped&&this._calcClamped(at),this._updateContentPosition(at)),this._dragging&&this.inertia){var i=(this.contentPosition-this._prevContentPosition[this.adapter.mainAxis])/t;this._velocity=T.lerp(this._velocity,i,10*t)}this._prevContentPosition.equals(this.content.node.position)||this._updatePrevContentPosition(),!this._isEmitAboutToStop&&!this._dragging&&Math.abs(this._velocity)<=this.aboutToStopVelocity&&(this._scrollHandlePercentage||this._scrollHandlePosition||(this.emit(et.ON_ABOUT_TO_STOP,this._velocity),this._isEmitAboutToStop=!0)),this._scrolling=!1},o._scrollHandler=function(t,e,i){if(null!=e){e.deltaTime+=t;var n=e.deltaTime/(e.duration>u.FLT_EPSILON?e.duration:u.FLT_EPSILON);n=T.clamp01(n);var a=p.quintOut(n);e.current=T.progress(e.from,e.to,e.current,a),i(e,n)}},o._scrollPercentageHandler=function(t,e){var i=this.percentage;if(this.setPercentage(t.current),1==e||i==this.percentage){var n=!0;this._scrollHandlePercentage.stop&&(n=this._scrollHandlePercentage.stop()),n&&(this._scrollHandlePercentage=null)}},o._scrollPositionHandler=function(t,e){var i={x:0,y:0};i[this.adapter.mainAxis]=t.current,this._setAutoScroll(i),(1==e||Math.abs(this.contentPosition-t.to)<=1e-4)&&(this._scrollHandlePosition.stop&&this._scrollHandlePosition.stop(),this._scrollHandlePosition=null)},o._setAutoScroll=function(t){var e=this,i=function(t){e._updateContentPosition(t),e._updatePrevContentPosition(),e._velocity=0};i(t);var n=this.calcOffset();if(0!=n){var a=this.adapter.isHorizontal?-1:1;return t[this.adapter.mainAxis]+=n*a,i(t),!1}return!0},o._scrollToPosition=function(t,e,i){var n=this;if(!this.canAutoScroll)return!1;var a=e();return!(null==a||Math.abs(this.contentPosition-a)<u.FLT_EPSILON)&&(this._scrollHandlePercentage=null,this._scrollHandlePosition={current:0,from:this.contentPosition,to:a,deltaTime:0,duration:Math.max(0,t),change:function(){a=e(),n._scrollHandlePosition.to=a},stop:function(){i()}},!0)},o.getLayerNode=function(t){switch(t){case M.Medium:return this._layerMedium;case M.Highest:return this._layerHighest;default:return this._layerLowest}},o.scrollToModelIndex=function(t,e,i){var n=this,a=this.adapter.viewManager.getGroupIndexByModelIndex(e);if(-1!=a){var r=!1;this._scrollToPosition(t,(function(){var t=n.adapter.centerManager.getPositionByGroupIndex(a,i,r);return r=!0,t}),(function(){n.emit(et.ON_SCROLL_TO_MODELINDEX_AFTER,e)}))&&this.emit(et.ON_SCROLL_TO_MODELINDEX_BEFOR,e)}},o.scrollToGroupIndex=function(t,e,i){var n=this,a=!1;this._scrollToPosition(t,(function(){var t=n.adapter.centerManager.getPositionByGroupIndex(e,i,a);return a=!0,t}),(function(){n.emit(et.ON_SCROLL_TO_GROUPINDEX_AFTER,e)}))&&this.emit(et.ON_SCROLL_TO_GROUPINDEX_BEFOR,e)},o.scrollToHeader=function(t){this.scrollToGroupIndex(t,0)},o.scrollToFooter=function(t){this.scrollToGroupIndex(t,this.adapter.viewManager.groupLength-1)},o.scrollToPercentage=function(t,e){if(!this.canAutoScroll)return!1;Math.abs(this._percentage-e)<.001||(e=T.clamp01(e),t=Math.max(0,t),this._scrollHandlePercentage=null,this._scrollHandlePercentage={deltaTime:0,duration:t,current:0,from:this._percentage,to:e})},o.stopVelocity=function(){this._velocity=0},o.stopScroll=function(){this._scrollHandlePosition=null,this._scrollHandlePercentage=null,this.stopVelocity()},o.setPercentage=function(t){for(var e=this.internal_getHiddenSize(),i={x:0,y:0},n=0,a=null;n<100;){n++;var r=this._percentage-t;if(null!=a&&this._percentage===a)break;if(Math.abs(r)<u.FLT_EPSILON)break;a=this._percentage;var o=this.contentPosition-r*this.adapter.multiplier*e;if(i[this.adapter.mainAxis]=o,!this._setAutoScroll(i))break}100==n&&console.warn("循环次数已达最大值，尽量不要在滚动过程中频繁修改尺寸")},o.calcOffset=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.contentPosition);var i=0;if(this.movementType==y.Unrestricted)return i;var n=this._getContentMaxBoundaryOffset(t,e),a=this._getContentMinBoundaryOffset(t,e),r=this._getMaxBoundaryOffset(n),o=this._getMinBoundaryOffset(a);!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize&&(this.adapter.isVertical?(r-=this.adapter.viewManager.top,o+=this.adapter.viewManager.bottom):(r-=this.adapter.viewManager.left,o+=this.adapter.viewManager.right));var s=0,h=0;if(this.adapter.centerManager.enabled&&this.adapter.viewManager.groupLength>0)h=this.adapter.centerManager.max,s=this.adapter.centerManager.min;else{var l=this.adapter.viewManager.getMagneticOffset();r-=l,o-=l}return this.adapter.releaseManager.enabled&&(h=Math.max(h,this.adapter.releaseManager.max),s=Math.max(s,this.adapter.releaseManager.min)),r-=h,(o+=s)<-.001?i=o:r>.001&&(i=r),i},r(e,[{key:"view",get:function(){return this._view},set:function(t){this._view=t}},{key:"content",get:function(){return this._content},set:function(t){this._content=t}},{key:"orientation",get:function(){return this._orientation},set:function(t){t!=this._orientation&&(this._orientation=t,this.emit(et.ON_CHANGED_ORIENTATION))}},{key:"_viewMin",get:function(){return-this.adapter.mainAxisSize}},{key:"_viewMax",get:function(){return this.adapter.mainAxisSize}},{key:"_defaultMin",get:function(){return 1==this.adapter.multiplier?-this.adapter.mainAxisSize:0}},{key:"_defaultMax",get:function(){return 1==this.adapter.multiplier?0:this.adapter.mainAxisSize}},{key:"isMyEventAndMoved",get:function(){return this._isMyEventAndMoved}},{key:"velocity",get:function(){return this._velocity}},{key:"scrollDirection",get:function(){return this._scrollDirection}},{key:"laseScrollDirection",get:function(){return this._laseScrollDirection}},{key:"percentage",get:function(){return this._percentage}},{key:"dragging",get:function(){return this._dragging}},{key:"boundaryOffset",get:function(){return this._boundaryOffset}},{key:"parentAdapter",get:function(){return this._parentAdapter}},{key:"canAutoScroll",get:function(){return!this.dragging&&this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize}},{key:"canTouch",get:function(){return this.touchMode==f.AlwaysAllow||this.touchMode!=f.Disabled&&(!!this.adapter.centerManager.enabled||(!!this.adapter.releaseManager.enabled||this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize))}},{key:"contentPosition",get:function(){return this.content.node.position[this.adapter.mainAxis]}}]),e}(g)).Event=et,B=e((F=tt).prototype,"_view",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(F.prototype,"view",[w],Object.getOwnPropertyDescriptor(F.prototype,"view"),F.prototype),G=e(F.prototype,"_content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(F.prototype,"content",[P],Object.getOwnPropertyDescriptor(F.prototype,"content"),F.prototype),X=e(F.prototype,"_orientation",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Vertical}}),e(F.prototype,"orientation",[C],Object.getOwnPropertyDescriptor(F.prototype,"orientation"),F.prototype),W=e(F.prototype,"touchMode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f.Auto}}),Z=e(F.prototype,"movementType",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.Elastic}}),j=e(F.prototype,"elasticity",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),q=e(F.prototype,"inertia",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Y=e(F.prototype,"decelerationRate",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.135}}),K=e(F.prototype,"aboutToStopVelocity",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),J=e(F.prototype,"cancelInnerEvents",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Q=e(F.prototype,"nestedMinThreshold",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.001}}),$=e(F.prototype,"nestedMaxThreshold",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.999}}),V=F))||V));o._RF.pop()}}}));

System.register("chunks:///_virtual/sensor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts","./player.ts"],(function(t){"use strict";var n,o,e,s,i,c,r,u,a;return{setters:[function(t){n=t.inheritsLoose,o=t.createClass},function(t){e=t.cclegacy,s=t._decorator,i=t.Collider2D,c=t.Contact2DType,r=t.Component},function(t){u=t.sortObjects},function(t){a=t.Player}],execute:function(){var l,p;e._RF.push({},"1c2c7pbxxRBE7KYTLLoC3+8","sensor",void 0);var h=s.ccclass;s.property,t("Sensor",h("Sensor")(((p=function(t){function e(){for(var n,o=arguments.length,e=new Array(o),s=0;s<o;s++)e[s]=arguments[s];return(n=t.call.apply(t,[this].concat(e))||this).objectList=[],n}n(e,t);var s=e.prototype;return s.start=function(){var t=this.getComponent(i);t&&(t.on(c.BEGIN_CONTACT,this.onBeginContact,this),t.on(c.END_CONTACT,this.onEndContact,this))},s.onBeginContact=function(t,n,o){this.objectList.push(n.node),n.node.position.x},s.onEndContact=function(t,n,o){this.objectList.remove(n.node)},s.update=function(t){u(this.objectList,[function(t){return t.position.x},!0],[function(t){return t.position.y},!0]),a.instance.attack(this.objectList)},o(e,null,[{key:"instance",get:function(){return this._instance}}]),e}(r))._instance=null,l=p))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/shader_area_display.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,o,n,s,a,p,u,c,h,l,y,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createClass},function(t){s=t.cclegacy,a=t._decorator,p=t.CCBoolean,u=t.CCFloat,c=t.Vec2,h=t.Node,l=t.UITransform,y=t.Sprite,f=t.Component}],execute:function(){var _,d,g,b,m,w,P,v,C,D,O,k,j,z,N,E;s._RF.push({},"bdad1cCNEVBIo0ZC8/lceF6","shader_area_display",void 0);var M=a.ccclass,F=a.property;t("shaderAreaDisplay",(_=M("shaderAreaDisplay"),d=F(p),g=F(u),b=F({type:u,group:{name:"可视区域参数"},displayName:"宽高比"}),m=F(u),w=F({type:u,group:{name:"可视区域参数"},displayName:"模糊程度"}),P=F(u),v=F({type:u,group:{name:"可视区域参数"},displayName:"半径"}),C=F(c),D=F({type:c,group:{name:"可视区域参数"},displayName:"中心点"}),_((e((k=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(e,"_ratio",j,o(e)),i(e,"_blur",z,o(e)),i(e,"_radius",N,o(e)),i(e,"_center",E,o(e)),e}r(e,t);var s=e.prototype;return s.setProp=function(t,e){this.sprite.getMaterialInstance(0).setProperty(t,e)},s.start=function(){this.node.on(h.EventType.TOUCH_MOVE,this.touchMoveEvent,this),this.refresh()},s.refresh=function(){this.radius=this._radius,this.blur=this._blur,this.radius=this._radius,this.center=this._center},s.touchMoveEvent=function(t){this._center.x+=t.getDeltaX()/this.node.getComponent(l).width,this._center.y-=t.getDeltaY()/this.node.getComponent(l).height,this.center=this._center},n(e,[{key:"_refresh",get:function(){return this.refresh(),!0}},{key:"ratio",get:function(){return this._ratio},set:function(t){this._ratio=t,this.setProp("wh_ratio",t)}},{key:"blur",get:function(){return this._blur},set:function(t){this._blur=t,this.setProp("blur",t)}},{key:"radius",get:function(){return this._radius},set:function(t){this._radius=t,this.setProp("radius",t)}},{key:"center",get:function(){return this._center},set:function(t){this._center=t,this.setProp("center",t)}},{key:"sprite",get:function(){return this.node.getComponent(y)}}]),e}(f)).prototype,"_refresh",[d],Object.getOwnPropertyDescriptor(k.prototype,"_refresh"),k.prototype),j=e(k.prototype,"_ratio",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),e(k.prototype,"ratio",[b],Object.getOwnPropertyDescriptor(k.prototype,"ratio"),k.prototype),z=e(k.prototype,"_blur",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),e(k.prototype,"blur",[w],Object.getOwnPropertyDescriptor(k.prototype,"blur"),k.prototype),N=e(k.prototype,"_radius",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),e(k.prototype,"radius",[v],Object.getOwnPropertyDescriptor(k.prototype,"radius"),k.prototype),E=e(k.prototype,"_center",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(.5,.5)}}),e(k.prototype,"center",[D],Object.getOwnPropertyDescriptor(k.prototype,"center"),k.prototype),O=k))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/shader_filter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,o,n,i,s,a,p,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.createClass},function(e){s=e.cclegacy,a=e._decorator,p=e.CCBoolean,l=e.Sprite,u=e.Component}],execute:function(){var c,y,h,f,g,_,b,w,m,v,z,d,O,B,D,P,j,k,F;s._RF.push({},"747295FLjVFIo3tnFpNdlNC","shader_filter",void 0);var C=a.ccclass,N=a.property;e("shaderFilter",(c=C("shaderFilter"),y=N(p),h=N({type:p,group:{name:"滤镜效果"},displayName:"置灰"}),f=N({type:p,group:{name:"滤镜效果"},displayName:"褐色"}),g=N({type:p,group:{name:"滤镜效果"},displayName:"反相"}),_=N({type:p,group:{name:"滤镜效果"},displayName:"冰冻"}),b=N({type:p,group:{name:"滤镜效果"},displayName:"卡通"}),w=N(p),m=N(p),v=N(p),z=N(p),d=N(p),c((t((B=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,o(t,"_brown",D,n(t)),o(t,"_reversal",P,n(t)),o(t,"_frozen",j,n(t)),o(t,"_cartoon",k,n(t)),o(t,"_gray",F,n(t)),t}r(t,e);var s=t.prototype;return s.setBlur=function(e,t){this.sprite.getMaterialInstance(0).setProperty(e,t?1:0)},s.start=function(){this.refresh()},s.refresh=function(){this.brown=this._brown,this.reversal=this._reversal,this.frozen=this._frozen,this.cartoon=this._cartoon,this.gray=this._gray},i(t,[{key:"_refresh",get:function(){return this.refresh(),!0}},{key:"gray",get:function(){return this._gray},set:function(e){this._gray=!!e,this.setBlur("useGray",!!e)}},{key:"brown",get:function(){return this._brown},set:function(e){this._brown=!!e,this.setBlur("useBrown",!!e)}},{key:"reversal",get:function(){return this._reversal},set:function(e){this._reversal=!!e,this.setBlur("useReversal",!!e)}},{key:"frozen",get:function(){return this._frozen},set:function(e){this._frozen=!!e,this.setBlur("useFrozen",!!e)}},{key:"cartoon",get:function(){return this._cartoon},set:function(e){this._cartoon=!!e,this.setBlur("useCartoon",!!e)}},{key:"sprite",get:function(){return this.node.getComponent(l)}}]),t}(u)).prototype,"_refresh",[y],Object.getOwnPropertyDescriptor(B.prototype,"_refresh"),B.prototype),t(B.prototype,"gray",[h],Object.getOwnPropertyDescriptor(B.prototype,"gray"),B.prototype),t(B.prototype,"brown",[f],Object.getOwnPropertyDescriptor(B.prototype,"brown"),B.prototype),t(B.prototype,"reversal",[g],Object.getOwnPropertyDescriptor(B.prototype,"reversal"),B.prototype),t(B.prototype,"frozen",[_],Object.getOwnPropertyDescriptor(B.prototype,"frozen"),B.prototype),t(B.prototype,"cartoon",[b],Object.getOwnPropertyDescriptor(B.prototype,"cartoon"),B.prototype),D=t(B.prototype,"_brown",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(B.prototype,"_reversal",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(B.prototype,"_frozen",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(B.prototype,"_cartoon",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(B.prototype,"_gray",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=B))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/shader_obscure.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,s,o,n,a,u,p,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,s=e.assertThisInitialized,o=e.createClass},function(e){n=e.cclegacy,a=e._decorator,u=e.CCBoolean,p=e.CCInteger,l=e.Sprite,c=e.Component}],execute:function(){var y,g,h,b,_,f,m,P,d,B,w,O,L,D,k,j,z,v,C,N,I,M;n._RF.push({},"f0252L6StVIqroNT/2fUMFE","shader_obscure",void 0);var F=a.ccclass,G=a.property;e("shader_obscure",(y=F("shader_obscure"),g=G(u),h=G(u),b=G({type:u,displayName:"置灰"}),_=G(p),f=G({type:p,group:{name:"模糊"},displayName:"马赛克"}),m=G(u),P=G({type:u,group:{name:"模糊"},displayName:"高斯(低性能)"}),d=G(u),B=G({type:u,group:{name:"模糊"},displayName:"线性高斯13"}),w=G(u),O=G({type:u,group:{name:"模糊"},displayName:"简单模糊1"}),L=G(u),D=G({type:u,group:{name:"模糊"},displayName:"简单模糊2"}),y((t((j=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,i(t,"_gray",z,s(t)),i(t,"_mosaic",v,s(t)),i(t,"_gaussian",C,s(t)),i(t,"_gaussianBlurLinear13",N,s(t)),i(t,"_blur1",I,s(t)),i(t,"_blur2",M,s(t)),t}r(t,e);var n=t.prototype;return n.setProp=function(e,t){this.sprite.getMaterialInstance(0).setProperty(e,t)},n.start=function(){this.refresh()},n.refresh=function(){this.mosaic=this._mosaic,this.gaussian=this._gaussian,this.gaussianBlurLinear13=this._gaussianBlurLinear13,this.blur1=this._blur1,this.blur2=this._blur2,this.gray=this._gray},o(t,[{key:"_refresh",get:function(){return this.refresh(),!0}},{key:"gray",get:function(){return this._gray},set:function(e){this._gray=!!e,this.setProp("useGray",!!e)}},{key:"mosaic",get:function(){return this._mosaic},set:function(e){this._mosaic=e,this.setProp("useMosaic",e)}},{key:"gaussian",get:function(){return this._gaussian},set:function(e){this._gaussian=!!e,this.setProp("useGaussianBlur",!!e)}},{key:"gaussianBlurLinear13",get:function(){return this._gaussianBlurLinear13},set:function(e){this._gaussianBlurLinear13=!!e,this.setProp("useGaussianBlurLinear13",!!e)}},{key:"blur1",get:function(){return this._blur1},set:function(e){this._blur1=!!e,this.setProp("useBlur1",!!e)}},{key:"blur2",get:function(){return this._blur2},set:function(e){this._blur2=!!e,this.setProp("useBlur2",!!e)}},{key:"sprite",get:function(){return this.node.getComponent(l)}}]),t}(c)).prototype,"_refresh",[g],Object.getOwnPropertyDescriptor(j.prototype,"_refresh"),j.prototype),z=t(j.prototype,"_gray",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(j.prototype,"gray",[b],Object.getOwnPropertyDescriptor(j.prototype,"gray"),j.prototype),v=t(j.prototype,"_mosaic",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(j.prototype,"mosaic",[f],Object.getOwnPropertyDescriptor(j.prototype,"mosaic"),j.prototype),C=t(j.prototype,"_gaussian",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(j.prototype,"gaussian",[P],Object.getOwnPropertyDescriptor(j.prototype,"gaussian"),j.prototype),N=t(j.prototype,"_gaussianBlurLinear13",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(j.prototype,"gaussianBlurLinear13",[B],Object.getOwnPropertyDescriptor(j.prototype,"gaussianBlurLinear13"),j.prototype),I=t(j.prototype,"_blur1",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(j.prototype,"blur1",[O],Object.getOwnPropertyDescriptor(j.prototype,"blur1"),j.prototype),M=t(j.prototype,"_blur2",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(j.prototype,"blur2",[D],Object.getOwnPropertyDescriptor(j.prototype,"blur2"),j.prototype),k=j))||k));n._RF.pop()}}}));

System.register("chunks:///_virtual/shaderUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,n,a,s,o,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,o=t.Sprite,c=t.Component}],execute:function(){var l,p,u,h,f;a._RF.push({},"1bc0e8qV/VD/LmQJhXSwaPn","shaderUtil",void 0);var d=s.ccclass,y=s.property;t("shaderUtil",(l=d("shaderUtil"),p=y(o),l((f=e((h=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(e,"sprite",f,n(e)),e}r(e,t);var a=e.prototype;return a.start=function(){},a.update=function(t){},a.setDefault=function(t,e){var r=this.sprite.getMaterialInstance(0),i={};i[t]=e,r.recompileShaders(i)},a.setProp=function(t,e){this.sprite.getMaterialInstance(0).setProperty(t,e)},e}(c)).prototype,"sprite",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=h))||u));a._RF.pop()}}}));

System.register("chunks:///_virtual/Shape.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AILib.ts"],(function(t){"use strict";var e,i,s,r,n,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t.Vec3},function(t){r=t.obbIntersect,n=t.sphereAABBDistance,a=t.sphereOBBDistance}],execute:function(){var h;t("ShapeType",void 0),i._RF.push({},"83d94jbLnZF7oVs2WQ1jJK+","Shape",void 0),function(t){t[t.Box=1]="Box",t[t.Sphere=2]="Sphere",t[t.Capsule=4]="Capsule"}(h||(h=t("ShapeType",{})));var u=t("cShape",function(){function t(t,e){this.radius=0,this.height=0,this.type=h.Box,this.isDirty=!0,this.size={x:0,y:0,z:0},this.center={x:0,y:0,z:0},this.halfSize={x:0,y:0,z:0},this.aabb=[0,0,0,0,0,0],this.type=e,this.isDirty=!0,this.center.x=t.x,this.center.y=t.y,this.center.z=t.z}var e=t.prototype;return e.rotateAABB=function(t){var e=this.center,i=e.x,s=e.y,r=e.z,n=this.halfSize,a=n.x,h=n.y,u=n.z,o=t.m00,c=t.m01,z=t.m02,l=t.m03,f=t.m04,p=t.m05,S=t.m06,y=t.m07,x=t.m08,g=o*i+l*s+S*r,B=c*i+f*s+y*r,b=z*i+p*s+x*r,d=Math.abs(o)*a+Math.abs(l)*h+Math.abs(S)*u,C=Math.abs(c)*a+Math.abs(f)*h+Math.abs(y)*u,v=Math.abs(z)*a+Math.abs(p)*h+Math.abs(x)*u,A=this.aabb;return A[0]=g-d,A[1]=B-C,A[2]=b-v,A[3]=g+d,A[4]=B+C,A[5]=b+v,A},e.normalAABB=function(){if(this.isDirty){var t=this.aabb,e=this.halfSize,i=this.center,s=i.x,r=i.y,n=i.z;t[0]=s-e.x,t[1]=r-e.y,t[2]=n-e.z,t[3]=s+e.x,t[4]=r+e.y,t[5]=n+e.z,this.isDirty=!1}},e.updateAABB=function(t,e){void 0===e&&(e=!0),e||this.type==h.Sphere?(0!=s.lengthSqr(this.center)&&(this.isDirty=!0),this.normalAABB()):this.rotateAABB(t)},t}()),o=(t("cBox",function(t){function i(e,i){var s;return(s=t.call(this,e,h.Box)||this).size.x=i.x,s.size.y=i.y,s.size.z=i.z,s.halfSize.x=.5*i.x,s.halfSize.y=.5*i.y,s.halfSize.z=.5*i.z,s}return e(i,t),i}(u)),t("cSphere",function(t){function i(e,i){var s;return(s=t.call(this,e,h.Sphere)||this).radius=i,s.size.x=2*i,s.size.y=2*i,s.size.z=2*i,s.halfSize.x=i,s.halfSize.y=i,s.halfSize.z=i,s}return e(i,t),i}(u)),t("cCapsule",function(t){function i(e,i,s){var r;return(r=t.call(this,e,h.Capsule)||this).radius=i,r.height=s,r.size.x=2*i,r.size.y=2*s,r.size.z=2*i,r.halfSize.x=i,r.halfSize.y=s,r.halfSize.z=i,r}return e(i,t),i}(u)),new s),c=t("ShapeSupport",[]);c[h.Box|h.Box]=function(t,e){return!(!t.isIdentity||!e.isIdentity)||r(t.getCenter(),t.getHalfSize(),t.getRotMat3(),e.getCenter(),e.getHalfSize(),e.getRotMat3())},c[h.Box|h.Sphere]=function(t,e){return t.isIdentity?(s.subtract(o,e.getCenter(),t.getCenter()),n(o,e.getRaidus(),t.getHalfSize())):a(e.getCenter(),e.getRaidus(),t.getCenter(),t.getRotation(),t.getHalfSize())},c[h.Sphere|h.Sphere]=function(t,e){var i=t.getCenter(),r=e.getCenter();s.subtract(o,i,r);var n=o.lengthSqr(),a=t.getRaidus()+e.getRaidus();return n<=a*a},c[h.Box|h.Capsule]=function(t,e){return!0},c[h.Sphere|h.Capsule]=function(t,e){return!0},c[h.Capsule|h.Capsule]=function(t,e){return!0},i._RF.pop()}}}));

System.register("chunks:///_virtual/test.ts",["./rollupPluginModLoBabelHelpers.js","cc","./data.ts"],(function(t){"use strict";var e,i,n,r,o,a,s,c,u,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Node,c=t.EditBox,u=t.Component},function(t){l=t.Data}],execute:function(){var p,f,h,d,y,D,b;o._RF.push({},"0c3fdGTibRGJro3ilAW6McO","test",void 0);var v=a.ccclass,g=a.property;t("test",(p=v("test"),f=g(s),h=g(c),p((D=e((y=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"show",D,r(e)),n(e,"input",b,r(e)),e}i(e,t);var o=e.prototype;return o.start=function(){var t=new l("123");this.show.bindData(t),this.input.node.on(c.EventType.EDITING_DID_ENDED,(function(e){t.set(e.string)}),this)},o.update=function(t){},e}(u)).prototype,"show",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=e(y.prototype,"input",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=y))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/test2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,i,n,o,s,c,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,c=t.WebView,a=t.Component}],execute:function(){var u,l,p,b,f;o._RF.push({},"a3b9bxrw1xL4ZwhVA1YQ29b","test",void 0);var h=s.ccclass,y=s.property;t("test",(u=h("test"),l=y(c),u((f=e((b=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,i(e,"web",f,n(e)),e}r(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){},o.setWebUrl=function(t){this.web.url=t.string},e}(a)).prototype,"web",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=b))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/test3.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,n,s,r,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,s=t.resources,r=t.error,c=t.sp,i=t.Component}],execute:function(){var u;o._RF.push({},"55c84xMVqZKw5XqD6iwZBmS","test",void 0);var a=n.ccclass;n.property,t("test",a("test")(u=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.start=function(){},n.loadJson=function(t){var e=this;s.load(t,(function(t,o){if(t)r(t.message||t);else{o.json;console.log(o),e.node.addComponent(c.Skeleton)}}))},n.update=function(t){},o}(i))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/tiled.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,n,e,i,r,s,c,a;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,i=t.Collider2D,r=t.Contact2DType,s=t.v2,c=t.PhysicsSystem,a=t.Component}],execute:function(){var h;n._RF.push({},"ae89f6ShwRNLKQoDb+h+M2M","tiled",void 0);var l=e.ccclass;e.property,t("MapTiled",l("MapTiled")(h=function(t){function n(){for(var o,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(o=t.call.apply(t,[this].concat(e))||this).PLAYER=c.PhysicsGroup.player,o.refreshCB=function(){},o}o(n,t);var e=n.prototype;return e.start=function(){var t=this.getComponent(i);t&&t.on(r.BEGIN_CONTACT,this.onBeginContact,this)},e.onBeginContact=function(t,o,n){this.refreshCB(s(Math.floor(this.node.position.x/512),Math.floor(this.node.position.y/512)))},e.setInit=function(t,o,n){this.node.parent=t,this.node.setPosition(o)},n}(a))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(r){"use strict";var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){r({shuffle:function(r){},sortObject:function(r,n,t){void 0===t&&(t=!0);var o=[];for(var e in r)o.push(r[e]);return o.sort((function(r,o){return t?r[n]-o[n]:o[n]-r[n]})),o},sortObjectByKeys:function(r,n,t){void 0===t&&(t=[]);var o=[];for(var e in r)o.push(r[e]);return o.sort((function(r,o){for(var e=0,f=0;f<n.length;f++){var u=n[f];if(0!=(e=t[f]?r[u]-o[u]:o[u]-r[u]))return e}return e})),o},sortObjects:function(r){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];function e(r,n){for(var o=0;o<t.length;o++){var e=void 0,f=void 0;if("function"==typeof t[o][0]?(e=t[o][0](r),f=t[o][0](n)):(e=r[t[o][0]],f=n[t[o][0]]),e>f)return t[o][1];if(e<f)return-t[o][1]}return 0}t=t.map((function(r){return r instanceof Array||(r=[r,!0]),r[1]?r[1]=1:r[1]=-1,r})),r.sort((function(r,n){return e(r,n)}))},sortObjects1:function(r){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];function e(r,n,o){return void 0===o&&(o=0),o>=t.length?0:("function"==typeof t[o][0]?(f=t[o][0](r),u=t[o][0](n)):(f=r[t[o][0]],u=n[t[o][0]]),f>u?t[o][1]:f<u?-t[o][1]:e(r,n,o+1));var f,u}function f(r,n,t){for(var o=n+1;o<=t;o++){for(var f=r[o],u=o-1;u>=n&&e(r[u],f)>0;)r[u+1]=r[u],u--;r[u+1]=f}}function u(r,n,t){if(!(n>=t))if(t-n+1<=10)f(r,n,t);else{for(var o=r[Math.floor((n+t)/2)],i=n,c=t;i<=c;){for(;e(r[i],o)<0;)i++;for(;e(r[c],o)>0;)c--;if(i<=c){var a=[r[c],r[i]];r[i]=a[0],r[c]=a[1],i++,c--}}u(r,n,c),u(r,i,t)}}t=t.map((function(r){return r instanceof Array||(r=[r,!0]),r[1]?r[1]=1:r[1]=-1,r})),u(r,0,r.length-1)}}),n._RF.push({},"64a79qVQ1RHOozh4/Ile1Fy","utils",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/view.ts",["./rollupPluginModLoBabelHelpers.js","cc","./list.ts"],(function(e){"use strict";var t,i,n,o,a,r,l,s,h,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.EditBox,s=e.Node,h=e.Button,c=e.Component},function(e){p=e.ChatListView}],execute:function(){var u,g,d,m,f,b,w,y,v,T,C,L,M,_,V,I,S;a._RF.push({},"447a4LKW7dMj4Tkl4vpbIZa","view",void 0);var z=r.ccclass,k=r.property;e("ChatView",(u=z("ChatView"),g=k(p),d=k(l),m=k(s),f=k(s),b=k(s),w=k(s),y=k(s),u((C=t((T=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"pageView",C,o(t)),n(t,"editInput",L,o(t)),n(t,"nodeSend",M,o(t)),n(t,"nodeTab1",_,o(t)),n(t,"nodeTab2",V,o(t)),n(t,"nodeTab3",I,o(t)),n(t,"nodeTab4",S,o(t)),t._nowList=[],t._msg={},t}i(t,e);var a=t.prototype;return a.start=function(){var e=this;this._msg["世界"]=this.getRandomList(1),this._msg["私人"]=this.getRandomList(2),this._msg["工会"]=this.getRandomList(3),this._msg["系统"]=this.getRandomList(4),this._nowList=this._msg["世界"],this.pageView.modelManager.insert(this._nowList),this.pageView.scrollManager.scrollToFooter(.5),this.nodeSend.on(h.EventType.CLICK,this.onSend,this),this.nodeTab1.on(h.EventType.CLICK,(function(){e.onClickSwitch("系统")}),this),this.nodeTab2.on(h.EventType.CLICK,(function(){e.onClickSwitch("私聊")}),this),this.nodeTab3.on(h.EventType.CLICK,(function(){e.onClickSwitch("工会")}),this),this.nodeTab4.on(h.EventType.CLICK,(function(){e.onClickSwitch("世界")}),this)},a.onClickSwitch=function(e){this.pageView.modelManager.clear(),this.pageView.modelManager.insert(this._msg[e]),this.pageView.scrollManager.scrollToFooter(.5)},a.onSend=function(){var e={type:1,name:"我",msg:this.editInput.string,head:""};this.pageView.modelManager.insert(e),this.editInput.string="",this.pageView.scrollManager.scrollToFooter(.5)},a.getRandomList=function(e){var t=[],i=["<color=#0000ff>10:59</color>","恭喜玩家<color=#00ff00>蔡徐坤</color>获得神器<color=#ff0000>红莲铠甲</color>","您已通过第<color=#00ff00>10</color>关"][~~(3*Math.random())],n=["大佬们,第5关怎么过?","有没有兑换码?","工会招人拉!","这么多人?","你说的对,但是<color=#0000ff>口袋觉醒</color>是一款宝可梦次世代挂机手游,使用先进的UE9技术,带给你沉浸的体验.","游戏里实际只有我一个人,不信我换号给你发","游戏里实际只有我一个人,不信我换号给你发","游戏里实际只有我一个人,不信我换号给你发","游戏里实际只有我一个人,不信我换号给你发"],o=["兄弟,出号吗?","这号500我要了","加我微信"],a=["晚上7点打本,缺勤三次飞机","收到","收到","收到","体力不够怎么办?","打游戏比上班还累...佛了"],r=["已通关 1-1","已通关 1-2","已通关 1-3","已通关 1-4","已通关 1-5","已通关 1-6","已通关 1-7"],l=["及你太美","王德法","吴联编","吃个涛涛","夭寿啦","二师兄","无良天尊","良心"];if(1==e)for(var s=0;s<99;s++)s%9==0?t.push({type:2,msg:i[~~(i.length*Math.random())],head:"",name:""}):t.push({type:s%15==0?1:0,name:l[~~(l.length*Math.random())],msg:n[~~(n.length*Math.random())],head:""});else if(2==e)for(var h=0;h<3;h++){var c=l[~~(l.length*Math.random())];t.push({type:0,name:c,msg:o[h%o.length],head:""})}else if(3==e)for(var p=0;p<3;p++)t.push({type:0,name:l[~~(l.length*Math.random())],msg:a[p%a.length],head:""});else if(4==e)for(var u=0;u<3;u++)t.push({type:2,name:"系统",msg:r[u%r.length],head:""});return t},t}(c)).prototype,"pageView",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(T.prototype,"editInput",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(T.prototype,"nodeSend",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(T.prototype,"nodeTab1",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(T.prototype,"nodeTab2",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(T.prototype,"nodeTab3",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(T.prototype,"nodeTab4",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=T))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/view2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Collider.ts","./ghost.ts","./player.ts"],(function(e){"use strict";var i,t,n,r,a,o,l,u,s,c,p,f,m,y,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,l=e._decorator,u=e.Vec3,s=e.Node,c=e.Prefab,p=e.CCInteger,f=e.Component},function(e){m=e.cCollider},function(e){y=e.Ghost},function(e){h=e.Player}],execute:function(){var b,g,d,w,v,z,C,x,P,_,k,E,M,N,S,T,V,B,D,G,H,I,L,j;o._RF.push({},"99d907jmOBH96SVoBIo3hH0","view",void 0);var F=l.ccclass,R=l.property,A=new u;e("GameView",(b=F("GameView"),g=R(s),d=R(h),w=R(s),v=R(s),z=R(s),C=R(c),x=R(c),P=R({type:p,group:"Enemy Config"}),_=R({group:"Enemy Config"}),k=R({group:"Enemy Config"}),b(((j=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return i=e.call.apply(e,[this].concat(a))||this,n(i,"camera",N,r(i)),n(i,"player",S,r(i)),n(i,"effect",T,r(i)),n(i,"enemy",V,r(i)),n(i,"showNum",B,r(i)),n(i,"skills",D,r(i)),n(i,"ghost",G,r(i)),n(i,"max",H,r(i)),n(i,"raidus",I,r(i)),n(i,"cyclTime",L,r(i)),i}t(i,e);var o=i.prototype;return o.onLoad=function(){i._instance=this},o.start=function(){var e=this;this.schedule((function(){if(e.enemy.children.length<e.max){var i=360*Math.random(),t=Math.cos(i),n=Math.sin(i);e.createEnemy(t,n),e.showNum.setStr("敌人数量："+e.enemy.children.length)}}),this.cyclTime)},o.createEnemy=function(e,i){var t=h.instance.node.getPosition();A.x=(e-.5)*this.raidus+t.x,A.y=(i-.5)*this.raidus+t.y,A.z=0;var n=y.get(this.ghost);n.node.parent=this.enemy,n.node.setPosition(A)},o.getSkill=function(e){return this.skills.find((function(i){return i.name==e}))},o.update=function(e){m.inst.update(e)},o.lateUpdate=function(e){var i=this.player.node.position;u.lerp(A,this.camera.position,i,.25),this.camera.setPosition(A.x,A.y,this.camera.position.z)},a(i,null,[{key:"instance",get:function(){return this._instance}}]),i}(f))._instance=null,N=i((M=j).prototype,"camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=i(M.prototype,"player",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(M.prototype,"effect",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=i(M.prototype,"enemy",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(M.prototype,"showNum",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(M.prototype,"skills",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=i(M.prototype,"ghost",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(M.prototype,"max",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),I=i(M.prototype,"raidus",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2e3}}),L=i(M.prototype,"cyclTime",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),E=M))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/View3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./debug.ts","./enum.ts","./helper2.ts","./LayoutManager.ts","./ViewManager.ts"],(function(e){"use strict";var t,i,a,r,s,n,o,h;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,a=e._decorator},function(e){r=e.DEBUG_DRAW_LIND_WIDTH},function(e){s=e.WrapMode},function(e){n=e.Helper},function(e){o=e.LayoutManager},function(e){h=e.ViewManager}],execute:function(){var l;i._RF.push({},"20c27Yt8z5L9bZJqa8MgjS3","View",void 0);var d=a.ccclass;a.property,e("View",d("View")(l=function(){function e(e){this.__debug_graphics=void 0,this._adapter=void 0,this._total=0,this._innerSize=0,this._group=null,this._holderList=[],this._isOverflowFixed=void 0,this._adapter=e,this.internal_reset(),this.__createDebug()}var i=e.prototype;return i.__createDebug=function(){},i.__drawDebug=function(){if(this.__debug_graphics&&this.group){this.__debug_graphics.clear();var e=this.adapter.mainAxis,t=this.adapter.crossAxis,i={x:0,y:0},a={x:this.group.size.x,y:this.group.size.y},s={x:this.group.anchorPoint.x,y:this.group.anchorPoint.y};i[e]=this.group.position[e]-a[e]*s[e],i[e]+=.5*r,i[t]=this.group.position[t]-a[t]*(1-s[t]),i[t]+=.5*r,a[e]-=r,a[t]-=r,this.__debug_graphics.roundRect(i.x,i.y,a.x,a.y,2),this.__debug_graphics.stroke()}},i.getFixedHolders=function(){if(!this.group.isFixed)return[];for(var e=[],t=this.holderList.length,i=0;i<t;i++){var a=this.holderList[i];a.model.element.fixed&&e.push(a)}return e},i.internal_isWrap=function(e,t){var i=!1,a=t&&t.models[t.models.length-1];if(a)switch(e.element.wrapBeforeMode){case s.Wrap:i=!0;break;case s.Nowrap:i=a.element.wrapAfterMode==s.Wrap;break;case s.Auto:(i=a.element.wrapAfterMode==s.Wrap)||(i=this._calculateInnerSize(e,t))}return i},i.internal_reset=function(){this._group=null,this._innerSize=0,this._total=0,this._holderList.length=0,this._isOverflowFixed=!0,this.__debug_graphics&&this.__debug_graphics.clear()},i.internal_push=function(e){this._total++;var t=this.adapter.crossAxis;(!e.element.ignoreLayout||e.element.ignoreLayout&&e.element.placeholder)&&(0!=this._innerSize&&(this._innerSize+=this.adapter.layoutManager.spacing),this._innerSize+=e.size[t])},i.internal_recycleHolders=function(e){for(var t=0;t<this._holderList.length;t++){var i=this._holderList[t];i.internal_disable(),e(i)}this._holderList.length=0},i.internal_visible=function(e,t){this._group=e,this.register(),this._createHolders(t),this.adapter.layoutManager.layout(this.group),this.onVisible()},i.internal_disable=function(){this.adapter.layoutManager.unLayout(this.index),this.unregister(),this.onDisable(),this.internal_reset()},i.internal_holderChanged=function(e){var t=!0,i=this.adapter.mainAxis,a=this.group.size[i];if(!e){for(var r=0,s=0;s<this.group.models.length;s++){var o=this.group.models[s],h=o.size[i];(this.adapter.isVertical&&this.adapter.layoutManager.controlScaleHeight||this.adapter.isHorizontal&&this.adapter.layoutManager.controlScaleWidth)&&(h*=o.scale[i]),r=Math.max(r,h)}n.approximately(this.group.size[i],r)||(this.group.oldSize[i]=this.group.size[i],this.group.size[i]=r,t=!1)}t?this.adapter.layoutManager.layout(this.group):this.adapter.viewManager.internal_viewChanged(this,a)},i.register=function(){this.adapter.viewManager.on(h.Event.ON_SCROLL,this._onScroll,this),this.adapter.viewManager.on(h.Event.ON_LATEUPDATE,this._onLateUpdate,this),this.adapter.layoutManager.on(o.Event.ON_LAYOUT_COMPLATED,this._onLayoutComplated,this),this.adapter.layoutManager.on(o.Event.ON_CHANGED_LAYOUT_STATE,this._onChangedLayoutState,this)},i.unregister=function(){this.adapter.viewManager.off(h.Event.ON_SCROLL,this._onScroll,this),this.adapter.viewManager.off(h.Event.ON_LATEUPDATE,this._onLateUpdate,this),this.adapter.layoutManager.off(o.Event.ON_LAYOUT_COMPLATED,this._onLayoutComplated,this),this.adapter.layoutManager.off(o.Event.ON_CHANGED_LAYOUT_STATE,this._onChangedLayoutState,this)},i._createHolders=function(e){for(var t=this.adapter.mainAxis,i=0;i<this.group.models.length;i++){var a=this.group.models[i],r=!1,s=e&&e(a);s||(s=this.adapter.viewManager.internal_getHolder(a),r=!0),a.position[t]=this.group.position[t],s.internal_visible(this,a,r),this._holderList.push(s)}},i._calculateInnerSize=function(e,t){if(0==this._total)return!1;var i=e.size[this.adapter.crossAxis];return this._innerSize+i+this.adapter.layoutManager.spacing>t.size[this.adapter.crossAxis]},i._onLayoutComplated=function(e){if(-1!=e.indexOf(this.index)){for(var t=0;t<this.holderList.length;t++){this.holderList[t].internal_layout()}this.group.isFixed&&this._calcFixedPosition()}},i._calcFixedPosition=function(){for(var e=this._holderList.length,t=this.adapter.mainAxis,i=0;i<e;i++){var a=this._holderList[i];if(a.element.fixed){var r={x:a.model.position.x,y:a.model.position.y},s=0,n=this._getModelBoundary(a.model);if(this._isNeedFixed(n)){r[t]-=n;var o=this.adapter.viewManager.getNextFixedHolders(this.index);s=this._getRelativeNextHolderOffset(a,o)}r[t]+=s*this.adapter.multiplier,r[t]!=a.node.position[t]&&a.node.setPosition(r.x,r.y)}}},i._onChangedLayoutState=function(){this.adapter.layoutManager.layout(this.group)},i._onScroll=function(){this.group.isFixed&&0!=this._holderList.length&&this._calcFixedPosition()},i._onLateUpdate=function(e){},i._isNeedFixed=function(e){return 1==this.adapter.multiplier?e>=0:e<=0},i._getModelBoundary=function(e){var t=n.isNumber(e.element.fixedOffset)?e.element.fixedOffset:0;return 1==this.adapter.multiplier?this._getModelHeaderBoundary(e)+t:this._getModelFooterBoundary(e)-t},i._getModelHeaderBoundary=function(e){var t=this.adapter.mainAxis;return e.position[t]+e.size[t]*(1-e.anchorPoint[t])*e.scale[t]+this.adapter.scrollManager.contentPosition},i._getModelFooterBoundary=function(e){var t=this.adapter.mainAxis;return e.position[t]-e.size[t]*e.anchorPoint[t]*e.scale[t]+this.adapter.scrollManager.contentPosition},i._getModelSizeWithSpacing=function(e){var t=this.adapter.mainAxis,i=n.isNumber(e.element.fixedOffset)?e.element.fixedOffset:0,a=n.isNumber(e.element.fixedSpacing)?e.element.fixedSpacing:this.adapter.viewManager.spacing;return e.size[t]*e.scale[t]+i+a},i._getReatureRelativeBoundary=function(e,t){var i=1==this.adapter.multiplier?this._getModelHeaderBoundary(e):this._getModelFooterBoundary(e),a=1==this.adapter.multiplier?i+t:t-i;return Math.min(a,t)},i._getRelativeNextHolderOffset=function(e,t){for(var i=t.length,a=this.adapter.crossAxis,r=this._getModelSizeWithSpacing(e.model),s=0,n=0;n<i;n++){var o=t[n],h=this._getReatureRelativeBoundary(o.model,r),l=e.model.scale[a]==o.model.scale[a],d=e.model.size[a]==o.model.size[a];if(e.fixedIndex==o.fixedIndex&&l&&d){s=h>0?h:0;break}h>0&&(s=Math.max(s,h))}return s},t(e,[{key:"isOverflowFixed",get:function(){return this._isOverflowFixed}},{key:"adapter",get:function(){return this._adapter}},{key:"group",get:function(){return this._group}},{key:"holderList",get:function(){return this._holderList}},{key:"index",get:function(){return this.group?this.group.index:-1}}]),e}())||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/ViewManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Group.ts","./Manager.ts","./View3.ts","./enum.ts","./helper2.ts","./ModelManager.ts","./ScrollManager.ts"],(function(i){"use strict";var e,t,r,a,s,n,o,l,h,d,u,p,c,_,g,f,v,x;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,a=i.assertThisInitialized,s=i.createClass},function(i){n=i.cclegacy,o=i._decorator,l=i.instantiate},function(i){h=i.Group},function(i){d=i.Manager},function(i){u=i.View},function(i){p=i.ArrangeAxis,c=i.StretchDirection,_=i.MagneticDirection,g=i.ScrollDirection},function(i){f=i.Helper},function(i){v=i.ModelManager},function(i){x=i.ScrollManager}],execute:function(){var m,b,w,A,H,V,y,z,S,F,I,E,O,M,P,N,D,T,G,L,C,R,k,B,U,W,Z,j,q,J,K,Q,X,Y,$;n._RF.push({},"74bbbWBWzpGspxEpsEO9xIS","ViewManager",void 0);var ii,ei=o.ccclass,ti=o.property;!function(i){i[i.ON_SCROLL=0]="ON_SCROLL",i[i.ON_LATEUPDATE=1]="ON_LATEUPDATE",i[i.ON_CLEARVIEWS=2]="ON_CLEARVIEWS",i[i.ON_UPDATE_VIEWS=3]="ON_UPDATE_VIEWS",i[i.ON_CHANGED_VIRTUALSIZE=4]="ON_CHANGED_VIRTUALSIZE",i[i.ON_MAGNETIC=5]="ON_MAGNETIC",i[i.ON_CHANGED_OVERFLOWHEADER=6]="ON_CHANGED_OVERFLOWHEADER",i[i.ON_RESET_ALL_STATE=7]="ON_RESET_ALL_STATE",i[i.ON_CHANGED_SPACING=8]="ON_CHANGED_SPACING"}(ii||(ii={}));i("ViewManager",(m=ei("ViewManager"),b=ti({type:p}),w=ti({type:p,displayName:"排列坐标轴",tooltip:""}),A=ti({type:c,displayName:"拉伸方向",tooltip:""}),H=ti({range:[0,1],slide:!0,step:.01,displayName:"溢出偏移量",tooltip:""}),V=ti({range:[0,1],slide:!0,step:.01,displayName:"输入偏移量",tooltip:""}),y=ti({displayName:"间隔",tooltip:""}),z=ti({group:{id:"padding",name:"padding"}}),S=ti({group:{id:"padding",name:"padding"}}),F=ti({group:{id:"padding",name:"padding"}}),I=ti({group:{id:"padding",name:"padding"}}),E=ti({displayName:"磁吸",tooltip:""}),O=ti({type:_,displayName:"磁吸方向",tooltip:"",visible:function(){return this.magnetic}}),M=ti({displayName:"磁吸间隔",tooltip:"",visible:function(){return this.magnetic}}),P=ti({tooltip:"当item尺寸改变时,是否触发磁吸",visible:function(){return this.magnetic}}),N=ti({displayName:"循环页眉",tooltip:""}),D=ti({displayName:"循环页脚",tooltip:""}),m((($=function(i){function e(){for(var e,t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return e=i.call.apply(i,[this].concat(s))||this,r(e,"_arrangeAxis",L,a(e)),r(e,"stretchDirection",C,a(e)),r(e,"overflowOffset",R,a(e)),r(e,"enterOffset",k,a(e)),r(e,"_spacing",B,a(e)),r(e,"left",U,a(e)),r(e,"right",W,a(e)),r(e,"top",Z,a(e)),r(e,"bottom",j,a(e)),r(e,"magnetic",q,a(e)),r(e,"magneticDirection",J,a(e)),r(e,"magneticDuration",K,a(e)),r(e,"magneticSizeChanges",Q,a(e)),r(e,"loopHeader",X,a(e)),r(e,"loopFooter",Y,a(e)),e._groupLength=0,e._cacheGroups=[],e._groups=[],e._disableViews=[],e._visibleViews=[],e._fixedViews=[],e._disableHolders=[],e._isFill=!1,e._headerIndex=-1,e._footerIndex=-1,e._virtualSize=0,e._overflowHeader=0,e._cacheHeadeDatas=[],e._cacheHeadePosition=void 0,e}t(e,i);var n=e.prototype;return n.onInit=function(){this.adapter.modelManager.on(v.Event.ON_CHANGE_BEFORE,this._onModelChangeBefore,this),this.adapter.modelManager.on(v.Event.ON_INSERT,this._updateGroups,this),this.adapter.modelManager.on(v.Event.ON_REMOVE,this._updateGroups,this),this.adapter.modelManager.on(v.Event.ON_MOVE,this._updateGroups,this),this.adapter.modelManager.on(v.Event.ON_CLEAR,this._onClearModel,this),this.adapter.scrollManager.on(x.Event.ON_SCROLL,this._onScroll,this),this.adapter.scrollManager.on(x.Event.ON_VIEW_SIZE_CHANGED,this._resetAllState,this),this.adapter.scrollManager.on(x.Event.ON_CHANGED_ORIENTATION,this._resetAllState,this)},n._clearAll=function(){for(var i,e=0,t=this._visibleViews.length;e<t;e++)this._recycleViewToDisableViews(this._visibleViews[e]);(i=this._cacheGroups).push.apply(i,this._groups),this._clearFixedViews(),this._visibleViews.length=0,this._groups.length=0,this.virtualSize=0,this.overflowHeader=0},n._onClearModel=function(){this._clearAll(),this.emit(ii.ON_CLEARVIEWS)},n._resetAllState=function(){this._clearAll(),this.internal_updateVisibleView(0),this.emit(ii.ON_RESET_ALL_STATE)},n._onModelChangeBefore=function(){if(this.header&&this.virtualSize>this.adapter.mainAxisSize){var i=this.getVisibleIndexByGroupIndex(0);if(-1!=i){var e=this._visibleViews[i];this._cacheHeadeDatas=e.group.models.map((function(i){return i.data})),this._cacheHeadePosition={x:e.group.position.x,y:e.group.position.y}}else this._cacheHeadeDatas=this.header.group.models.map((function(i){return i.data})),this._cacheHeadePosition={x:this.header.group.position.x,y:this.header.group.position.y}}},n._updateGroups=function(i){var e,t=this,r=this._getViewFromDisibleViews(null),a=this.getGroupIndexByModelIndex(i);-1==a&&(a=this._groupLength-1);var s=null,n=!1,o={modelIndex:i,fixedIndex:-1},l=this._groups[a-1];for(l&&(o.fixedIndex=l.fixedIndex);;){(s=this._groups[a])||((s=this._getGroupFromCache()).internal_setIndex(this._groups.length),this._groups.push(s),a=this._groups.length);var h=s.internal_insert(o,r,n);if(a++,n=!0,!h)break}var d=this._groups.splice(a,this._groups.length);(e=this._cacheGroups).push.apply(e,d),this._groupLength=this._groups.length;var u=-1,p=0;this._cacheHeadeDatas.length>0&&(u=this._groups.findIndex((function(i){return i.internal_includes(t._cacheHeadeDatas)})));var c=this._groups[u];c&&(p+=c.size[this.adapter.mainAxis]+this.spacing,c.internal_setPosition(this._cacheHeadePosition[this.adapter.mainAxis]));for(var g=u-1;g>=0;g--){var f=this._groups[g];this._calcMainAxisPosition(f,c,_.Header),p+=f.size[this.adapter.mainAxis]+this.spacing,c=f}c=this._groups[u];for(var v=u+1;v<this.groupLength;v++){f=this._groups[v];this._calcMainAxisPosition(f,c,_.Footer),p+=f.size[this.adapter.mainAxis]+this.spacing,c=f}p-=this.spacing,this._virtualSize=Math.max(0,p),this._resetOverflowHeader(this._groups[0]),r.internal_reset(),this._disableViews.push(r),this.updateVisibles(u),this._cacheHeadeDatas=[],this._cacheHeadePosition=null},n.updateVisibles=function(i){var e=[];i=Math.max(0,i);for(var t=function(i){var t=e.findIndex((function(e){return e.oldData==i.data}));return-1!=t?e.splice(t,1)[0]:null},r=0;r<this._visibleViews.length;r++){var a=this._visibleViews[r];e=e.concat(a.holderList),a.internal_reset()}for(var s=this.adapter.mainAxisSize,n=0,o=this.visibleLength,l=i,h=this._groups.length;l<h;l++){var d=this._groups[l];if(this.getVisibleMainAxisSize()>=s&&o<=0)break;(p=this._visibleViews[n++])||(p=this._getViewFromDisibleViews(d.index),this._visibleViews.push(p)),p.internal_visible(d,t),o--}for(var u=this._visibleViews.length-1;u>=0;u--){var p;if((p=this._visibleViews[u]).holderList.length>0)break;this._disableFromVisibleViews(u)}for(var c=0,_=e.length;c<_;c++){var g=e[c];g.internal_disable(),this._disableHolders.push(g)}this._forceFill(),this._calcMagnetic(),this.emit(ii.ON_UPDATE_VIEWS)},n._getGroupFromCache=function(){var i=this._cacheGroups.pop();return i||(i=new h(this.adapter)),i.internal_reset(),i},n._calcMagnetic=function(){if(this.magnetic&&this.header){var i=!1;0==this.adapter.scrollManager.velocity&&(this.magneticDirection==_.Footer?this.footer.index==this._groupLength-1&&(this.adapter.scrollManager.scrollToFooter(this.magneticDuration),i=!0):0==this.header.index&&(this.adapter.scrollManager.scrollToHeader(this.magneticDuration),i=!0)),this.emit(ii.ON_MAGNETIC,i)}},n._calcMainAxisPosition=function(i,e,t){if(i)if(e){var r,a,s=this.adapter.mainAxis,n=this.adapter.multiplier,o=t==_.Footer?1:-1;t==_.Footer?(r=1==n?e.anchorPoint[s]:1-e.anchorPoint[s],a=1==n?1-i.anchorPoint[s]:i.anchorPoint[s]):(r=1==n?1-e.anchorPoint[s]:e.anchorPoint[s],a=1==n?i.anchorPoint[s]:1-i.anchorPoint[s]);var l=e.position[s];l-=e.size[s]*r*o*n,l-=this.spacing*n*o,l-=i.size[s]*a*o*n,i.internal_setPosition(l)}else i.internal_setPosition(this._getMainAxisHeaderPosition(i))},n._getMainAxisHeaderPosition=function(i){var e=0,t=0;return this.adapter.isVertical?(e=this.adapter.isArrangeAxisStart?-this.top:this.bottom,t=this.adapter.isArrangeAxisStart?1-i.anchorPoint[this.adapter.mainAxis]:i.anchorPoint[this.adapter.mainAxis]):(e=this.adapter.isArrangeAxisStart?this.left:-this.right,t=this.adapter.isArrangeAxisStart?i.anchorPoint[this.adapter.mainAxis]:1-i.anchorPoint[this.adapter.mainAxis]),e-=t*i.size[this.adapter.mainAxis]*this.adapter.multiplier},n._getViewFromDisibleViews=function(i){var e=null;if(null!=i){var t=this._fixedViews.findIndex((function(e){return e.index==i}));if(-1!=t){var r=this._fixedViews.splice(t,1)[0];this._recycleViewToDisableViews(r)}}return e||(e=this._disableViews.pop()),e||(e=this.adapter.getView()),e},n._getHolderFromDisableHolders=function(i){var e=this._disableHolders.findIndex((function(e){return e.code==i.code}));if(-1!=e)return this._disableHolders.splice(e,1)[0]},n._disableFromVisibleViews=function(i){var e=-1;e=i instanceof u?this._visibleViews.findIndex((function(e){return e.index==i.index})):i,this._recycleViewToDisableViews(this._visibleViews[e]),this._visibleViews.splice(e,1)},n._recycleViewToDisableViews=function(i){var e=this;i&&(i.internal_recycleHolders((function(i){return e._disableHolders.push(i)})),i.internal_disable(),this._disableViews.push(i))},n._clearFixedViews=function(){for(var i=0,e=this._fixedViews.length;i<e;i++){var t=this._fixedViews[i];this._recycleViewToDisableViews(t)}this._fixedViews.length=0},n._checkHeaderInvisible=function(){this.header&&(this.loopFooter||this.footer.index!=this.groupLength-1)&&this._isOverflowHeader(this.header.group)&&(this._disableFromVisibleViews(0),this._checkHeaderInvisible())},n._checkFooterInvisible=function(){this.footer&&(this.loopHeader||0!=this.header.index)&&this._isOverflowFooter(this.footer.group)&&(this._disableFromVisibleViews(this._visibleViews.length-1),this._checkFooterInvisible())},n._isOverflowHeader=function(i,e){void 0===e&&(e=this.overflowOffset);var t=this.internal_getGroupFooterBoundary(i);return e*=i.size[this.adapter.mainAxis],1==this.adapter.multiplier?t>=e:t<=-e},n._isOverflowFooter=function(i,e){void 0===e&&(e=this.overflowOffset);var t=this.internal_getGroupHeaderBoundary(i);return e*=i.size[this.adapter.mainAxis],1==this.adapter.multiplier?t+this.adapter.mainAxisSize<=-e:t-this.adapter.mainAxisSize>=e},n._isEnterFooter=function(i){if(!i)return!1;var e=this.internal_getGroupFooterBoundary(i),t=this.enterOffset*i.size[this.adapter.mainAxis];return 1==this.adapter.multiplier?e+this.adapter.mainAxisSize+t>=0:e-this.adapter.mainAxisSize-t<=0},n._isEnterHeader=function(i){if(!i)return!1;var e=this.internal_getGroupHeaderBoundary(i),t=this.overflowOffset*i.size[this.adapter.mainAxis];return 1==this.adapter.multiplier?e-t<=0:e+t>=0},n._fillHeader=function(){var i=this._groups[this._headerIndex];if(this._isEnterHeader(i)){var e=this._accumTargetSizeTowardsHeader(i.index,this.internal_getInitHeaderSize(i)),t=e.index,r=e.size,a=this._groups[t];if(a&&-1==this.getVisibleIndexByGroupIndex(t)){var s=this.internal_convertSizeToHeaderPosition(r,a);a.internal_setPosition(s);var n=this._getViewFromDisibleViews(a.index);this._visibleViews.unshift(n),n.internal_visible(a),0==n.index&&this._resetOverflowHeader(n.group),this._headerIndex=a.index,this._fillHeader()}}},n._fillFooter=function(){var i=this._groups[this._footerIndex];if(this._isEnterFooter(i)){var e=this._accumTargetSizeTowardsFooter(i.index,this.internal_getInitFooterSize(i)),t=e.index,r=e.size,a=this._groups[t];if(a&&-1==this.getVisibleIndexByGroupIndex(t)){var s=this.internal_convertSizeToFooterPosition(r,a);a.internal_setPosition(s);var n=this._getViewFromDisibleViews(a.index);this._visibleViews.push(n),n.internal_visible(a),0==n.index&&this._resetOverflowHeader(n.group),this._footerIndex=a.index,this._fillFooter()}}},n._fillFixedView=function(){if(this.header&&(-1!=this.header.group.fixedIndex||this.header.group.isFixed))for(var i=this.header.index,e=this.adapter.mainAxis,t=this.internal_getInitHeaderSize(this.header.group),r=i-1;r>=0;r--){var a=this._groups[r];if(!a)return void console.error("_fillFixedView错误 找不到group",r);if(t+=a.size[e]+this.spacing,a.isFixed){var s=this.internal_convertSizeToHeaderPosition(t,a);if(-1!=this._fixedViews.findIndex((function(i){return i.index==a.index}))){f.approximately(s,a.position[e])||(a.internal_setPosition(s),this.adapter.layoutManager.layout(a));break}this._clearFixedViews();s=this.internal_convertSizeToHeaderPosition(t,a);a.internal_setPosition(s);var n=this._getViewFromDisibleViews(a.index);n.internal_visible(a),this._fixedViews.push(n);break}}},n._accumTargetSizeTowardsHeader=function(i,e){for(var t=this._groups.length;;){if(0==i&&this.loopHeader&&(i=t),0==i)return{index:i,size:e};if(i--,!this._groups[i])return{index:i,size:e};if((e+=this.internal_accumulationSize(i))>=0)return{index:i,size:e}}},n._accumTargetSizeTowardsFooter=function(i,e){for(var t=this._groups.length;;){if(i==t-1&&this.loopFooter&&(i=-1),i==t-1)return{index:i,size:e};if(i++,!this._groups[i])return{index:i,size:e};if((e+=this.internal_accumulationSize(i))>=0)return{index:i,size:e}}},n._fillFooterHandle=function(){this._checkHeaderInvisible(),this._fillFooter()},n._fillHeaderHandle=function(){this._checkFooterInvisible(),this._fillHeader()},n._forceFill=function(){this._updateHeaderFooterIndex(),this._fillHeaderHandle(),this._fillFooterHandle()},n._updateHeaderFooterIndex=function(){this._headerIndex=this.header?this.header.index:0,this._footerIndex=this.footer?this.footer.index:0},n._onScroll=function(i){if(0!=this._groups.length){switch(this._updateHeaderFooterIndex(),i){case g.Up:case g.Left:this.adapter.isArrangeAxisStart?this._fillFooterHandle():this._fillHeaderHandle();break;case g.Down:case g.Right:this.adapter.isArrangeAxisStart?this._fillHeaderHandle():this._fillFooterHandle()}this._fillFixedView(),this.emit(ii.ON_SCROLL)}},n._stretchToHeader=function(i,e){for(var t=this._visibleViews[i],r=e;r>=0;r--){var a=this._visibleViews[r];t&&(this._calcMainAxisPosition(a.group,t.group,_.Header),this.adapter.layoutManager.layout(a.group)),t=a}},n._stretchToFooter=function(i,e){for(var t=this._visibleViews[i],r=e;r<this._visibleViews.length;r++){var a=this._visibleViews[r];t&&(this._calcMainAxisPosition(a.group,t.group,_.Footer),this.adapter.layoutManager.layout(a.group)),t=a}},n._resetOverflowHeader=function(i){if(!i)return this.overflowHeader=0;var e=this.adapter.mainAxis,t=i.anchorPoint[e];t=1==this.adapter.multiplier?1-t:t;var r=i.position[e];r+=i.size[e]*t*this.adapter.multiplier,this.overflowHeader=r},n._calcOverflowHeader=function(i,e,t){var r=this.getVisibleIndexByGroupIndex(0);if(-1!=r){var a=this._visibleViews[r];return this._resetOverflowHeader(a.group)}var s=this.adapter.mainAxis,n=i.anchorPoint[s];n=1==this.adapter.multiplier?1-n:n;var o=i.oldSize[s],l=i.size[s],h=this.adapter.multiplier;switch(this.stretchDirection){case c.Header:var d=i.oldPosition[s]+o*n*h;(u=1==h?this.overflowHeader>=d:this.overflowHeader<=d)&&(this.overflowHeader+=(l-o)*h);break;case c.Footer:d=i.oldPosition[s]+o*n*h;(u=1==h?this.overflowHeader>=d:this.overflowHeader<=d)||(this.overflowHeader-=(l-o)*h);break;case c.Center:d=i.oldPosition[s]+o*n*h;(u=1==h?this.overflowHeader>=d:this.overflowHeader<=d)?this.overflowHeader+=.5*(l-o)*h:this.overflowHeader-=.5*(l-o)*h;break;case c.Auto:d=i.oldPosition[s]+o*n*h;var u=1==h?this.overflowHeader>=d:this.overflowHeader<=d;e<=t&&(d=i.oldPosition[s]+o*n*h,u=-1==h?this.overflowHeader>=d:this.overflowHeader<=d),u&&(e<=t?this.overflowHeader-=(l-o)*h:this.overflowHeader+=(l-o)*h)}},n.internal_lateUpdate=function(i){this._isFill&&(this._isFill=!1,this._forceFill()),this.emit(ii.ON_LATEUPDATE,i)},n.internal_viewChanged=function(i,e){var t=i.group.size[this.adapter.mainAxis]-e;this.virtualSize+=t;var r=this.getVisibleIndexByGroupIndex(i.index),a=-1;if(this.stretchDirection==c.Footer){var s=r-1;this._visibleViews[s]||this.adapter.layoutManager.layout(i.group),this._stretchToFooter(s,r)}else if(this.stretchDirection==c.Header){var n=r+1;this._visibleViews[n]||this.adapter.layoutManager.layout(i.group),this._stretchToHeader(n,r)}else if(this.stretchDirection==c.Center)this.adapter.layoutManager.layout(i.group),this._stretchToHeader(r,r-1),this._stretchToFooter(r,r+1);else{if(-1==(a=this.adapter.centerManager.getCenterVisibleIndex()))throw Error("找不到中心索引"+i.index);var o=this._visibleViews[a];this.adapter.layoutManager.layout(o.group),this._stretchToHeader(a,a-1),this._stretchToFooter(a,a+1)}this._calcOverflowHeader(i.group,a,r),this.magneticSizeChanges&&this._calcMagnetic(),this._isFill=!0,this.emit(ii.ON_CHANGED_VIRTUALSIZE)},n.internal_getHolder=function(i){var e=this._getHolderFromDisableHolders(i);if(!e){var t=this.adapter.getPrefab(i.data),r=l(t);e=this.adapter.getHolder(r,i.code)}return e.node.parent=this.adapter.scrollManager.getLayerNode(i.element.layer),e},n.internal_updateVisibleView=function(i){this._onModelChangeBefore(),this._updateGroups(i)},n.internal_getGroupFooterBoundary=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?e:1-e;var t=i.position[this.adapter.mainAxis];return t-=i.size[this.adapter.mainAxis]*e*this.adapter.multiplier,t+=this.adapter.scrollManager.contentPosition},n.internal_getGroupHeaderBoundary=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];return e=1==this.adapter.multiplier?1-e:e,i.position[this.adapter.mainAxis]+this.adapter.scrollManager.contentPosition+e*i.size[this.adapter.mainAxis]*this.adapter.multiplier},n.internal_getInitHeaderSize=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?1-e:e;var t=-i.position[this.adapter.mainAxis]*this.adapter.multiplier;return t-=i.size[this.adapter.mainAxis]*e,t-=this.adapter.scrollManager.contentPosition*this.adapter.multiplier,t=this.adapter.mainAxisSize-t},n.internal_getInitFooterSize=function(i){if(!i)return 0;var e=i.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?e:1-e;var t=-i.position[this.adapter.mainAxis]*this.adapter.multiplier;return t+=i.size[this.adapter.mainAxis]*e,t-=this.adapter.scrollManager.contentPosition*this.adapter.multiplier},n.internal_accumulationSize=function(i){var e=this._groups[i];return e?e.size[this.adapter.mainAxis]+this.spacing:0},n.internal_convertSizeToFooterPosition=function(i,e){var t=e.anchorPoint[this.adapter.mainAxis];t=1==this.adapter.multiplier?t:1-t;var r=e.size[this.adapter.mainAxis]*t,a=-this.adapter.scrollManager.contentPosition;return a-=this.adapter.multiplier*i-this.adapter.multiplier*r},n.internal_convertSizeToHeaderPosition=function(i,e){var t=e.anchorPoint[this.adapter.mainAxis];t=1==this.adapter.multiplier?1-t:t;var r=e.size[this.adapter.mainAxis]*t,a=this.adapter.multiplier*i-this.adapter.multiplier*r;return a-=this.adapter.multiplier*this.adapter.mainAxisSize,a-=this.adapter.scrollManager.contentPosition},n.getGroup=function(i){return this._groups[i]},n.getVisibleView=function(i){return this._visibleViews[i]},n.getVisibleMainAxisSize=function(){if(0==this._visibleViews.length)return 0;for(var i=0,e=this.adapter.mainAxis,t=0,r=this._visibleViews.length;t<r;t++){var a=this._visibleViews[t];a.group&&(i+=a.group.size[e]+this.spacing)}return i-=this.spacing},n.getGroupIndexByModelIndex=function(i){for(var e=0,t=this._groups.length;e<t;e++){if(-1!=this._groups[e].findModelIndex(i))return e}return-1},n.getVisibleIndexByGroupIndex=function(i){return this._visibleViews.findIndex((function(e){return e.index==i}))},n.getNextFixedHolders=function(i){for(var e=[],t=this.getVisibleIndexByGroupIndex(i)+1,r=this._visibleViews.length;t<r;t++){var a=this._visibleViews[t];if(a.index!=i&&a.group.isFixed){e=a.getFixedHolders();break}}return e},n.getMagneticOffset=function(){if(!this.magnetic)return 0;var i=this.adapter.isHorizontal?-this.adapter.multiplier:this.adapter.multiplier;return this.magneticDirection==_.Footer?this.footer?Math.max(0,this.adapter.mainAxisSize-this.adapter.mainAxisPadding-this.getVisibleMainAxisSize())*i:this.adapter.mainAxisSize*i:0},s(e,[{key:"arrangeAxis",get:function(){return this._arrangeAxis},set:function(i){i!=this._arrangeAxis&&(this._arrangeAxis=i,this._resetAllState())}},{key:"spacing",get:function(){return this._spacing},set:function(i){i!=this._spacing&&(this._spacing=i,this._resetAllState())}},{key:"header",get:function(){return this._visibleViews[0]}},{key:"footer",get:function(){return this._visibleViews[this._visibleViews.length-1]}},{key:"overflowHeader",get:function(){return this._overflowHeader},set:function(i){i!=this._overflowHeader&&(this._overflowHeader=i,this.emit(ii.ON_CHANGED_OVERFLOWHEADER,i))}},{key:"virtualSize",get:function(){return this._virtualSize},set:function(i){i!=this._virtualSize&&(this._virtualSize=i,this.emit(ii.ON_CHANGED_VIRTUALSIZE))}},{key:"groupLength",get:function(){return this._groupLength}},{key:"visibleLength",get:function(){return this._visibleViews.length}},{key:"min",get:function(){return this.header?this.adapter.isArrangeAxisStart?this.internal_getGroupFooterBoundary(this.footer.group):this.internal_getGroupHeaderBoundary(this.header.group):0}},{key:"max",get:function(){return this.header?this.adapter.isArrangeAxisStart?this.internal_getGroupHeaderBoundary(this.header.group):this.internal_getGroupFooterBoundary(this.footer.group):0}}]),e}(d)).Event=ii,L=e((G=$).prototype,"_arrangeAxis",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.Start}}),e(G.prototype,"arrangeAxis",[w],Object.getOwnPropertyDescriptor(G.prototype,"arrangeAxis"),G.prototype),C=e(G.prototype,"stretchDirection",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.Auto}}),R=e(G.prototype,"overflowOffset",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),k=e(G.prototype,"enterOffset",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=e(G.prototype,"_spacing",[ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),e(G.prototype,"spacing",[y],Object.getOwnPropertyDescriptor(G.prototype,"spacing"),G.prototype),U=e(G.prototype,"left",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=e(G.prototype,"right",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=e(G.prototype,"top",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),j=e(G.prototype,"bottom",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=e(G.prototype,"magnetic",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),J=e(G.prototype,"magneticDirection",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.Header}}),K=e(G.prototype,"magneticDuration",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Q=e(G.prototype,"magneticSizeChanges",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X=e(G.prototype,"loopHeader",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=e(G.prototype,"loopFooter",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=G))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/water_wave.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,a,n,o,s,i,c,h;return{setters:[function(t){e=t.inheritsLoose,r=t.createClass},function(t){a=t.cclegacy,n=t._decorator,o=t.Node,s=t.UITransform,i=t.v2,c=t.Sprite,h=t.Component}],execute:function(){var f;a._RF.push({},"c420e4C+QdGLbGmx2ElHVjh","water_wave",void 0);var u=n.ccclass;n.property,t("shaderWaterWave",u("shaderWaterWave")(f=function(t){function a(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this)._waveOffset=0,e._material=void 0,e}e(a,t);var n=a.prototype;return n.onLoad=function(){this._material=this.sprite.getMaterialInstance(0),this.node.on(o.EventType.TOUCH_END,this.touchStartEvent,this)},n.touchStartEvent=function(t){var e=t.getLocation(),r=this.node.getComponent(s),a=i(e.x/r.width,(r.height-e.y)/r.height);this._material.setProperty("center",a),this._waveOffset=0},n.update=function(t){this._waveOffset>2||(this._waveOffset+=t,this._material.setProperty("wave_offset",this._waveOffset))},r(a,[{key:"sprite",get:function(){return this.node.getComponent(c)}}]),a}(h))||f);a._RF.pop()}}}));
